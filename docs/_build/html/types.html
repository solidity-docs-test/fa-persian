<!DOCTYPE html>
<html class="writer-html5" lang="fa" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>انواع &mdash; مستندات Solidity0.8.4</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/a4_railroad_diagram.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/toggle.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/translations.js"></script>
        <script src="_static/js/toggle.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="فهرست" href="genindex.html" />
    <link rel="search" title="جستجو" href="search.html" />
    <link rel="next" title="واحدها و متغیرهای موجود در سطح جهانی" href="units-and-global-variables.html" />
    <link rel="prev" title="ساختار قرارداد" href="structure-of-a-contract.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #65afff" >
            <a href="index.html">
            <img src="_static/logo.svg" class="logo" alt="آرم"/>
          </a>
              <div class="version">
                0.8.4
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="جستجوی مستندات" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <p class="caption" role="heading"><span class="caption-text">مبانی</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="introduction-to-smart-contracts.html">مقدمه‌ای بر قراد‌های هوشمند</a></li>
<li class="toctree-l1"><a class="reference internal" href="installing-solidity.html">نصب کامپایلر سالیدیتی</a></li>
<li class="toctree-l1"><a class="reference internal" href="solidity-by-example.html">سالیدیتی با مثال</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">توضیحات زبان</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="layout-of-source-files.html">چیدمان یک فایل منبع سالیدیتی</a></li>
<li class="toctree-l1"><a class="reference internal" href="structure-of-a-contract.html">ساختار قرارداد</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">انواع</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#value-types">انواع مقدار</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#index-2">بولین</a></li>
<li class="toctree-l3"><a class="reference internal" href="#integers">عدد صحیح یا اینتیجر</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">مقایسه‌گر‌ها</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bit-operations">عملیات‌های بیتی (Bit operations)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">شیفت‌ها</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id7">جمع، تفریق و ضرب</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">تقسیم</a></li>
<li class="toctree-l4"><a class="reference internal" href="#modulo">باقیمانده  (Modulo)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#exponentiation">به توان رساندن (Exponentiation)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#index-4">عدد ممیز ثابت</a></li>
<li class="toctree-l3"><a class="reference internal" href="#address">آدرس</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#members-of-addresses">اعضای آدرس‌ها</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#contract-types">انواع قرارداد</a></li>
<li class="toctree-l3"><a class="reference internal" href="#index-7">آرایه‌های بایت با اندازه ثابت</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id14">آرایه بایت با اندازه پویا</a></li>
<li class="toctree-l3"><a class="reference internal" href="#address-literals">لیترال‌های Address</a></li>
<li class="toctree-l3"><a class="reference internal" href="#rational-literals">لیترال‌های عدد گویا و صحیح</a></li>
<li class="toctree-l3"><a class="reference internal" href="#string">لیترال‌های string و انواع</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unicode">لیترال‌های Unicode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#index-11">لیترال‌های هگزادسیمال</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enums">Enums</a></li>
<li class="toctree-l3"><a class="reference internal" href="#user-defined-value-types">User Defined Value Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-types">انواع توابع(Function Types)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#reference-types">انواع مرجع (Reference Types)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-location">مکان داده (Data location)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#data-location-and-assignment-behaviour">مکان داده و رفتار انتساب (Data location and assignment behaviour)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#arrays">آرایه‌ها</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bytes-string">bytes و string  به عنوان آرایه‌ها</a></li>
<li class="toctree-l4"><a class="reference internal" href="#bytes-concat">تابع bytes.concat</a></li>
<li class="toctree-l4"><a class="reference internal" href="#allocating-memory-arrays">تخصیص آرایه های مِمُوری (Allocating Memory Arrays)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#index-20">آرایه‌ لیترال‌ها</a></li>
<li class="toctree-l4"><a class="reference internal" href="#array-members-public">اعضای آرایه (Array Members) public</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#array-slices">برش‌های آرایه (Array Slices)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#translate-id-different-from-the-original">// translate id different from the original</a></li>
<li class="toctree-l3"><a class="reference internal" href="#struct">Struct‌ها</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#mapping-types">انواع  نگاشت‌ها (Mapping Types)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#iterable-mappings">نگاشت های تکرارپذیر</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#lvalues">اپراتورهای شامل  LValues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#delete">حذف</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#conversions-between-elementary-types">تبدیل بین نوع‌های اصلی (Conversions between Elementary Types)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#implicit-conversions">تبدیل‌های ضمنی (Implicit Conversions)</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#types-conversion-literals">تبدیل بین لیترال‌ها و نوع‌های اصلی</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#integer-types">انواع عدد صحیح  (Integer Types)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id32">آرایه‌های بایت با اندازه ثابت</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id33">آدرس‌ها</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="units-and-global-variables.html">واحدها و متغیرهای موجود در سطح جهانی</a></li>
<li class="toctree-l1"><a class="reference internal" href="control-structures.html">Expressions and Control Structures</a></li>
<li class="toctree-l1"><a class="reference internal" href="contracts.html">Contracts</a></li>
<li class="toctree-l1"><a class="reference internal" href="assembly.html">Inline Assembly</a></li>
<li class="toctree-l1"><a class="reference internal" href="cheatsheet.html">Cheatsheet</a></li>
<li class="toctree-l1"><a class="reference internal" href="grammar.html">Language Grammar</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">کامپایلر</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="using-the-compiler.html">Using the Compiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysing-compilation-output.html">Analysing the Compiler Output</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Internals</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="internals/layout_in_storage.html">Layout of State Variables in Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals/layout_in_memory.html">Layout in Memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals/layout_in_calldata.html">Layout of Call Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals/variable_cleanup.html">Cleaning Up Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals/source_mappings.html">Source Mappings</a></li>
<li class="toctree-l1"><a class="reference internal" href="internals/optimizer.html">The Optimizer</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata.html">Contract Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="abi-spec.html">Contract ABI Specification</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional Material</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="050-breaking-changes.html">Solidity v0.5.0 Breaking Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="060-breaking-changes.html">Solidity v0.6.0 Breaking Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="070-breaking-changes.html">Solidity v0.7.0 Breaking Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="080-breaking-changes.html">Solidity v0.8.0 Breaking Changes</a></li>
<li class="toctree-l1"><a class="reference internal" href="natspec-format.html">NatSpec Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="security-considerations.html">Security Considerations</a></li>
<li class="toctree-l1"><a class="reference internal" href="smtchecker.html">SMTChecker and Formal Verification</a></li>
<li class="toctree-l1"><a class="reference internal" href="resources.html">Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="path-resolution.html">Import Path Resolution</a></li>
<li class="toctree-l1"><a class="reference internal" href="yul.html">Yul</a></li>
<li class="toctree-l1"><a class="reference internal" href="style-guide.html">Style Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="common-patterns.html">Common Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="bugs.html">List of Known Bugs</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing</a></li>
<li class="toctree-l1"><a class="reference internal" href="brand-guide.html">Solidity Brand Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="language-influences.html">Language Influences</a></li>
</ul>

    <ul>
        <li>
            <a href="genindex.html">Keyword Index</a>
        </li>
    </ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #65afff" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Solidity</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>انواع</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/types.rst.txt" rel="nofollow"> نمایش متن منبع صفحه</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="types">
<span id="index-0"></span><span id="id1"></span><h1>انواع<a class="headerlink" href="#types" title="پیوند ثابت به این سر مقاله"></a></h1>
<blockquote>
<div><p>سالیدیتی یک زبان نوع استاتیک است، به این معنی که نوع هر متغیر (state و local) باید مشخص شود. سالیدیتی چندین نوع اصلی را ارائه می‌دهد که می‌توانند با هم ترکیب شوند و انواع پیچیده‌ای را تشکیل دهند.</p>
<p>علاوه بر این، انواع می‌توانند در عبارات حاوی عملگر  با یکدیگر تعامل داشته باشند. برای مراجعه سریع به عملگرهای مختلف، به بخش <a class="reference internal" href="cheatsheet.html#order"><span class="std std-ref">ترتیب تقدم عملگرها</span></a> مراجعه کنید</p>
</div></blockquote>
<p>مفهوم مقادیر &quot; undefined &quot; یا &quot; “null &quot; در سالیدیتی وجود ندارد، اما متغیرهای تازه اعلام شده همیشه <a class="reference internal" href="control-structures.html#default-value"><span class="std std-ref">یک مقدار پیش فرض</span></a> وابسته به نوع آنها دارند. برای استفاده از مقادیر غیر منتظره، باید از <a class="reference internal" href="control-structures.html#assert-and-require"><span class="std std-ref">تابع revert</span></a>  استفاده کنید تا کل تراکنش را برگردانید، یا یک تاپل  را با مقدار <code class="docutils literal notranslate"><span class="pre">bool</span></code> دوم  نشان دهید که موفقیت را نشان می‌دهد.
انواع مقدار</p>
<section id="value-types">
<span id="index-1"></span><span id="id2"></span><h2>انواع مقدار<a class="headerlink" href="#value-types" title="پیوند ثابت به این سر مقاله"></a></h2>
<p>انواع زیر را نیز انواع مقدار می‌نامند زیرا متغیرهای این نوع‌ها همیشه از نظر مقدار منتقل می‌شوند، یعنی وقتی که به عنوان آرگومان تابع یا در &quot;انتساب‌ها &quot; استفاده میشوند، همیشه کپی می‌شوند.</p>
<section id="index-2">
<span id="id3"></span><h3>بولین<a class="headerlink" href="#index-2" title="پیوند ثابت به این سر مقاله"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">bool</span></code>: مقادیر ممکن ثابت‌های <code class="docutils literal notranslate"><span class="pre">true</span></code>  و  <code class="docutils literal notranslate"><span class="pre">false</span></code> هستند.</p>
<p>عملگر‌ها:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">!</span></code> (logical negation)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> (logical conjunction, &quot;and&quot;)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">||</span></code> (logical disjunction, &quot;or&quot;)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">==</span></code> (equality)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">!=</span></code> (inequality)</p></li>
</ul>
<p>اپراتورها <code class="docutils literal notranslate"><span class="pre">||</span></code>  و  <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code>  قوانین متداول اتصال کوتاه  را اعمال می‌کنند. این بدان معنی است که در عبارت <code class="docutils literal notranslate"><span class="pre">f(x)</span> <span class="pre">||</span> <span class="pre">g(y)</span></code> ، اگر <code class="docutils literal notranslate"><span class="pre">f(x)</span></code>  به صورت  <code class="docutils literal notranslate"><span class="pre">true</span></code>  ارزیابی شود،  <code class="docutils literal notranslate"><span class="pre">g(y)</span></code> حتی اگر دارای عوارض جانبی باشد نیز ارزیابی نخواهد شد.</p>
</section>
<section id="integers">
<span id="index-3"></span><span id="id4"></span><h3>عدد صحیح یا اینتیجر<a class="headerlink" href="#integers" title="پیوند ثابت به این سر مقاله"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">int</span></code> / <code class="docutils literal notranslate"><span class="pre">uint</span></code>:  عددهای صحیح با علامت و بدون علامت در اندازه های مختلف. کلمات کلیدی  <code class="docutils literal notranslate"><span class="pre">uint8</span></code> تا  <code class="docutils literal notranslate"><span class="pre">uint256</span></code>  در گام‌های  <code class="docutils literal notranslate"><span class="pre">8</span></code> (بدون علامت 8 تا 256 بیت) و <code class="docutils literal notranslate"><span class="pre">int8</span></code> تا  <code class="docutils literal notranslate"><span class="pre">int256</span></code> . <code class="docutils literal notranslate"><span class="pre">uint</span></code> و  <code class="docutils literal notranslate"><span class="pre">int</span></code> به ترتیب نام مستعار برای  <code class="docutils literal notranslate"><span class="pre">uint256</span></code> و  <code class="docutils literal notranslate"><span class="pre">int256</span></code> هستند.</p>
<p>عملگرها:</p>
<ul class="simple">
<li><p>مقایسه‌گرها :  <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code> ، <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> ، <code class="docutils literal notranslate"><span class="pre">==</span></code> ، <code class="docutils literal notranslate"><span class="pre">!=</span></code> ، <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code> ، <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> (ارزیابی به  <code class="docutils literal notranslate"><span class="pre">bool</span></code> )</p></li>
<li><p>عملگرهای بیت :  <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> ، <code class="docutils literal notranslate"><span class="pre">|</span></code> ، <code class="docutils literal notranslate"><span class="pre">^</span></code> (bitwise exclusive یا) ،  <code class="docutils literal notranslate"><span class="pre">~</span></code> (bitwise negation)</p></li>
<li><p>عملگرهای شیفت کردن :  <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> (شیفت چپ) ، <code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code> (شیفت راست)</p></li>
<li><p>عملگرهای حسابی :  <code class="docutils literal notranslate"><span class="pre">+</span></code> ,``-`` ، unary <code class="docutils literal notranslate"><span class="pre">-</span></code>  (فقط برای اعداد صحیح با علامت) ، <code class="docutils literal notranslate"><span class="pre">*</span></code> ، <code class="docutils literal notranslate"><span class="pre">/</span></code> ، <code class="docutils literal notranslate"><span class="pre">%</span></code>  (باقیمانده) ،  <code class="docutils literal notranslate"><span class="pre">**</span></code> (توان)</p></li>
</ul>
<p>برای یک عدد صحیح نوع  <code class="docutils literal notranslate"><span class="pre">X</span></code> ، می‌توانید از  <code class="docutils literal notranslate"><span class="pre">type(X).min</span></code> و <code class="docutils literal notranslate"><span class="pre">type(X).max</span></code>  برای دستیابی به حداقل و حداکثر مقدار قابل نمایش توسط نوع استفاده کنید.</p>
<div class="admonition warning">
<p class="admonition-title">هشدار</p>
<p>Integers in Solidity are restricted to a certain range. For example, with <code class="docutils literal notranslate"><span class="pre">uint32</span></code>, this is <code class="docutils literal notranslate"><span class="pre">0</span></code> up to <code class="docutils literal notranslate"><span class="pre">2**32</span> <span class="pre">-</span> <span class="pre">1</span></code>.
There are two modes in which arithmetic is performed on these types: The &quot;wrapping&quot; or &quot;unchecked&quot; mode and the &quot;checked&quot; mode.
By default, arithmetic is always &quot;checked&quot;, which mean that if the result of an operation falls outside the value range
of the type, the call is reverted through a <a class="reference internal" href="control-structures.html#assert-and-require"><span class="std std-ref">failing assertion</span></a>. You can switch to &quot;unchecked&quot; mode
using <code class="docutils literal notranslate"><span class="pre">unchecked</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span></code>. More details can be found in the section about <a class="reference internal" href="control-structures.html#unchecked"><span class="std std-ref">unchecked</span></a>.</p>
</div>
<section id="id5">
<h4>مقایسه‌گر‌ها<a class="headerlink" href="#id5" title="پیوند ثابت به این سر مقاله"></a></h4>
<p>مقدار مقایسه‌گر، مقداری است که با مقایسه مقدار عدد صحیح  بدست می‌آید.</p>
</section>
<section id="bit-operations">
<h4>عملیات‌های بیتی (Bit operations)<a class="headerlink" href="#bit-operations" title="پیوند ثابت به این سر مقاله"></a></h4>
<p>عملیات بیت بر روی نمایش مکمل دو انجام می‌شود. این بدان معنی است که به عنوان
مثال  <code class="docutils literal notranslate"><span class="pre">int256(0)</span> <span class="pre">==</span> <span class="pre">int256(-1)~</span></code> .</p>
</section>
<section id="id6">
<h4>شیفت‌ها<a class="headerlink" href="#id6" title="پیوند ثابت به این سر مقاله"></a></h4>
<p>شیفت‌ها نتیجه یک عمل جابجایی دارای نوع عملوند  سمت چپ می‌باشند و نتیجه را متناسب با نوع آن کوتاه
می‌کنند. عملوند سمت راست باید از نوع بدون علامت  باشد. تلاش برای جابجایی با نوع با علامت  خطای کامپایل
ایجاد می‌کند.</p>
<p>Shifts can be &quot;simulated&quot; using multiplication by powers of two in the following way. Note that the truncation
to the type of the left operand is always performed at the end, but not mentioned explicitly.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&lt;&lt;</span> <span class="pre">y</span></code> is equivalent to the mathematical expression <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">*</span> <span class="pre">2**y</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&gt;&gt;</span> <span class="pre">y</span></code> is equivalent to the mathematical expression <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">/</span> <span class="pre">2**y</span></code>, rounded towards negative infinity.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">هشدار</p>
<p>قبل از نسخه  <code class="docutils literal notranslate"><span class="pre">0.5.0</span></code>  شیفت راست  <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">&gt;&gt;</span> <span class="pre">y</span></code>   برای منفی  <code class="docutils literal notranslate"><span class="pre">x</span></code>  معادل <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">/</span> <span class="pre">2**y</span></code> بود، یعنی
از شیفت‌های راست به جای گرد کردن (به سمت بی نهایت منفی) از گرد کردن (به سمت صفر) استفاده
می‌شد.</p>
</div>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>بررسی‌های سرریز همانطور که برای عملیات حسابی انجام می‌شود هرگز برای عملیات شیفت انجام نمی‌شود. در عوض، نتیجه همیشه کوتاه می‌شود.</p>
</div>
</section>
<section id="id7">
<h4>جمع، تفریق و ضرب<a class="headerlink" href="#id7" title="پیوند ثابت به این سر مقاله"></a></h4>
<p>جمع، تفریق و ضرب سمنتیک معمول را دارند، با توجه به دو حالت مختلف از نظر سرریز  و زیرریز   :</p>
<p>به طور پیش فرض، تمام محاسبات زیرریز  و سریز بررسی می‌شود، اما این می‌تواند با استفاده از <a class="reference internal" href="control-structures.html#unchecked"><span class="std std-ref">unchecked block</span></a>
غیرفعال شود، در نتیجه محاسبات پیچیده می‌شود. جزئیات بیشتر را می‌توان در آن بخش یافت.</p>
<p>عبارت  <code class="docutils literal notranslate"><span class="pre">x-</span></code> برابر است با  <code class="docutils literal notranslate"><span class="pre">(T(0)</span> <span class="pre">-</span> <span class="pre">x)</span></code> که  <code class="docutils literal notranslate"><span class="pre">T</span></code>  نوع  <code class="docutils literal notranslate"><span class="pre">x</span></code> است. فقط در انواع امضا شده قابل استفاده است.
اگر  <code class="docutils literal notranslate"><span class="pre">x</span></code> منفی باشد مقدار   <code class="docutils literal notranslate"><span class="pre">x-</span></code> می‌تواند مثبت باشد. اخطار دیگری نیز وجود دارد که ناشی از نمایش مکمل دو  است:</p>
<p>اگر  <code class="docutils literal notranslate"><span class="pre">;int</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">type(int).min</span></code> داشته باشید،  <code class="docutils literal notranslate"><span class="pre">x-</span></code>  با رنج مثبت متناسب نیست. این به این
معنی است که  <code class="docutils literal notranslate"><span class="pre">unchecked</span> <span class="pre">{</span> <span class="pre">assert(-x</span> <span class="pre">==</span> <span class="pre">x);</span> <span class="pre">}</span></code>  کار می‌کند، و عبارت  <code class="docutils literal notranslate"><span class="pre">x-</span></code>  هنگامی
که در حالت checked استفاده ‌شود، منجر به اعلان شکست  می‌شود.</p>
</section>
<section id="id8">
<h4>تقسیم<a class="headerlink" href="#id8" title="پیوند ثابت به این سر مقاله"></a></h4>
<p>از آنجا که نوع نتیجه یک عملیات همیشه نوع یکی از عملوندها  است، تقسیم بر اعداد صحیح همیشه منجر به
یک عدد صحیح می‌شود. در سالیدیتی، تقسیم به سمت صفر گرد می‌شود. این بدان معنی است که
<code class="docutils literal notranslate"><span class="pre">int256(-5)</span> <span class="pre">/</span> <span class="pre">int256(2)</span> <span class="pre">==</span> <span class="pre">int256(-2)</span></code>.</p>
<blockquote>
<div><p>توجه داشته باشید که در مقابل، تقسیم بر روی <a class="reference internal" href="#rational-literals"><span class="std std-ref">لیترال‌ها</span></a>  منجر به مقادیر کسری دلخواه می‌شود.</p>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>تقسیم بر صفر باعث <a class="reference internal" href="control-structures.html#assert-and-require"><span class="std std-ref">Panic error</span></a>  می‌شود. این بررسی از طریق  <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">...</span> <span class="pre">}unchecked</span></code>  غیرفعال  <strong>نمی‌شود</strong> .</p>
</div>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>عبارت  <code class="docutils literal notranslate"><span class="pre">type(int).min</span> <span class="pre">/</span> <span class="pre">(-1)</span></code>  موردی است که تقسیم باعث سرریز  می‌شود. در حالت
حسابی بررسی شده ، باعث اعلان شکست می‌شود، در حالی که در حالت wrapping  ،
مقدار  <code class="docutils literal notranslate"><span class="pre">type(int).min</span></code> خواهد بود.</p>
</div>
</section>
<section id="modulo">
<h4>باقیمانده  (Modulo)<a class="headerlink" href="#modulo" title="پیوند ثابت به این سر مقاله"></a></h4>
<p>عملیات باقیمانده <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">%</span> <span class="pre">n</span></code>  پس از تقسیم عملوند   <code class="docutils literal notranslate"><span class="pre">a</span></code> توسط عملوند  <code class="docutils literal notranslate"><span class="pre">n</span></code> ، باقی مانده  <code class="docutils literal notranslate"><span class="pre">r</span></code> را حاصل می‌شود،
جایی که  <code class="docutils literal notranslate"><span class="pre">q</span> <span class="pre">=</span> <span class="pre">int(a</span> <span class="pre">/</span> <span class="pre">n)</span></code> و  <code class="docutils literal notranslate"><span class="pre">r</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">-</span> <span class="pre">(n</span> <span class="pre">*</span> <span class="pre">q)</span></code> . این بدان معناست که باقیمانده همان
علامت عملوند سمت چپ (یا صفر) خود را نشان می‌دهد و <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">%</span> <span class="pre">n</span> <span class="pre">==</span> <span class="pre">-(-a</span> <span class="pre">%</span> <span class="pre">n)</span></code>  برای منفی  <code class="docutils literal notranslate"><span class="pre">a</span></code>
نگه می‌دارد:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">int256(5)</span> <span class="pre">%</span> <span class="pre">int256(2)</span> <span class="pre">==</span> <span class="pre">int256(1)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">int256(5)</span> <span class="pre">%</span> <span class="pre">int256(-2)</span> <span class="pre">==</span> <span class="pre">int256(1)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">int256(-5)</span> <span class="pre">%</span> <span class="pre">int256(2)</span> <span class="pre">==</span> <span class="pre">int256(-1)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">int256(-5)</span> <span class="pre">%</span> <span class="pre">int256(-2)</span> <span class="pre">==</span> <span class="pre">int256(-1)</span></code></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>باقیمانده با صفر باعث <a class="reference internal" href="control-structures.html#assert-and-require"><span class="std std-ref">Panic error</span></a>  می‌شود. این بررسی از طریق <code class="docutils literal notranslate"><span class="pre">{</span> <span class="pre">...</span> <span class="pre">}unchecked</span></code> غیرفعال <strong>نمی‌شود</strong>.</p>
</div>
</section>
<section id="exponentiation">
<h4>به توان رساندن (Exponentiation)<a class="headerlink" href="#exponentiation" title="پیوند ثابت به این سر مقاله"></a></h4>
<p>به توان رساندن فقط برای انواع بدون علامت  در توان  در دسترس است. نوع توان در نتیجه همیشه با نوع پایه
برابر است. لطفاً توجه داشته باشید که به اندازه کافی بزرگ باشد تا بتواند نتیجه را حفظ کند و برای اعلان شکست
احتمالی یا رفتار پیچیده آماده شود.</p>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>در حالت بررسی شده ، توان فقط از آپکد  <code class="docutils literal notranslate"><span class="pre">exp</span></code> نسبتاً ارزان برای پایه‌های کوچک استفاده می‎کند. برای
موارد   <code class="docutils literal notranslate"><span class="pre">x**3</span></code> ، ممکن است عبارت  <code class="docutils literal notranslate"><span class="pre">x*x*x</span></code> ارزان تر باشد. در هر صورت، تست هزینه گَس و استفاده از
بهینه ساز توصیه می‌شود.</p>
</div>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>توجه داشته باشید که <code class="docutils literal notranslate"><span class="pre">0**0</span></code>  توسط EVM به صورت  <code class="docutils literal notranslate"><span class="pre">1</span></code> تعریف می‌شود.</p>
</div>
</section>
</section>
<section id="index-4">
<span id="id9"></span><h3>عدد ممیز ثابت<a class="headerlink" href="#index-4" title="پیوند ثابت به این سر مقاله"></a></h3>
<div class="admonition warning">
<p class="admonition-title">هشدار</p>
<p>عدد ممیز ثابت هنوز توسط سالیدیتی کاملاً پشتیبانی نمی‌شوند. می‌توان آن‌ها را مشخص کرد، اما نمی‌توان
آنها را به چیزی یا از چیزی اختصاص داد.</p>
</div>
<p><code class="docutils literal notranslate"><span class="pre">fixed</span></code> / <code class="docutils literal notranslate"><span class="pre">ufixed</span></code> : اعداد  ثابت بدون علامت و باعلامت دراندازه‌های مختلف. کلمات  کلیدی  <code class="docutils literal notranslate"><span class="pre">ufixedMxN</span></code> و  <code class="docutils literal notranslate"><span class="pre">fixedMxN</span></code> ، جایی که  <code class="docutils literal notranslate"><span class="pre">M</span></code> تعداد بیت‌های گرفته شده توسط نوع را نشان  می‌دهد و <code class="docutils literal notranslate"><span class="pre">N</span></code>  نشان دهنده تعداد اعشار در دسترس است. <code class="docutils literal notranslate"><span class="pre">M</span></code>  باید بر 8 قابل تقسیم باشد و از 8 به 256 بیت  تبدیل شود. <code class="docutils literal notranslate"><span class="pre">N</span></code> باید شامل 0 تا 80 باشد. <code class="docutils literal notranslate"><span class="pre">ufixed</span></code> و <code class="docutils literal notranslate"><span class="pre">fixed</span></code> به ترتیب نام‌های مستعار برای  <code class="docutils literal notranslate"><span class="pre">ufixed128x18</span></code> و  <code class="docutils literal notranslate"><span class="pre">fixed128x18</span></code> هستند.</p>
<p>عملگرها:</p>
<ul class="simple">
<li><p>مقایسه ها <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code> ، <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> ، <code class="docutils literal notranslate"><span class="pre">==</span></code> ، <code class="docutils literal notranslate"><span class="pre">!=</span></code> ، <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code> ، <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> (ارزیابی به  bool)</p></li>
<li><p>عملگرهای حسابی: <code class="docutils literal notranslate"><span class="pre">+</span></code> ، <code class="docutils literal notranslate"><span class="pre">-</span></code> ، <code class="docutils literal notranslate"><span class="pre">-</span></code> unary  ، <code class="docutils literal notranslate"><span class="pre">*</span></code> ، <code class="docutils literal notranslate"><span class="pre">/</span></code> ، <code class="docutils literal notranslate"><span class="pre">%</span></code> (باقیمانده)</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>تفاوت اصلی بین اعداد float ( <code class="docutils literal notranslate"><span class="pre">float</span></code> و <code class="docutils literal notranslate"><span class="pre">double</span></code> در بسیاری از زبانها، به طور دقیق‌تر اعداد IEEE 754) و عدد ممیز ثابت در این است که تعداد بیت‌های مورد استفاده برای عدد صحیح  و قسمت کسری  (قسمت بعد از نقطه اعشاری ) در قبل انعطاف پذیر است، در حالی که در  دومی به طور دقیقاً تعریف شده‌است. به طور کلی، در اعداد float تقریباً از کل فضا برای نشان دادن عدد  استفاده می‌شود، در حالی که فقط تعداد کمی بیت مکان نقطه اعشار را تعریف می‌کنند.</p>
</div>
</section>
<section id="address">
<span id="index-5"></span><span id="id10"></span><h3>آدرس<a class="headerlink" href="#address" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>نوع آدرس به دو صورت وجود دارد که تا حد زیادی یکسان هستند:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code>: دارای مقدار 20 بایت (اندازه آدرس اتریوم) است.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code>: همان  <code class="docutils literal notranslate"><span class="pre">address</span></code> است، اما با اعضای اضافی  <code class="docutils literal notranslate"><span class="pre">transfer</span></code> و   <code class="docutils literal notranslate"><span class="pre">send</span></code> .</p></li>
</ul>
<p>ایده پشت این تمایز این است که  <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code> آدرسی است که می‌توانید اتر را به آن بفرستید، در حالی که نمی‌توان با یک  <code class="docutils literal notranslate"><span class="pre">address</span></code> ساده اتر ارسال کرد.</p>
<p>تبدیل‌های نوع:</p>
<p>تبدیل‌های ضمنی از  <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code> به <code class="docutils literal notranslate"><span class="pre">address</span></code> مجاز است، در حالی که تبدیل از  <code class="docutils literal notranslate"><span class="pre">address</span></code> به  <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code> باید از طریق <code class="docutils literal notranslate"><span class="pre">payable(&lt;address&gt;)</span></code> صریح باشد.</p>
<p>تبدیل صریح به و از  <code class="docutils literal notranslate"><span class="pre">address</span></code> برای آدرس‌های  <code class="docutils literal notranslate"><span class="pre">uint160</span></code>، لیترال‌های عدد صحیح ، <code class="docutils literal notranslate"><span class="pre">bytes20</span></code> و انواع قرارداد مجاز است.</p>
<p>فقط عبارات نوع  <code class="docutils literal notranslate"><span class="pre">address</span></code> و نوع قرارداد را می توان از طریق تبدیل
صریح  <code class="docutils literal notranslate"><span class="pre">(...)payable</span></code> به  <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code> تبدیل کرد. برای نوع قرارداد، این تبدیل فقط در
صورتی مجاز است که قرارداد بتواند اتر را دریافت کند، به عنوان مثال، قرارداد تابع دریافت  یا  برگشتی قابل
پرداخت  داشته باشد. توجه داشته باشید که  <code class="docutils literal notranslate"><span class="pre">payable(0)</span></code> معتبر است و از این قاعده مستثنی است.</p>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>اگر به متغیر نوع  <code class="docutils literal notranslate"><span class="pre">address</span></code> نیاز دارید و قصد دارید اتر را برای آن ارسال کنید، نوع آن را به عنوان
آدرس  <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code> مشخص کنید تا این نیاز قابل مشاهده باشد. همچنین، سعی کنید این
تمایز یا تغییر را در اسرع وقت انجام دهید.</p>
</div>
<p>عملگرها:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code> و <code class="docutils literal notranslate"><span class="pre">&gt;</span></code></p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">هشدار</p>
<p>اگر نوعی را که از اندازه بایت بزرگتری استفاده می‌کند به  <code class="docutils literal notranslate"><span class="pre">address</span></code> تبدیل کنید، به عنوان مثال
<code class="docutils literal notranslate"><span class="pre">bytes32</span></code>  ، سپس به  <code class="docutils literal notranslate"><span class="pre">address</span></code> کوتاه می‌شود. برای کاهش ابهام تبدیل ورژن 0.4.24 و بالاتر
کامپایلر شما را مجبور به کوتاه کردن صریح در تبدیل می‌کند. به عنوان مثال مقدار 32 بایت
<code class="docutils literal notranslate"><span class="pre">0x111122223333444455556666777788889999AAAABBBBCCCCDDDDEEEEFFFFCCCC</span></code> را در نظر بگیرید.</p>
<p>می توانید از آدرس  <code class="docutils literal notranslate"><span class="pre">address(uint160(bytes20(b)))</span></code>  استفاده کنید که نتیجه آن
<code class="docutils literal notranslate"><span class="pre">0x111122223333444455556666777788889999aAaa</span></code> است، یا می‌توانید از آدرس
<code class="docutils literal notranslate"><span class="pre">address(uint160(uint256(b)))</span></code> استفاده کنید، که منجر به</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">0x777788889999AaAAbBbbCcccddDdeeeEfFFfCcCc</span></code> می‌شود .</p>
</div></blockquote>
</div>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>تمایز بین <code class="docutils literal notranslate"><span class="pre">address</span></code> و <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code> با ورژن 0.5.0 معرفی شده‌است. همچنین از آن
ورژن، قراردادها از نوع آدرس مشتق گرفته نمی‌شوند، اما اگر تابع  payable fallback یا receive
داشته باشند، هنوز میتوان به صورت صریح به <code class="docutils literal notranslate"><span class="pre">address</span></code> و <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code> تبدیل شوند.</p>
</div>
<section id="members-of-addresses">
<span id="id11"></span><h4>اعضای آدرس‌ها<a class="headerlink" href="#members-of-addresses" title="پیوند ثابت به این سر مقاله"></a></h4>
<p>برای مراجعه سریع به کلیه اعضای آدرس، به <a class="reference internal" href="units-and-global-variables.html#address-related"><span class="std std-ref">اعضای انواع آدرس</span></a> مراجعه کنید.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">balance</span></code> و  <code class="docutils literal notranslate"><span class="pre">transfer</span></code></p></li>
</ul>
<p>می‌توان با استفاده از ویژگی <code class="docutils literal notranslate"><span class="pre">balance</span></code> ، بالانس یک آدرس را جستوجو کرد و با استفاده از تابع  <code class="docutils literal notranslate"><span class="pre">transfer</span></code> اتر (در واحدهای وی ) را به یک آدرس قابل پرداخت  ارسال کرد:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=YWRkcmVzcyBwYXlhYmxlIHggPSBhZGRyZXNzKDB4MTIzKTsKYWRkcmVzcyBteUFkZHJlc3MgPSBhZGRyZXNzKHRoaXMpOwppZiAoeC5iYWxhbmNlIDwgMTAgJiYgbXlBZGRyZXNzLmJhbGFuY2UgPj0gMTApIHgudHJhbnNmZXIoMTApOw=="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">address</span><span class="w"> </span><span class="nv">payable</span><span class="w"> </span>x<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span><span class="mh">0x123</span><span class="p">);</span><span class="w"></span>
<span class="kt">address</span><span class="w"> </span><span class="nv">myAddress</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span><span class="kt">this</span><span class="p">);</span><span class="w"></span>
<span class="kt">if</span><span class="w"> </span><span class="p">(</span>x<span class="p">.</span>balance<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m m-Decimal">10</span><span class="w"> </span><span class="err">&amp;&amp;</span><span class="w"> </span>myAddress<span class="p">.</span>balance<span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m m-Decimal">10</span><span class="p">)</span><span class="w"> </span>x<span class="p">.</span>transfer<span class="p">(</span><span class="m m-Decimal">10</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>اگر بالانس قرارداد فعلی به اندازه کافی بزرگ نباشد یا انتقال اتر توسط حساب دریافت کننده رد شود، تابع
<code class="docutils literal notranslate"><span class="pre">transfer</span></code> از کار می‌افتد. تابع <code class="docutils literal notranslate"><span class="pre">transfer</span></code> در صورت شکست برمی‌گردد.</p>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>اگر <code class="docutils literal notranslate"><span class="pre">x</span></code>  یک آدرس قرارداد باشد، کد آن (به طور خاص تر: تابع <a class="reference internal" href="contracts.html#receive-ether-function"><span class="std std-ref">Receive Ether</span></a> در صورت وجود، یا در غیر
این صورت <a class="reference internal" href="contracts.html#fallback-function"><span class="std std-ref">تابع Fallback</span></a> در صورت وجود) همراه با فراخوانی <code class="docutils literal notranslate"><span class="pre">transfer</span></code> اجرا می‌شود (این ویژگی
EVM است و نمی‌توان جلوی آن را گرفت ) اگر گَس آن اجرا تمام شود یا به هر صورتی از کار بیفتد، انتقال اتر
برگردانده می‌شود و قرارداد جاری با استثنا متوقف می‌شود.</p>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">send</span></code></p></li>
</ul>
<p>Send نقطه مقابل سطح پایین  <code class="docutils literal notranslate"><span class="pre">transfer</span></code> است. در صورت عدم اجرا، قرارداد فعلی با استثنا متوقف نخواهد شد، اما <code class="docutils literal notranslate"><span class="pre">send</span></code>  مقدار  <code class="docutils literal notranslate"><span class="pre">false</span></code> را برمیگرداند.</p>
<div class="admonition warning">
<p class="admonition-title">هشدار</p>
<p>ستفاده از <code class="docutils literal notranslate"><span class="pre">send</span></code> خطرات زیادی دارد: اگر فراخوانی پشته عمق 1024 باشد (که همیشه می‌تواند توسط
فراخوانی کننده مجبور شود) انتقال شکست میخورد و اگر گَس گیرنده شما تمام شود نیز از کار می‌افتد. بنابراین
برای انجام مطمئن انتقال اتر، همیشه مقدار برگشتی <code class="docutils literal notranslate"><span class="pre">send</span></code> ، را با استفاده از   <code class="docutils literal notranslate"><span class="pre">transfer</span></code> کنید
یا حتی بهتراست که: از الگویی استفاده کنید که گیرنده پول را برداشت کند.</p>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">call</span></code> ، <code class="docutils literal notranslate"><span class="pre">delegatecall</span></code> و  <code class="docutils literal notranslate"><span class="pre">staticcall</span></code></p></li>
</ul>
<p>برای برقراری ارتباط با قراردادهایی که به ABI پایبند نیستند، یا برای گرفتن کنترل مستقیم‌تری بر روی رمزگذاری
، توابع  <code class="docutils literal notranslate"><span class="pre">call</span></code> ، <code class="docutils literal notranslate"><span class="pre">delegatecall</span></code> و  <code class="docutils literal notranslate"><span class="pre">staticcall</span></code> ارائه شده‌اند. همه آنها یک
پارامتر  <code class="docutils literal notranslate"><span class="pre">bytes</span> <span class="pre">memory</span></code> را می‌گیرند و شرایط موفقیت (به عنوان  <code class="docutils literal notranslate"><span class="pre">bool</span></code> ) و داده های برگشتی
(  <code class="docutils literal notranslate"><span class="pre">bytes</span> <span class="pre">memory</span></code> ) را برمی‌گردانند. از توابع <code class="docutils literal notranslate"><span class="pre">abi.encode</span></code> ،  <code class="docutils literal notranslate"><span class="pre">abi.encodePacked</span></code> ،
<code class="docutils literal notranslate"><span class="pre">abi.encodeWithSelector</span></code> و  <code class="docutils literal notranslate"><span class="pre">abi.encodeWithSignature</span></code> می‌توان برای
رمزگذاری داده‌های ساختار یافته  استفاده کرد.</p>
<p>مثال:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ynl0ZXMgbWVtb3J5IHBheWxvYWQgPSBhYmkuZW5jb2RlV2l0aFNpZ25hdHVyZSgicmVnaXN0ZXIoc3RyaW5nKSIsICJNeU5hbWUiKTsKKGJvb2wgc3VjY2VzcywgYnl0ZXMgbWVtb3J5IHJldHVybkRhdGEpID0gYWRkcmVzcyhuYW1lUmVnKS5jYWxsKHBheWxvYWQpOwpyZXF1aXJlKHN1Y2Nlc3MpOw=="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>payload<span class="w"> </span><span class="o">=</span><span class="w"> </span>abi<span class="p">.</span>encodeWithSignature<span class="p">(</span><span class="s2">&quot;register(string)&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;MyName&quot;</span><span class="p">);</span><span class="w"></span>
<span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="nv">success</span><span class="p">,</span><span class="w"> </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>returnData<span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span>nameReg<span class="p">).</span>call<span class="p">(</span>payload<span class="p">);</span><span class="w"></span>
<span class="kt">require</span><span class="p">(</span>success<span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">هشدار</p>
<p>همه این توابع، توابع سطح پایینی هستند و باید با احتیاط استفاده شوند. به طور خاص، هر قرارداد ناشناخته‌ای ممکن است مخرب باشد و در صورت تماس با آن، کنترل آن قرارداد را به شما واگذار می‌کند که می‌تواند به نوبه خود به قرارداد شما بازگردد، بنابراین در زمان بازگشت فراخوانی‌ها خود را برای تغییراتی که روی متغیرهای حالت شما اتفاق می‌افتد آماده کنید. روش متداول برای برقراری ارتباط با سایر قراردادها، فراخوانی یک تابع در یک شی قرارداد (<code class="docutils literal notranslate"><span class="pre">()x.f</span></code>) است.</p>
</div>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>ورژن های قبلی سالیدیتی به این توابع اجازه می‌دهد آرگومان‌های دلخواه را دریافت کنند و همچنین اولین آرگومان از نوع  <code class="docutils literal notranslate"><span class="pre">bytes4</span></code> را به گونه دیگری مدیریت کنند. این موارد در نسخه 0.5.0 حذف شده‌اند.</p>
</div>
<p>تنظیم گَس تامین شده با اصلاح کننده   <code class="docutils literal notranslate"><span class="pre">gas</span></code>  امکان پذیر است:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=YWRkcmVzcyhuYW1lUmVnKS5jYWxse2dhczogMTAwMDAwMH0oYWJpLmVuY29kZVdpdGhTaWduYXR1cmUoInJlZ2lzdGVyKHN0cmluZykiLCAiTXlOYW1lIikpOw=="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">address</span><span class="p">(</span>nameReg<span class="p">).</span>call<span class="p">{</span>gas<span class="p">:</span><span class="w"> </span><span class="m m-Decimal">1000000</span><span class="p">}(</span>abi<span class="p">.</span>encodeWithSignature<span class="p">(</span><span class="s2">&quot;register(string)&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;MyName&quot;</span><span class="p">));</span><span class="w"></span>
</pre></div>
</div>
<p>به طور مشابه، مقدار اتر عرضه شده نیز می‌تواند کنترل شود:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=YWRkcmVzcyhuYW1lUmVnKS5jYWxse3ZhbHVlOiAxIGV0aGVyfShhYmkuZW5jb2RlV2l0aFNpZ25hdHVyZSgicmVnaXN0ZXIoc3RyaW5nKSIsICJNeU5hbWUiKSk7"><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">address</span><span class="p">(</span>nameReg<span class="p">).</span>call<span class="p">{</span>value<span class="p">:</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="w"> </span>ether<span class="p">}(</span>abi<span class="p">.</span>encodeWithSignature<span class="p">(</span><span class="s2">&quot;register(string)&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;MyName&quot;</span><span class="p">));</span><span class="w"></span>
</pre></div>
</div>
<p>سرانجام، این اصلاح کننده‌ها می‌توانند ترکیب شوند. ترتیب آنها مهم نیست:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=YWRkcmVzcyhuYW1lUmVnKS5jYWxse2dhczogMTAwMDAwMCwgdmFsdWU6IDEgZXRoZXJ9KGFiaS5lbmNvZGVXaXRoU2lnbmF0dXJlKCJyZWdpc3RlcihzdHJpbmcpIiwgIk15TmFtZSIpKTs="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">address</span><span class="p">(</span>nameReg<span class="p">).</span>call<span class="p">{</span>gas<span class="p">:</span><span class="w"> </span><span class="m m-Decimal">1000000</span><span class="p">,</span><span class="w"> </span>value<span class="p">:</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="w"> </span>ether<span class="p">}(</span>abi<span class="p">.</span>encodeWithSignature<span class="p">(</span><span class="s2">&quot;register(string)&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;MyName&quot;</span><span class="p">));</span><span class="w"></span>
</pre></div>
</div>
<p>به روشی مشابه می‌توان از تابع  <code class="docutils literal notranslate"><span class="pre">delegatecall</span></code> استفاده کرد: تفاوت در این است که فقط از کد آدرس
داده شده استفاده می‌شود، تمام ‌جنبه‌های دیگر (storage ، balance ، ...) از قرارداد فعلی گرفته شده‌اند.
هدف از فراخوانی  <code class="docutils literal notranslate"><span class="pre">delegatecall</span></code> استفاده از کد کتابخانه است که در قرارداد دیگری ذخیره شده‌است.
کاربر باید اطمینان حاصل کند که ساختار storage در هر دو قرارداد برای استفاده از delegatecall  مناسب است.</p>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>قبل از homestead، فقط یک نوع محدود به نام <code class="docutils literal notranslate"><span class="pre">callcode</span></code> در دسترس بود که دسترسی به مقادیر
اولیه  <code class="docutils literal notranslate"><span class="pre">msg.sender</span></code> و  <code class="docutils literal notranslate"><span class="pre">msg.value</span></code> را فراهم نمی‌کرد. این تابع در نسخه 0.5.0 حذف شد.</p>
</div>
<p>از آنجا که  بیزانس <code class="docutils literal notranslate"><span class="pre">staticcall</span></code>  نیز می‌تواند مورد استفاده قرار گیرد. این اساساً همان <code class="docutils literal notranslate"><span class="pre">call</span></code> است، اما اگر تابع فراخوانی شده به هر طریقی حالت را تغییر دهد، برمی‌گردد.</p>
<p>هر سه تابع  <code class="docutils literal notranslate"><span class="pre">call</span></code> ،  <code class="docutils literal notranslate"><span class="pre">delegatecall</span></code> و <code class="docutils literal notranslate"><span class="pre">staticcall</span></code>  تابع‌های سطح پایینی هستند و فقط به عنوان <em>آخرین راه حل</em> باید از آنها استفاده شود زیرا باعث از بین رفتن ایمنی بودن نوع سالیدیتی می‌شوند.</p>
<p>گزینه  <code class="docutils literal notranslate"><span class="pre">gas</span></code> در هر سه روش موجود است، در حالی که گزینه  <code class="docutils literal notranslate"><span class="pre">value</span></code> برای  <code class="docutils literal notranslate"><span class="pre">delegatecall</span></code> پشتیبانی نمی‌شود.</p>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>بهتر است بدون توجه به اینکه آیا حالت از آن خوانده می شود یا روی آن نوشته شده است، از تکیه بر مقادیر گَس سخت رمزگذاری شده در کد قرارداد هوشمند خود جلوگیری کنید، زیرا این امر می تواند مشکلات زیادی را به همراه داشته باشد. همچنین، دسترسی به گَس ممکن است در آینده تغییر کند.</p>
</div>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>کلیه قراردادها را می‌توان به نوع  <code class="docutils literal notranslate"><span class="pre">address</span></code> تبدیل کرد، بنابراین می‌توان بالانس قرارداد فعلی را با استفاده از  <code class="docutils literal notranslate"><span class="pre">address(this).balance</span></code> جستوجو کرد.</p>
</div>
</section>
</section>
<section id="contract-types">
<span id="index-6"></span><span id="id12"></span><h3>انواع قرارداد<a class="headerlink" href="#contract-types" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>هر <a class="reference internal" href="contracts.html#contracts"><span class="std std-ref">قراردادی</span></a> نوع خاص خود را مشخص می‌کند. به طور ضمنی می‌توانید قراردادها را به قراردادهایی که از آنها به ارث می‌برند تبدیل کنید. قراردادها را می‌توان به طور صریح به نوع <code class="docutils literal notranslate"><span class="pre">address</span></code>   تبدیل و از آنها تغییر داد.</p>
<p>تبدیل صریح به نوع  <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code> فقط از آنجا امکان پذیر است که نوع قرارداد تابع برگشتی قابل دریافت یا پرداخت داشته باشد. تبدیل هنوز با استفاده از  <code class="docutils literal notranslate"><span class="pre">address(x)</span></code> انجام می‌شود. اگر نوع قرارداد تابع برگشت پذیر یا قابل پرداخت نباشد، تبدیل به  <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code> را می‌توان با استفاده از <code class="docutils literal notranslate"><span class="pre">payable(address(x))</span></code> انجام داد. در بخش مربوط به نوع <a class="reference internal" href="#address"><span class="std std-ref">آدرس</span></a> می‌توانید اطلاعات بیشتری کسب کنید.</p>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>قبل از ورژن 0.5.0، قراردادها مستقیماً از نوع آدرس نشأت می‌گرفتند و هیچ تفاوتی بین <code class="docutils literal notranslate"><span class="pre">address</span></code>  و  <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code> وجود نداشت.</p>
</div>
<p>اگر متغیر محلی را از نوع قرارداد  (<code class="docutils literal notranslate"><span class="pre">MyContract</span> <span class="pre">c</span></code>) مشخص کنید، می‌توانید توابع مربوط به آن قرارداد را فراخوانی کنید. مراقب باشید که آن را از جایی اختصاص دهید که همان نوع قرارداد باشد.</p>
<p>شما همچنین می‎توانید قراردادها را فوری (یعنی آنهایی که تازه ایجاد شده‌اند) قرار دهید. جزئیات بیشتر را می‌توانید در بخش <a class="reference internal" href="control-structures.html#creating-contracts"><span class="std std-ref">&quot;قرارداد از طریق new&quot;</span></a> پیدا کنید.</p>
<p>نمایش داده‌های یک قرارداد با نوع  <code class="docutils literal notranslate"><span class="pre">address</span></code> یکسان است و از این نوع در <a class="reference internal" href="abi-spec.html#abi"><span class="std std-ref">ABI</span></a> نیز استفاده می‌شود.
قراردادها از هیچ عملگری پشتیبانی نمی‌کنند.</p>
<p>اعضای انواع قرارداد، توابع خارجی قرارداد شامل هر متغیر حالت است که به عنوان  <code class="docutils literal notranslate"><span class="pre">public</span></code> مشخص شده‌است.</p>
<p>برای قرارداد  <code class="docutils literal notranslate"><span class="pre">C</span></code> می‌توانید از <code class="docutils literal notranslate"><span class="pre">type(C)</span></code>  برای دسترسی به <a class="reference internal" href="units-and-global-variables.html#meta-type"><span class="std std-ref">اطلاعات مربوط به تایپ</span></a> استفاده کنید.</p>
<p>آرایه‌های بایت با اندازه ثابت</p>
</section>
<section id="index-7">
<span id="id13"></span><h3>آرایه‌های بایت با اندازه ثابت<a class="headerlink" href="#index-7" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>مقدارهای مختلف <code class="docutils literal notranslate"><span class="pre">bytes32</span></code> ، ... ، <code class="docutils literal notranslate"><span class="pre">bytes3</span></code> ، <code class="docutils literal notranslate"><span class="pre">bytes2</span></code> ، <code class="docutils literal notranslate"><span class="pre">bytes1</span></code> توالی بایت را از یک تا 32 نگه می‌دارد.</p>
<p>عملگرها:</p>
<ul class="simple">
<li><p>Comparisons: <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">==</span></code>, <code class="docutils literal notranslate"><span class="pre">!=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> (evaluate to <code class="docutils literal notranslate"><span class="pre">bool</span></code>)</p></li>
<li><p>Bit operators: <code class="docutils literal notranslate"><span class="pre">&amp;</span></code>, <code class="docutils literal notranslate"><span class="pre">|</span></code>, <code class="docutils literal notranslate"><span class="pre">^</span></code> (bitwise exclusive or), <code class="docutils literal notranslate"><span class="pre">~</span></code> (bitwise negation)</p></li>
<li><p>Shift operators: <code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code> (left shift), <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> (right shift)</p></li>
<li><p>Index access: If <code class="docutils literal notranslate"><span class="pre">x</span></code> is of type <code class="docutils literal notranslate"><span class="pre">bytesI</span></code>, then <code class="docutils literal notranslate"><span class="pre">x[k]</span></code> for <code class="docutils literal notranslate"><span class="pre">0</span> <span class="pre">&lt;=</span> <span class="pre">k</span> <span class="pre">&lt;</span> <span class="pre">I</span></code> returns the <code class="docutils literal notranslate"><span class="pre">k</span></code> th byte (read-only).</p></li>
</ul>
<p>عملگر شیفت با نوع عدد صحیح بدون علامت به عنوان عملوند راست کار می‌کند (اما نوع عملوند سمت چپ را برمی‌گرداند)، که تعداد بیت های شیفت را نشان می‌دهد. جابجایی با نوع با علامت ، خطای کامپایل ایجاد می‌کند.</p>
<p>اعضا (Members):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">length.</span></code>  طول ثابت آرایه بایت را ارائه می‌دهد (فقط برای خواندن).</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>نوع  <code class="docutils literal notranslate"><span class="pre">bytes1[]</span></code> ، آرایه‌ای از بایت است. اما به دلیل قوانین لایه گذاری، 31 بایت فضا را برای هر عنصر هدر می‌دهد (به جز در storage). بهتر است به جای آن از نوع  <code class="docutils literal notranslate"><span class="pre">bytes</span></code> استفاده کنید.</p>
</div>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>قبل از ورژن 0.8.0 ،  <code class="docutils literal notranslate"><span class="pre">byte</span></code> یک نام مستعار برای <code class="docutils literal notranslate"><span class="pre">bytes1</span></code> بود.</p>
</div>
</section>
<section id="id14">
<h3>آرایه بایت با اندازه پویا<a class="headerlink" href="#id14" title="پیوند ثابت به این سر مقاله"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">bytes</span></code>:</p>
<blockquote>
<div><p>آرایه بایت در اندازه پویا، از نوع مقدار  نیست. به قسمت  <a class="reference internal" href="#arrays"><span class="std std-ref">آرایه‌ها</span></a> مراجعه کنید !</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">string</span></code>:</p>
<blockquote>
<div><p>رشته‌ای با کد UTF-8 به صورت پویا، به قسمت  <a class="reference internal" href="#arrays"><span class="std std-ref">آرایه‌ها</span></a> کنید. از نوع مقدار نیست!</p>
</div></blockquote>
</section>
<section id="address-literals">
<span id="index-8"></span><span id="id15"></span><h3>لیترال‌های Address<a class="headerlink" href="#address-literals" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>لیترال‌های هگزادسیمال که از تست checksum آدرس استفاده می‌کنند، به عنوان مثال
<code class="docutils literal notranslate"><span class="pre">0xdCad3a6d3569DF655070DEd06cb7A1b2Ccd1D3AF</span></code>  از نوع  <code class="docutils literal notranslate"><span class="pre">address</span></code> هستند.
لیترال‌های هگزادسیمال که دارای طول 39 تا 41 رقم هستند و از  تست checksum عبور نمی‌کنند، خطایی
ایجاد می‌کنند. برای حذف خطا می‌توانید (برای انواع عدد صحیح) یا (برای انواع bytesNN) صفرها را ضمیمه
کنید.</p>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>قالب  checksum آدرس مختلط در <a class="reference external" href="https://github.com/ethereum/EIPs/blob/master/EIPS/eip-55.md">EIP-55</a> تعریف شده است.</p>
</div>
</section>
<section id="rational-literals">
<span id="index-9"></span><span id="id16"></span><h3>لیترال‌های عدد گویا و صحیح<a class="headerlink" href="#rational-literals" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>لیترال‌های عدد صحیح  از توالی اعداد در محدوده 0-9 تشکیل می شوند. آنها به عنوان دیسیمال تفسیر می
شوند. به عنوان مثال  <code class="docutils literal notranslate"><span class="pre">69</span></code> به معنای شصت و نه است. لیترال‌های Octal در سالیدیتی وجود ندارند و صفرهای
قبل از عدد نامعتبر هستند.</p>
<p>لیترال‌های کسری دیسیمال توسط یک  <code class="docutils literal notranslate"><span class="pre">.</span></code> با حداقل یک عدد در یک طرف تشکیل می‌شوند. مثال‌ها
شامل <code class="docutils literal notranslate"><span class="pre">.1</span></code> ،  <code class="docutils literal notranslate"><span class="pre">1.</span></code> و  <code class="docutils literal notranslate"><span class="pre">1.3</span></code> است.</p>
<p>نشانه علمی نیز پشتیبانی می‌شود، جایی که پایه می‌تواند کسر داشته باشد و توان ‌تواند. برای مثال از
جمله  <code class="docutils literal notranslate"><span class="pre">2e10</span></code> ،  <code class="docutils literal notranslate"><span class="pre">-2e10</span></code> ،  <code class="docutils literal notranslate"><span class="pre">2e-10</span></code> ،  <code class="docutils literal notranslate"><span class="pre">2.5e1</span></code> .</p>
<p>// &#64;saracodic's comment:   <code class="docutils literal notranslate"><span class="pre">(2**800</span> <span class="pre">+</span> <span class="pre">1)</span> <span class="pre">-</span> <span class="pre">2**800</span></code> swapping in the above text</p>
<p>زیرخط‌ می‌تواند برای جدا کردن رقم از لیترال‌های عددی برای کمک به خوانایی استفاده شود. به عنوان مثال،
دسیمال <code class="docutils literal notranslate"><span class="pre">000_123</span></code> ، هگزادسیمال  <code class="docutils literal notranslate"><span class="pre">0x2eff_abde</span></code> ، نماد علمی دسیمال  <code class="docutils literal notranslate"><span class="pre">1_2e34_678</span></code> همه
معتبر هستند. زیرخط‌ تنها بین دو رقم مجاز است و تنها یک زیرخط متوالی مجاز است. هیچ معنایی سمنتیک
اضافی به لیترال‌ عددی  حاوی زیرخط اضافه نشده است.</p>
<p>// &#64;saracodic's comment:   <code class="docutils literal notranslate"><span class="pre">(2**800</span> <span class="pre">+</span> <span class="pre">1)</span> <span class="pre">-</span> <span class="pre">2**800</span></code> swapping in the above text</p>
<p>عبارات لیترال‌های عددی  دقت دلخواه را حفظ می‌کنند تا زمانی که به یک نوع غیرلیترالی تبدیل شوند (به عنوان
مثال استفاده از آنها همراه با یکدیگر با یک عبارت غیرلیترالی یا با تبدیل صریح). این بدان معناست که محاسبات
سرریز نمی‌شود و تقسیمات در عبارات لیترال عددی کوتاه نمی‌شوند.</p>
<p>به عنوان مثال،  <code class="docutils literal notranslate"><span class="pre">(2**800</span> <span class="pre">+</span> <span class="pre">1)</span> <span class="pre">-</span> <span class="pre">2**800</span></code> منجر به ثابت   <code class="docutils literal notranslate"><span class="pre">1</span></code>  (از نوع  <code class="docutils literal notranslate"><span class="pre">uint8</span></code> ) می‌شود گرچند
نتایج میانی حتی اندازه کلمه ماشین را فیت نمی‌کند. علاوه بر این،   <code class="docutils literal notranslate"><span class="pre">8</span> <span class="pre">*</span> <span class="pre">5.</span></code> منجر به عدد صحیح  4 (گرچند
در بین آنها غیر عدد صحیح استفاده می‌شود).</p>
<blockquote>
<div><p>// &#64;saracodic's comment:   <code class="docutils literal notranslate"><span class="pre">(2**800</span> <span class="pre">+</span> <span class="pre">1)</span> <span class="pre">-</span> <span class="pre">2**800</span></code> swapping in the above text</p>
</div></blockquote>
<p>هر عملگری که می‌تواند به عدد صحیح اعمال شود، تا زمانی که عملوند‌ها عدد صحیح باشند می تواند به لیترال‌های
عددی نیز اعمال شود. اگر هر یکی از این دو کسری باشند، عملیات بیت امکان پذیر نیست و نیز به توان رساندن
اگر توان کسری باشد (زیرا ممکن است منجر به یک عدد غیر گویا شوند) امکان پذیر نیست.</p>
<p>تعویض و به توان رساندن با اعداد لیترال  بطوریکه سمت چپ (یا پایه) عملوند و نوع عدد صحیح در سمت راست
به عنوان عملوند  (توان) همیشه در   <code class="docutils literal notranslate"><span class="pre">uint256</span></code> (برای لیترال‌های غیر منفی) یا  <code class="docutils literal notranslate"><span class="pre">int256</span></code> (برای لیترال‌های
منفی)، بدون توجه به نوع سمت راست عملوند (توان)، عمل می‌کند.</p>
<div class="admonition warning">
<p class="admonition-title">هشدار</p>
<p>تقسیم بر روی لیترال‌های عدد صحیح برای کوتاه کردن در سالیدیتی نسخه‌های قبلتر از نسخه 0.4.0 استفاده
میشد، اما اکنون به یک عدد گویا تبدیل می شود، برای مثال  <code class="docutils literal notranslate"><span class="pre">2</span> <span class="pre">/</span> <span class="pre">5</span></code>  برابر با <code class="docutils literal notranslate"><span class="pre">2</span></code> نیست بلکه برابر با <code class="docutils literal notranslate"><span class="pre">2.5</span></code> می‌باشد.</p>
</div>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<blockquote>
<div><p>سالیدیتی برای هر عدد گویا یک نوع لیترال عددی دارد. لیترال های عدد صحیح و لیترال‌های عدد گویا به انواع
لیترال‌های عدد تعلق دارند. علاوه بر این، تمام عبارات لیترال‌های عددی (یعنی عباراتی که فقط شامل
لیترال‌های عددی و عملگرها هستند) به انواع لیترال‌های عددی تعلق دارند. بنابراین عبارات لیترال عددی
<code class="docutils literal notranslate"><span class="pre">1+2</span></code>  و <code class="docutils literal notranslate"><span class="pre">2+1</span></code> هر دو متعلق به همان نوع لیترال عددی برای عدد گویا سه هستند.</p>
</div></blockquote>
<p>// &#64;saracodic's comment:   <code class="docutils literal notranslate"><span class="pre">2+1</span></code> swapping in the above text</p>
</div>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>عبارات لیترال عددی به محض استفاده با عبارات غیر لیترال به نوع غیر لیترال تبدیل می‌شوند. با نادیده گرفتن
انواع، مقدار عبارتی که به  <code class="docutils literal notranslate"><span class="pre">b</span></code> در زیر اختصاص داده شده به عنوان عدد صحیح ارزیابی می‌شود. از آنجا که  <code class="docutils literal notranslate"><span class="pre">a</span></code> از
نوع <code class="docutils literal notranslate"><span class="pre">uint128</span></code> است، عبارت <code class="docutils literal notranslate"><span class="pre">2.5</span> <span class="pre">+a</span></code> باید نوع مناسبی داشته باشد. از آنجا که نوع متداولی برای
نوع  <code class="docutils literal notranslate"><span class="pre">2.5</span></code> و  <code class="docutils literal notranslate"><span class="pre">uint128</span></code> وجود ندارد، کامپایلر سالیدیتی این کد را قبول نمی‌کند.</p>
</div>
<p>// &#64;saracodic's comment:  2.5+a swapping in the above text</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=dWludDEyOCBhID0gMTsKdWludDEyOCBiID0gMi41ICsgYSArIDAuNTs="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">uint128</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span><span class="w"></span>
<span class="kt">uint128</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">2</span><span class="p">.</span><span class="m m-Decimal">5</span><span class="w"> </span><span class="o">+</span><span class="w"> </span>a<span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">.</span><span class="m m-Decimal">5</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="string">
<span id="string-literals"></span><span id="index-10"></span><h3>لیترال‌های string و انواع<a class="headerlink" href="#string" title="پیوند ثابت به این سر مقاله"></a></h3>
<blockquote>
<div><p>لیترال‌های رشته‌ای با دو نقل قول يا تك نقل قولي نوشته مي‌شوند ( <code class="docutils literal notranslate"><span class="pre">&quot;foo&quot;</span></code>  يا  <code class="docutils literal notranslate"><span class="pre">'bar'</span></code> )، و همچنين
مي‌توانند به چند قسمت متوالي تقسيم شوند ( <code class="docutils literal notranslate"><span class="pre">&quot;foo&quot;</span> <span class="pre">&quot;bar&quot;</span></code>  معادل <code class="docutils literal notranslate"><span class="pre">&quot;foobar&quot;</span></code> است) که می‌تواند
هنگام کار با رشته‌های طولانی مفید باشد. آنها به مفهوم صفر انتهایی در C نیست.  <code class="docutils literal notranslate"><span class="pre">&quot;foo&quot;</span></code> نشانگر سه بایت
می‌باشد، نه چهار بایت.
همانند لیترال‌های عدد صحیح، نوع آنها نیز می‌تواند متفاوت باشد، اما در صورت متناسب بودن آنها به بایت‌های
<code class="docutils literal notranslate"><span class="pre">bytes1,</span> <span class="pre">…,</span> <span class="pre">bytes32</span></code> تبدیل می‌شوند، اگر متناسب باشند، به <code class="docutils literal notranslate"><span class="pre">bytes</span></code> و  <code class="docutils literal notranslate"><span class="pre">string</span></code> تبدیل می‌شوند.</p>
</div></blockquote>
<p>به عنوان مثال، با  b``bytes32 samevar = &quot;stringliteral&quot;``  لیترال  رشته‌ای وقتی به نوع <code class="docutils literal notranslate"><span class="pre">bytes32</span></code> اختصاص یابد به معنای بایت خام  تفسیر می‌شود.</p>
<blockquote>
<div><p>لیترال‌های رشته‌ای  فقط می‌توانند حاوی کارکترهای ASCII قابل چاپ باشند، این به معنای کارکترهای شامل و بین 0x1F .. 0x7E می‌باشند.</p>
</div></blockquote>
<p>علاوه بر این، لیترال‌های رشته‌ای  از کارکتر‌های escape زیر نیز پشتیبانی می‌کنند:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">\&lt;newline&gt;</span></code> (escapes an actual newline)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\\</span></code> (backslash)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\'</span></code> (single quote)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\&quot;</span></code> (double quote)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\n</span></code> (newline)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\r</span></code> (carriage return)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\t</span></code> (tab)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\xNN</span></code> (hex escape, see below)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">\uNNNN</span></code> (unicode escape, see below)</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">xNN\</span></code> یک مقدار hex می‌گیرد و بایت مناسب را وارد می‌کند، در حالی که  <code class="docutils literal notranslate"><span class="pre">uNNNN\</span></code> یک کد رمز Unicode را می‌گیرد و یک توالی UTF-8 را وارد می‌کند.</p>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>Until version 0.8.0 there were three additional escape sequences: <code class="docutils literal notranslate"><span class="pre">\b</span></code>, <code class="docutils literal notranslate"><span class="pre">\f</span></code> and <code class="docutils literal notranslate"><span class="pre">\v</span></code>.
They are commonly available in other languages but rarely needed in practice.
If you do need them, they can still be inserted via hexadecimal escapes, i.e. <code class="docutils literal notranslate"><span class="pre">\x08</span></code>, <code class="docutils literal notranslate"><span class="pre">\x0c</span></code>
and <code class="docutils literal notranslate"><span class="pre">\x0b</span></code>, respectively, just as any other ASCII character.</p>
</div>
<p>رشته در مثال زیر دارای طول ده بایت است. این کار با یک بایت خط جدید و به دنبال آن یک دو نقل قول، یک  تک نقل قول یک کاراکتر بک اسلش و سپس (بدون جدا کننده) توالی کاراکتر <code class="docutils literal notranslate"><span class="pre">abcdef</span></code> شروع می‌شود.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=IlxuXCJcJ1xcYWJjXApkZWYi"><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;\n\&quot;</span><span class="err">\&#39;\\</span>abc<span class="err">\</span><span class="w"></span>
def<span class="err">&quot;</span><span class="w"></span>
</pre></div>
</div>
<p>هر خاتمه دهنده خط Unicode که یک خط جدید نباشد (به عنوان مثال LF ، VF ، FF ، CR ، NEL ، LS ،
PS) برای خاتمه لیترال رشته در نظر گرفته می‌شود. Newline فقط در صورتی لیترال رشته را خاتمه می‌دهد
که قبل از آن  <code class="docutils literal notranslate"><span class="pre">\</span></code> وجود نداشته باشد.</p>
</section>
<section id="unicode">
<h3>لیترال‌های Unicode<a class="headerlink" href="#unicode" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>در حالی که لیترال‌های رشته‌ای منظم فقط می‌توانند حاوی ASCII باشند، لیترال‌های unicode - با پیشوند
کلمه کلیدی – <code class="docutils literal notranslate"><span class="pre">unicode</span></code> می‌توانند حاوی هر توالی معتبر UTF-8  باشند. آنها همچنین از همان توالی‌های
escape به عنوان لیترال‌های رشته منظم پشتیبانی می‌کنند.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=c3RyaW5nIG1lbW9yeSBhID0gdW5pY29kZSJIZWxsbyDwn5iDIjs="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">string</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>a<span class="w"> </span><span class="o">=</span><span class="w"> </span>unicode<span class="s2">&quot;Hello 😃&quot;</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="index-11">
<span id="id17"></span><h3>لیترال‌های هگزادسیمال<a class="headerlink" href="#index-11" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>لیترال‌های هگزادسیمال با پیشوند کلمه کلیدی  <code class="docutils literal notranslate"><span class="pre">hex</span></code> هستند،که با دو نقل قول يا تك نقل قولي محصور شده‌اند
( <code class="docutils literal notranslate"><span class="pre">hex&quot;001122FF&quot;</span></code>، <code class="docutils literal notranslate"><span class="pre">hex'0011_22_FF'</span></code> ). محتوای آنها باید ارقام هگزادسیمال باشد که به
صورت اختیاری می‌تواند از یک زیر خط به عنوان جدا کننده بین مرز بایت استفاده کند. مقدار لیترال، نمایش
دودویی توالی هگزادسیمال خواهد بود.</p>
<p>لیترال‌های مالتی هگزادسیمال جدا شده توسط فضای خالی به یک لیترال متصل
می‌شوند:  <code class="docutils literal notranslate"><span class="pre">hex&quot;00112233&quot;</span> <span class="pre">hex&quot;44556677&quot;</span></code> معادل با  <code class="docutils literal notranslate"><span class="pre">hex&quot;0011223344556677&quot;</span></code> است.</p>
<p>لیترال‌های هگزادسیمال مانند <a class="reference internal" href="#string-literals"><span class="std std-ref">لیترال‌های رشته‌ای</span></a> رفتار می‌کنند و محدودیت‌های تبدیل پذیری یکسانی دارند.</p>
</section>
<section id="enums">
<span id="index-12"></span><span id="id18"></span><h3>Enums<a class="headerlink" href="#enums" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>Enums یکی از راه‌های ایجاد یک نوع تعریف شده توسط کاربر در سالیدیتی می‌باشد. آنها به طور صریح قابل
تبدیل به انواع مختلف عدد صحیح هستند اما تبدیل ضمنی مجاز نیست. تبدیل صریح از عدد صحیح در زمان
اجرا بررسی می‌کند که مقدار در محدوده enum باشد و در غیر این صورت باعث ایجاد خطای <a class="reference internal" href="control-structures.html#assert-and-require"><span class="std std-ref">Panic error</span></a> می‌شود.
Enums حداقل به یک عضو نیاز دارد و مقدار پیش فرض آن هنگام اعلام اولین عضو است. Enums نمی‌تواند بیش از 256 عضو داشته باشد.</p>
<blockquote>
<div><p>نمایش داده‌ها همانند enum ها در C است: گزینه‌ها با مقادیر صحیح بدون علامت بعدی ارسال می‌شوند که از  <code class="docutils literal notranslate"><span class="pre">0</span></code> شروع می‌شوند.</p>
</div></blockquote>
<p>با استفاده از <code class="docutils literal notranslate"><span class="pre">type(NameOfEnum).min</span></code> و <code class="docutils literal notranslate"><span class="pre">type(NameOfEnum).max</span></code> می‌توانید
کوچکترین و به ترتیب بزرگترین مقدار عدد داده شده enum را دریافت کنید.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5IF4wLjguODsKCmNvbnRyYWN0IHRlc3QgewogICAgZW51bSBBY3Rpb25DaG9pY2VzIHsgR29MZWZ0LCBHb1JpZ2h0LCBHb1N0cmFpZ2h0LCBTaXRTdGlsbCB9CiAgICBBY3Rpb25DaG9pY2VzIGNob2ljZTsKICAgIEFjdGlvbkNob2ljZXMgY29uc3RhbnQgZGVmYXVsdENob2ljZSA9IEFjdGlvbkNob2ljZXMuR29TdHJhaWdodDsKCiAgICBmdW5jdGlvbiBzZXRHb1N0cmFpZ2h0KCkgcHVibGljIHsKICAgICAgICBjaG9pY2UgPSBBY3Rpb25DaG9pY2VzLkdvU3RyYWlnaHQ7CiAgICB9CgogICAgLy8gU2luY2UgZW51bSB0eXBlcyBhcmUgbm90IHBhcnQgb2YgdGhlIEFCSSwgdGhlIHNpZ25hdHVyZSBvZiAiZ2V0Q2hvaWNlIgogICAgLy8gd2lsbCBhdXRvbWF0aWNhbGx5IGJlIGNoYW5nZWQgdG8gImdldENob2ljZSgpIHJldHVybnMgKHVpbnQ4KSIKICAgIC8vIGZvciBhbGwgbWF0dGVycyBleHRlcm5hbCB0byBTb2xpZGl0eS4KICAgIGZ1bmN0aW9uIGdldENob2ljZSgpIHB1YmxpYyB2aWV3IHJldHVybnMgKEFjdGlvbkNob2ljZXMpIHsKICAgICAgICByZXR1cm4gY2hvaWNlOwogICAgfQoKICAgIGZ1bmN0aW9uIGdldERlZmF1bHRDaG9pY2UoKSBwdWJsaWMgcHVyZSByZXR1cm5zICh1aW50KSB7CiAgICAgICAgcmV0dXJuIHVpbnQoZGVmYXVsdENob2ljZSk7CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0TGFyZ2VzdFZhbHVlKCkgcHVibGljIHB1cmUgcmV0dXJucyAoQWN0aW9uQ2hvaWNlcykgewogICAgICAgIHJldHVybiB0eXBlKEFjdGlvbkNob2ljZXMpLm1heDsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRTbWFsbGVzdFZhbHVlKCkgcHVibGljIHB1cmUgcmV0dXJucyAoQWN0aW9uQ2hvaWNlcykgewogICAgICAgIHJldHVybiB0eXBlKEFjdGlvbkNob2ljZXMpLm1pbjsKICAgIH0KfQ=="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">^</span><span class="k">0.8.8</span><span class="p">;</span><span class="w"></span>

<span class="k">contract</span><span class="w"> </span><span class="ni">test</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">enum</span><span class="w"> </span><span class="nv">ActionChoices</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>GoLeft<span class="p">,</span><span class="w"> </span>GoRight<span class="p">,</span><span class="w"> </span>GoStraight<span class="p">,</span><span class="w"> </span>SitStill<span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span>ActionChoices<span class="w"> </span>choice<span class="p">;</span><span class="w"></span>
<span class="w">    </span>ActionChoices<span class="w"> </span><span class="kt">constant</span><span class="w"> </span>defaultChoice<span class="w"> </span><span class="o">=</span><span class="w"> </span>ActionChoices<span class="p">.</span>GoStraight<span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">setGoStraight</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span>choice<span class="w"> </span><span class="o">=</span><span class="w"> </span>ActionChoices<span class="p">.</span>GoStraight<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Since enum types are not part of the ABI, the signature of &quot;getChoice&quot;</span>
<span class="w">    </span><span class="c1">// will automatically be changed to &quot;getChoice() returns (uint8)&quot;</span>
<span class="w">    </span><span class="c1">// for all matters external to Solidity.</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">getChoice</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>ActionChoices<span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>choice<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">getDefaultChoice</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span><span class="kt">uint</span><span class="p">(</span>defaultChoice<span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">getLargestValue</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>ActionChoices<span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>type<span class="p">(</span>ActionChoices<span class="p">).</span>max<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">getSmallestValue</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>ActionChoices<span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>type<span class="p">(</span>ActionChoices<span class="p">).</span>min<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>Enums همچنین می‌تواند خارج از تعاریف قرارداد یا کتابخانه، در سطح فایل مشخص شوند.</p>
</div>
</section>
<section id="user-defined-value-types">
<span id="index-13"></span><span id="id19"></span><h3>User Defined Value Types<a class="headerlink" href="#user-defined-value-types" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>A user defined value type allows creating a zero cost abstraction over an elementary value type.
This is similar to an alias, but with stricter type requirements.</p>
<p>A user defined value type is defined using <code class="docutils literal notranslate"><span class="pre">type</span> <span class="pre">C</span> <span class="pre">is</span> <span class="pre">V</span></code>, where <code class="docutils literal notranslate"><span class="pre">C</span></code> is the name of the newly
introduced type and <code class="docutils literal notranslate"><span class="pre">V</span></code> has to be a built-in value type (the &quot;underlying type&quot;). The function
<code class="docutils literal notranslate"><span class="pre">C.wrap</span></code> is used to convert from the underlying type to the custom type. Similarly, the
function <code class="docutils literal notranslate"><span class="pre">C.unwrap</span></code> is used to convert from the custom type to the underlying type.</p>
<p>The type <code class="docutils literal notranslate"><span class="pre">C</span></code> does not have any operators or bound member functions. In particular, even the
operator <code class="docutils literal notranslate"><span class="pre">==</span></code> is not defined. Explicit and implicit conversions to and from other types are
disallowed.</p>
<p>The data-representation of values of such types are inherited from the underlying type
and the underlying type is also used in the ABI.</p>
<p>The following example illustrates a custom type <code class="docutils literal notranslate"><span class="pre">UFixed256x18</span></code> representing a decimal fixed point
type with 18 decimals and a minimal library to do arithmetic operations on the type.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5IF4wLjguODsKCi8vIFJlcHJlc2VudCBhIDE4IGRlY2ltYWwsIDI1NiBiaXQgd2lkZSBmaXhlZCBwb2ludCB0eXBlIHVzaW5nIGEgdXNlciBkZWZpbmVkIHZhbHVlIHR5cGUuCnR5cGUgVUZpeGVkMjU2eDE4IGlzIHVpbnQyNTY7CgovLy8gQSBtaW5pbWFsIGxpYnJhcnkgdG8gZG8gZml4ZWQgcG9pbnQgb3BlcmF0aW9ucyBvbiBVRml4ZWQyNTZ4MTguCmxpYnJhcnkgRml4ZWRNYXRoIHsKICAgIHVpbnQgY29uc3RhbnQgbXVsdGlwbGllciA9IDEwKioxODsKCiAgICAvLy8gQWRkcyB0d28gVUZpeGVkMjU2eDE4IG51bWJlcnMuIFJldmVydHMgb24gb3ZlcmZsb3csIHJlbHlpbmcgb24gY2hlY2tlZAogICAgLy8vIGFyaXRobWV0aWMgb24gdWludDI1Ni4KICAgIGZ1bmN0aW9uIGFkZChVRml4ZWQyNTZ4MTggYSwgVUZpeGVkMjU2eDE4IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAoVUZpeGVkMjU2eDE4KSB7CiAgICAgICAgcmV0dXJuIFVGaXhlZDI1NngxOC53cmFwKFVGaXhlZDI1NngxOC51bndyYXAoYSkgKyBVRml4ZWQyNTZ4MTgudW53cmFwKGIpKTsKICAgIH0KICAgIC8vLyBNdWx0aXBsaWVzIFVGaXhlZDI1NngxOCBhbmQgdWludDI1Ni4gUmV2ZXJ0cyBvbiBvdmVyZmxvdywgcmVseWluZyBvbiBjaGVja2VkCiAgICAvLy8gYXJpdGhtZXRpYyBvbiB1aW50MjU2LgogICAgZnVuY3Rpb24gbXVsKFVGaXhlZDI1NngxOCBhLCB1aW50MjU2IGIpIGludGVybmFsIHB1cmUgcmV0dXJucyAoVUZpeGVkMjU2eDE4KSB7CiAgICAgICAgcmV0dXJuIFVGaXhlZDI1NngxOC53cmFwKFVGaXhlZDI1NngxOC51bndyYXAoYSkgKiBiKTsKICAgIH0KICAgIC8vLyBUYWtlIHRoZSBmbG9vciBvZiBhIFVGaXhlZDI1NngxOCBudW1iZXIuCiAgICAvLy8gQHJldHVybiB0aGUgbGFyZ2VzdCBpbnRlZ2VyIHRoYXQgZG9lcyBub3QgZXhjZWVkIGBhYC4KICAgIGZ1bmN0aW9uIGZsb29yKFVGaXhlZDI1NngxOCBhKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQyNTYpIHsKICAgICAgICByZXR1cm4gVUZpeGVkMjU2eDE4LnVud3JhcChhKSAvIG11bHRpcGxpZXI7CiAgICB9CiAgICAvLy8gVHVybnMgYSB1aW50MjU2IGludG8gYSBVRml4ZWQyNTZ4MTggb2YgdGhlIHNhbWUgdmFsdWUuCiAgICAvLy8gUmV2ZXJ0cyBpZiB0aGUgaW50ZWdlciBpcyB0b28gbGFyZ2UuCiAgICBmdW5jdGlvbiB0b1VGaXhlZDI1NngxOCh1aW50MjU2IGEpIGludGVybmFsIHB1cmUgcmV0dXJucyAoVUZpeGVkMjU2eDE4KSB7CiAgICAgICAgcmV0dXJuIFVGaXhlZDI1NngxOC53cmFwKGEgKiBtdWx0aXBsaWVyKTsKICAgIH0KfQ=="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">^</span><span class="k">0.8.8</span><span class="p">;</span><span class="w"></span>

<span class="c1">// Represent a 18 decimal, 256 bit wide fixed point type using a user defined value type.</span>
type<span class="w"> </span>UFixed256x18<span class="w"> </span><span class="kt">is</span><span class="w"> </span><span class="kt">uint256</span><span class="p">;</span><span class="w"></span>

<span class="c1">/// A minimal library to do fixed point operations on UFixed256x18.</span>
<span class="kt">library</span><span class="w"> </span>FixedMath<span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="nv">constant</span><span class="w"> </span>multiplier<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">10</span><span class="o">**</span><span class="m m-Decimal">18</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">/// Adds two UFixed256x18 numbers. Reverts on overflow, relying on checked</span>
<span class="w">    </span><span class="c1">/// arithmetic on uint256.</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">add</span><span class="p">(</span>UFixed256x18<span class="w"> </span>a<span class="p">,</span><span class="w"> </span>UFixed256x18<span class="w"> </span>b<span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>UFixed256x18<span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>UFixed256x18<span class="p">.</span>wrap<span class="p">(</span>UFixed256x18<span class="p">.</span>unwrap<span class="p">(</span>a<span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span>UFixed256x18<span class="p">.</span>unwrap<span class="p">(</span>b<span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="c1">/// Multiplies UFixed256x18 and uint256. Reverts on overflow, relying on checked</span>
<span class="w">    </span><span class="c1">/// arithmetic on uint256.</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">mul</span><span class="p">(</span>UFixed256x18<span class="w"> </span>a<span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">b</span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>UFixed256x18<span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>UFixed256x18<span class="p">.</span>wrap<span class="p">(</span>UFixed256x18<span class="p">.</span>unwrap<span class="p">(</span>a<span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span>b<span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="c1">/// Take the floor of a UFixed256x18 number.</span>
<span class="w">    </span><span class="c1">/// @return the largest integer that does not exceed `a`.</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">floor</span><span class="p">(</span>UFixed256x18<span class="w"> </span>a<span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint256</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>UFixed256x18<span class="p">.</span>unwrap<span class="p">(</span>a<span class="p">)</span><span class="w"> </span><span class="o">/</span><span class="w"> </span>multiplier<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="c1">/// Turns a uint256 into a UFixed256x18 of the same value.</span>
<span class="w">    </span><span class="c1">/// Reverts if the integer is too large.</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">toUFixed256x18</span><span class="p">(</span><span class="kt">uint256</span><span class="w"> </span><span class="nv">a</span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>UFixed256x18<span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>UFixed256x18<span class="p">.</span>wrap<span class="p">(</span>a<span class="w"> </span><span class="o">*</span><span class="w"> </span>multiplier<span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>توجه داشته باشید که چگونه <code class="docutils literal notranslate"><span class="pre">UFixed256x18.wrap</span></code> و <code class="docutils literal notranslate"><span class="pre">FixedMath.toUFixed256x18</span></code> دارای امضای یکسان
هستند اما دو عملیات بسیار متفاوت را انجام می‌دهند: تابع <code class="docutils literal notranslate"><span class="pre">UFixed256x18.wrap</span></code> یک <code class="docutils literal notranslate"><span class="pre">UFixed256x18</span></code> را برمی‌گرداند
که نمایش داده مشابه با ورودی دارد، در حالی که <code class="docutils literal notranslate"><span class="pre">toUFixed256x18</span></code> یک <code class="docutils literal notranslate"><span class="pre">UFixed256x18</span></code> را برمی‌گرداند که مقدار
عددی یکسانی دارد.</p>
</section>
<section id="function-types">
<span id="index-14"></span><span id="id20"></span><h3>انواع توابع(Function Types)<a class="headerlink" href="#function-types" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>انواع توابع انواعی از توابع هستند. متغیرهای نوع تابع را می‌توان از توابع اختصاص داد و پارامترهای تابع نوع تابع
را می‌توان برای انتقال توابع به توابع برگشتی و از فراخوانی‌های تابع استفاده کرد. انواع توابع به دو صورت هستند–
توابع <em>داخلی</em> و <em>خارجی</em>:</p>
<p>توابع داخلی را فقط می‌توان در داخل قرارداد فعلی فراخوانی کرد (به طور خاص، در داخل واحد کد فعلی، که
شامل توابع کتابخانه داخلی و توابع وراثتی نیز می‌شود) زیرا نمی‌توانند خارج از متن قرارداد فعلی اجرا شوند.
فراخوانی یک تابع داخلی با پرش به برچسب ورودی آن انجام می‌شود، دقیقاً مانند هنگام فراخوانی داخلی توابع
قرارداد فعلی.</p>
<blockquote>
<div><p>توابع خارجی شامل یک آدرس و یک امضای تابع می‌باشند و می‌توان آنها را از طریق فراخوانی‌های تابع خارجی منتقل کرد و از آنها بازگرداند.</p>
<p>انواع توابع به شرح زیر ذکر شده‌است:</p>
</div></blockquote>
<p>Function types are notated as follows:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=ZnVuY3Rpb24gKDxwYXJhbWV0ZXIgdHlwZXM+KSB7aW50ZXJuYWx8ZXh0ZXJuYWx9IFtwdXJlfHZpZXd8cGF5YWJsZV0gW3JldHVybnMgKDxyZXR1cm4gdHlwZXM+KV0="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">function</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;</span>parameter<span class="w"> </span>types<span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="kt">internal</span><span class="err">|</span><span class="kt">external</span><span class="p">}</span><span class="w"> </span><span class="p">[</span>pure<span class="err">|</span>view<span class="err">|</span><span class="kt">payable</span><span class="p">]</span><span class="w"> </span><span class="p">[</span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="o">&lt;</span><span class="kt">return</span><span class="w"> </span>types<span class="o">&gt;</span><span class="p">)]</span><span class="w"></span>
</pre></div>
</div>
<p>در مقابل انواع پارامترها، انواع بازگشت نمی‌توانند خالی باشند - اگر نوع عملکرد نباید چیزی را برگرداند، کل
قسمت  <code class="docutils literal notranslate"><span class="pre">returns</span> <span class="pre">(&lt;return</span> <span class="pre">types&gt;)</span></code>  باید حذف شود. به طور پیش فرض، انواع عملکردها داخلی
هستند، بنابراین می‌توان کلمه کلیدی داخلی را حذف کرد. توجه داشته باشید که این فقط در انواع توابع اعمال
می‌شود. قابلیت مشاهده به طور صریح برای توابع تعریف شده در قراردادها مشخص می‌شود، آنها پیش فرض ندارند.</p>
<p>به طور پیش فرض، انواع توابع داخلی هستند، بنابراین می‌توان کلمه کلیدی <code class="docutils literal notranslate"><span class="pre">internal</span></code> را حذف کرد. توجه
داشته باشید که این فقط در انواع توابع اعمال می‌شود. قابلیت مشاهده به طور صریح برای توابع تعریف شده در
قراردادها مشخص می‌شود، آنها پیش فرض ندارند.</p>
<p>تبدیل‌ها:</p>
<p>یک تابع نوع  <code class="docutils literal notranslate"><span class="pre">A</span></code> به طور ضمنی قابل تبدیل به یک تابع نوع  <code class="docutils literal notranslate"><span class="pre">B</span></code> است اگر و فقط اگر انواع پارامترهای آنها یکسان
باشد، انواع بازگشت آنها یکسان، ویژگی internal/external آنها یکسان باشد و تغییرپذیری حالت  <code class="docutils literal notranslate"><span class="pre">A</span></code> محدود
کننده‌تر از تغییر پذیری حالت  <code class="docutils literal notranslate"><span class="pre">B</span></code> . به خصوص:</p>
<ul class="simple">
<li><p>توابع <code class="docutils literal notranslate"><span class="pre">pure</span></code> را می‌توان به  <code class="docutils literal notranslate"><span class="pre">view</span></code> و توابع  <code class="docutils literal notranslate"><span class="pre">non-payable</span></code> تبدیل کرد</p></li>
<li><p>توابع  <code class="docutils literal notranslate"><span class="pre">view</span></code> را می‌توان به توابع  <code class="docutils literal notranslate"><span class="pre">non-payable</span></code> پرداخت تبدیل کرد</p></li>
<li><p>توابع  <code class="docutils literal notranslate"><span class="pre">payable</span></code> را می‌توان به توابع  <code class="docutils literal notranslate"><span class="pre">non-payable</span></code> پرداخت تبدیل کرد</p></li>
</ul>
<p>هیچ تبدیل دیگری بین انواع توابع امکان پذیر نیست.</p>
<blockquote>
<div><p>قانون مربوط به  <code class="docutils literal notranslate"><span class="pre">payable</span></code> و   <code class="docutils literal notranslate"><span class="pre">non-payable</span></code> ممکن است کمی گیج کننده باشد، اما در اصل، اگر
تابعی  <code class="docutils literal notranslate"><span class="pre">payable</span></code> باشد، این بدان معناست که پرداخت صفر اتر را نیز می‌پذیرد، بنابراین  <code class="docutils literal notranslate"><span class="pre">non-payable</span></code> نیز می‌باشد. از طرف دیگر، یک تابع  <code class="docutils literal notranslate"><span class="pre">non-payable</span></code> اتر ارسال شده به آن را رد می‌کند،
بنابراین توابع  <code class="docutils literal notranslate"><span class="pre">non-payable</span></code> نمی‌توانند به توابع  <code class="docutils literal notranslate"><span class="pre">payable</span></code> تبدیل شوند.</p>
</div></blockquote>
<p>اگر یک متغیر از نوع تابع مقداردهی اولیه نشده باشد، فراخوانی آن منجر به خطای <a class="reference internal" href="control-structures.html#assert-and-require"><span class="std std-ref">Panic error</span></a> می‌شود. اگر پس از
استفاده از  <code class="docutils literal notranslate"><span class="pre">delete</span></code> تابع آن را فراخوانی کنید، همین اتفاق می‌افتد.</p>
<p>اگر از انواع توابع external خارج از زمینه سالیدیتی استفاده شود، با آنها به عنوان نوع  <code class="docutils literal notranslate"><span class="pre">function</span></code> رفتار
می‌شود، که آدرس و به دنبال آن شناسه تابع را با هم در یک تک نوع  <code class="docutils literal notranslate"><span class="pre">bytes24</span></code> رمزگذاری می‌کند.</p>
<p>توجه داشته باشید که توابع عمومی قرارداد جاری می‌توانند هم به عنوان تابع داخلی و هم به عنوان تابع خارجی
استفاده شود. برای استفاده از  <code class="docutils literal notranslate"><span class="pre">f</span></code> به عنوان یک تابع داخلی ، فقط از  <code class="docutils literal notranslate"><span class="pre">f</span></code> استفاده کنید، اگر می‌خواهید از فرم
خارجی آن استفاده کنید، از  <code class="docutils literal notranslate"><span class="pre">this.f</span></code> استفاده کنید.</p>
<p>یک تابع از یک نوع داخلی را می‌توان به یک متغیر از یک نوع تابع داخلی بدون در نظر گرفتن مکان تعریف شده
اختصاص داد. این شامل توابع خصوصی، داخلی و عمومی قراردادها و کتابخانه‌ها و همچنین توابع رایگان است. از
طرف دیگر، انواع توابع خارجی فقط با توابع قرارداد عمومی و خارجی سازگار هستند. کتابخانه‌ها از این مستثنی
هستند چونکه به یک <code class="docutils literal notranslate"><span class="pre">delegatecall</span></code> نیاز دارند و <a class="reference internal" href="contracts.html#library-selectors"><span class="std std-ref">از یک کنوانسیون  مختلف ABI برای انتخابگرهای خود</span></a>
استفاده می‌کنند. توابع اعلام شده در رابط‌ها تعریفی ندارند، بنابراین اشاره به آنها نیز معنی ندارد.</p>
<p>اعضا:</p>
<p>توابع خارجی (یا عمومی) اعضای زیر را دارند:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">address.</span></code> آدرس قرارداد تابع را برمی‌گرداند.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">selector.</span></code>  <a class="reference internal" href="abi-spec.html#abi-function-selector"><span class="std std-ref">انتخابگر تابع ABI</span></a> را برمی‌گرداند.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>توابع خارجی (یا عمومی) برای داشتن اعضای اضافی  <code class="docutils literal notranslate"><span class="pre">gas(uint).</span></code> و  <code class="docutils literal notranslate"><span class="pre">value(uint).</span></code> استفاده
می‌شود. اینها در سالیدیتی نسخه 0.6.2 منسوخ شده و در سالیدیتی نسخه 0.7.0 حذف شدند. در عوض
از  <code class="docutils literal notranslate"><span class="pre">{...:gas</span> <span class="pre">}</span></code> و  <code class="docutils literal notranslate"><span class="pre">{...:value}</span></code>  برای تعیین مقدار گَس یا مقدار wei ارسال شده به یک
تابع استفاده کنید. برای اطلاعات بیشتر به قسمت <a class="reference internal" href="control-structures.html#external-function-calls"><span class="std std-ref">فراخوانی تابع خارجی</span></a> مراجعه کنید.</p>
</div>
<p>مثالی که نحوه استفاده از اعضا را نشان می‌دهد:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC42LjQgPDAuOS4wOwoKY29udHJhY3QgRXhhbXBsZSB7CiAgICBmdW5jdGlvbiBmKCkgcHVibGljIHBheWFibGUgcmV0dXJucyAoYnl0ZXM0KSB7CiAgICAgICAgYXNzZXJ0KHRoaXMuZi5hZGRyZXNzID09IGFkZHJlc3ModGhpcykpOwogICAgICAgIHJldHVybiB0aGlzLmYuc2VsZWN0b3I7CiAgICB9CgogICAgZnVuY3Rpb24gZygpIHB1YmxpYyB7CiAgICAgICAgdGhpcy5me2dhczogMTAsIHZhbHVlOiA4MDB9KCk7CiAgICB9Cn0="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.6.4</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span><span class="w"></span>

<span class="k">contract</span><span class="w"> </span><span class="ni">Example</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">payable</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span>bytes4<span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span>assert<span class="p">(</span><span class="kt">this</span><span class="p">.</span>f<span class="p">.</span><span class="kt">address</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span><span class="kt">this</span><span class="p">));</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span><span class="kt">this</span><span class="p">.</span>f<span class="p">.</span>selector<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">g</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">this</span><span class="p">.</span>f<span class="p">{</span>gas<span class="p">:</span><span class="w"> </span><span class="m m-Decimal">10</span><span class="p">,</span><span class="w"> </span>value<span class="p">:</span><span class="w"> </span><span class="m m-Decimal">800</span><span class="p">}();</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>مثالی که نحوه استفاده از انواع توابع داخلی را نشان می‌دهد:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC40LjE2IDwwLjkuMDsKCmxpYnJhcnkgQXJyYXlVdGlscyB7CiAgICAvLyBpbnRlcm5hbCBmdW5jdGlvbnMgY2FuIGJlIHVzZWQgaW4gaW50ZXJuYWwgbGlicmFyeSBmdW5jdGlvbnMgYmVjYXVzZQogICAgLy8gdGhleSB3aWxsIGJlIHBhcnQgb2YgdGhlIHNhbWUgY29kZSBjb250ZXh0CiAgICBmdW5jdGlvbiBtYXAodWludFtdIG1lbW9yeSBzZWxmLCBmdW5jdGlvbiAodWludCkgcHVyZSByZXR1cm5zICh1aW50KSBmKQogICAgICAgIGludGVybmFsCiAgICAgICAgcHVyZQogICAgICAgIHJldHVybnMgKHVpbnRbXSBtZW1vcnkgcikKICAgIHsKICAgICAgICByID0gbmV3IHVpbnRbXShzZWxmLmxlbmd0aCk7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgc2VsZi5sZW5ndGg7IGkrKykgewogICAgICAgICAgICByW2ldID0gZihzZWxmW2ldKTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gcmVkdWNlKAogICAgICAgIHVpbnRbXSBtZW1vcnkgc2VsZiwKICAgICAgICBmdW5jdGlvbiAodWludCwgdWludCkgcHVyZSByZXR1cm5zICh1aW50KSBmCiAgICApCiAgICAgICAgaW50ZXJuYWwKICAgICAgICBwdXJlCiAgICAgICAgcmV0dXJucyAodWludCByKQogICAgewogICAgICAgIHIgPSBzZWxmWzBdOwogICAgICAgIGZvciAodWludCBpID0gMTsgaSA8IHNlbGYubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgciA9IGYociwgc2VsZltpXSk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIHJhbmdlKHVpbnQgbGVuZ3RoKSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnRbXSBtZW1vcnkgcikgewogICAgICAgIHIgPSBuZXcgdWludFtdKGxlbmd0aCk7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgci5sZW5ndGg7IGkrKykgewogICAgICAgICAgICByW2ldID0gaTsKICAgICAgICB9CiAgICB9Cn0KCgpjb250cmFjdCBQeXJhbWlkIHsKICAgIHVzaW5nIEFycmF5VXRpbHMgZm9yICo7CgogICAgZnVuY3Rpb24gcHlyYW1pZCh1aW50IGwpIHB1YmxpYyBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4gQXJyYXlVdGlscy5yYW5nZShsKS5tYXAoc3F1YXJlKS5yZWR1Y2Uoc3VtKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzcXVhcmUodWludCB4KSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4geCAqIHg7CiAgICB9CgogICAgZnVuY3Rpb24gc3VtKHVpbnQgeCwgdWludCB5KSBpbnRlcm5hbCBwdXJlIHJldHVybnMgKHVpbnQpIHsKICAgICAgICByZXR1cm4geCArIHk7CiAgICB9Cn0="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.4.16</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span><span class="w"></span>

<span class="kt">library</span><span class="w"> </span>ArrayUtils<span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// internal functions can be used in internal library functions because</span>
<span class="w">    </span><span class="c1">// they will be part of the same code context</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">map</span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>self<span class="p">,</span><span class="w"> </span><span class="kt">function</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span>f<span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="kt">internal</span><span class="w"></span>
<span class="w">        </span>pure<span class="w"></span>
<span class="w">        </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>r<span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span>r<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">uint</span><span class="p">[](</span>self<span class="p">.</span>length<span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="kt">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>self<span class="p">.</span>length<span class="p">;</span><span class="w"> </span>i<span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span>r<span class="p">[</span>i<span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>f<span class="p">(</span>self<span class="p">[</span>i<span class="p">]);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">reduce</span><span class="p">(</span><span class="w"></span>
<span class="w">        </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>self<span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="kt">function</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span>f<span class="w"></span>
<span class="w">    </span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="kt">internal</span><span class="w"></span>
<span class="w">        </span>pure<span class="w"></span>
<span class="w">        </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">r</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span>r<span class="w"> </span><span class="o">=</span><span class="w"> </span>self<span class="p">[</span><span class="m m-Decimal">0</span><span class="p">];</span><span class="w"></span>
<span class="w">        </span><span class="kt">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>self<span class="p">.</span>length<span class="p">;</span><span class="w"> </span>i<span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span>r<span class="w"> </span><span class="o">=</span><span class="w"> </span>f<span class="p">(</span>r<span class="p">,</span><span class="w"> </span>self<span class="p">[</span>i<span class="p">]);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">range</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">length</span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>r<span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span>r<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">uint</span><span class="p">[](</span>length<span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="kt">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>r<span class="p">.</span>length<span class="p">;</span><span class="w"> </span>i<span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span>r<span class="p">[</span>i<span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>i<span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="k">contract</span><span class="w"> </span><span class="ni">Pyramid</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span>using<span class="w"> </span>ArrayUtils<span class="w"> </span><span class="kt">for</span><span class="w"> </span><span class="o">*</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">pyramid</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">l</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>ArrayUtils<span class="p">.</span>range<span class="p">(</span>l<span class="p">).</span>map<span class="p">(</span>square<span class="p">).</span>reduce<span class="p">(</span>sum<span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">square</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">x</span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>x<span class="w"> </span><span class="o">*</span><span class="w"> </span>x<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">sum</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">x</span><span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">y</span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>x<span class="w"> </span><span class="o">+</span><span class="w"> </span>y<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>مثال دیگری که از انواع توابع خارجی استفاده می‌کند:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC40LjIyIDwwLjkuMDsKCgpjb250cmFjdCBPcmFjbGUgewogICAgc3RydWN0IFJlcXVlc3QgewogICAgICAgIGJ5dGVzIGRhdGE7CiAgICAgICAgZnVuY3Rpb24odWludCkgZXh0ZXJuYWwgY2FsbGJhY2s7CiAgICB9CgogICAgUmVxdWVzdFtdIHByaXZhdGUgcmVxdWVzdHM7CiAgICBldmVudCBOZXdSZXF1ZXN0KHVpbnQpOwoKICAgIGZ1bmN0aW9uIHF1ZXJ5KGJ5dGVzIG1lbW9yeSBkYXRhLCBmdW5jdGlvbih1aW50KSBleHRlcm5hbCBjYWxsYmFjaykgcHVibGljIHsKICAgICAgICByZXF1ZXN0cy5wdXNoKFJlcXVlc3QoZGF0YSwgY2FsbGJhY2spKTsKICAgICAgICBlbWl0IE5ld1JlcXVlc3QocmVxdWVzdHMubGVuZ3RoIC0gMSk7CiAgICB9CgogICAgZnVuY3Rpb24gcmVwbHkodWludCByZXF1ZXN0SUQsIHVpbnQgcmVzcG9uc2UpIHB1YmxpYyB7CiAgICAgICAgLy8gSGVyZSBnb2VzIHRoZSBjaGVjayB0aGF0IHRoZSByZXBseSBjb21lcyBmcm9tIGEgdHJ1c3RlZCBzb3VyY2UKICAgICAgICByZXF1ZXN0c1tyZXF1ZXN0SURdLmNhbGxiYWNrKHJlc3BvbnNlKTsKICAgIH0KfQoKCmNvbnRyYWN0IE9yYWNsZVVzZXIgewogICAgT3JhY2xlIGNvbnN0YW50IHByaXZhdGUgT1JBQ0xFX0NPTlNUID0gT3JhY2xlKGFkZHJlc3MoMHgwMDAwMDAwMDIxOWFiNTQwMzU2Y0JCODM5Q2JlMDUzMDNkNzcwNUZhKSk7IC8vIGtub3duIGNvbnRyYWN0CiAgICB1aW50IHByaXZhdGUgZXhjaGFuZ2VSYXRlOwoKICAgIGZ1bmN0aW9uIGJ1eVNvbWV0aGluZygpIHB1YmxpYyB7CiAgICAgICAgT1JBQ0xFX0NPTlNULnF1ZXJ5KCJVU0QiLCB0aGlzLm9yYWNsZVJlc3BvbnNlKTsKICAgIH0KCiAgICBmdW5jdGlvbiBvcmFjbGVSZXNwb25zZSh1aW50IHJlc3BvbnNlKSBwdWJsaWMgewogICAgICAgIHJlcXVpcmUoCiAgICAgICAgICAgIG1zZy5zZW5kZXIgPT0gYWRkcmVzcyhPUkFDTEVfQ09OU1QpLAogICAgICAgICAgICAiT25seSBvcmFjbGUgY2FuIGNhbGwgdGhpcy4iCiAgICAgICAgKTsKICAgICAgICBleGNoYW5nZVJhdGUgPSByZXNwb25zZTsKICAgIH0KfQ=="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.4.22</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span><span class="w"></span>


<span class="k">contract</span><span class="w"> </span><span class="ni">Oracle</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">struct</span><span class="w"> </span><span class="nv">Request</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">data</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">function</span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>callback<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span>Request<span class="p">[]</span><span class="w"> </span><span class="kt">private</span><span class="w"> </span>requests<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">event</span><span class="w"> </span><span class="nv">NewRequest</span><span class="p">(</span><span class="kt">uint</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">query</span><span class="p">(</span><span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>data<span class="p">,</span><span class="w"> </span><span class="kt">function</span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span>callback<span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span>requests<span class="p">.</span>push<span class="p">(</span>Request<span class="p">(</span>data<span class="p">,</span><span class="w"> </span>callback<span class="p">));</span><span class="w"></span>
<span class="w">        </span>emit<span class="w"> </span>NewRequest<span class="p">(</span>requests<span class="p">.</span>length<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">reply</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">requestID</span><span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">response</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Here goes the check that the reply comes from a trusted source</span>
<span class="w">        </span>requests<span class="p">[</span>requestID<span class="p">].</span>callback<span class="p">(</span>response<span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>


<span class="k">contract</span><span class="w"> </span><span class="ni">OracleUser</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span>Oracle<span class="w"> </span><span class="kt">constant</span><span class="w"> </span><span class="kt">private</span><span class="w"> </span>ORACLE_CONST<span class="w"> </span><span class="o">=</span><span class="w"> </span>Oracle<span class="p">(</span><span class="kt">address</span><span class="p">(</span><span class="mh">0x00000000219ab540356cBB839Cbe05303d7705Fa</span><span class="p">));</span><span class="w"> </span><span class="c1">// known contract</span>
<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="k">private </span><span class="nv">exchangeRate</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">buySomething</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span>ORACLE_CONST<span class="p">.</span>query<span class="p">(</span><span class="s2">&quot;USD&quot;</span><span class="p">,</span><span class="w"> </span><span class="kt">this</span><span class="p">.</span>oracleResponse<span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">oracleResponse</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">response</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span><span class="w"></span>
<span class="w">            </span><span class="k">msg.sender</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span>ORACLE_CONST<span class="p">),</span><span class="w"></span>
<span class="w">            </span><span class="s2">&quot;Only oracle can call this.&quot;</span><span class="w"></span>
<span class="w">        </span><span class="p">);</span><span class="w"></span>
<span class="w">        </span>exchangeRate<span class="w"> </span><span class="o">=</span><span class="w"> </span>response<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>توابع Lambda یا inline برنامه ریزی شده‌اند اما هنوز پشتیبانی نمی‌شوند.</p>
</div>
</section>
</section>
<section id="reference-types">
<span id="index-15"></span><span id="id21"></span><h2>انواع مرجع (Reference Types)<a class="headerlink" href="#reference-types" title="پیوند ثابت به این سر مقاله"></a></h2>
<p>مقادیر نوع مرجع را می‌توان از طریق چندین نام مختلف اصلاح کرد. هر زمان که متغیر از نوع مقدار  استفاده
شود، در جایی که یک کپی مستقل دریافت می‌کنید نوع مرجع را با انواع مقدار مقایسه کنید. به همین دلیل،
انواع مرجع باید با دقت بیشتری از انواع مقادیر رسیدگی شوند. در حال حاضر، انواع مرجع شامل structها،
آرایه‌ها و mapping ها است. اگر از یک نوع مرجع استفاده می‌کنید، همیشه باید صریحاً منطقه داده‎ای  را که
نوع در آن ذخیره شده‌است فراهم کنید:  <code class="docutils literal notranslate"><span class="pre">memory</span></code>  (طول عمر آن فقط به یک فراخوانی کنند تابع خارجی
محدود می‌شود)،   <code class="docutils literal notranslate"><span class="pre">storage</span></code> (مکانی که متغیرهای حالت در آن ذخیره می‌شوند، جایی که طول عمر آنها به
طول عمر قرارداد محدود می‌شود) یا  <code class="docutils literal notranslate"><span class="pre">calldata</span></code> (مکان داده ویژه‌ای که شامل آرگومان‌های تابع است).</p>
<p>یک انتساب یا تبدیل نوع که مکان داده را تغییر می‌دهد، همیشه موجب یک عملیات کپی خودکار خواهد شد، در
حالی که انتساب در داخل همان مکان داده فقط در برخی موارد برای انواع storage  کپی می‌شوند.</p>
<section id="data-location">
<span id="id22"></span><h3>مکان داده (Data location)<a class="headerlink" href="#data-location" title="پیوند ثابت به این سر مقاله"></a></h3>
<blockquote>
<div><p>هر نوع مرجع حاوی یادداشت اضافی است، &quot;data location&quot;، در مورد مکانی که ذخیره می‌شود. سه مکان
داده وجود دارد:  <code class="docutils literal notranslate"><span class="pre">memory</span></code>  ،  <code class="docutils literal notranslate"><span class="pre">storage</span></code> و  <code class="docutils literal notranslate"><span class="pre">calldata</span></code> .
<code class="docutils literal notranslate"><span class="pre">calldata</span></code> یک منطقه غیرقابل تغییر و غیرقابل ماندگاری است که آرگومان‌های تابع در آن ذخیره می‌شود و
بیشتر مانند مِمُوری رفتار می‌کند. برای پارامترهای توابع خارجی لازم است اما می‌تواند برای سایر متغیرها نیز استفاده شود.</p>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>اگر می‌توانید، سعی کنید از  <code class="docutils literal notranslate"><span class="pre">calldata</span></code> به عنوان مکان داده استفاده کنید زیرا از کپی جلوگیری می‌کند
و همچنین مطمئن می‌شوید که داده‌ها قابل اصلاح نیستند. آرایه‌ها و struct های دارای مکان  داده  <code class="docutils literal notranslate"><span class="pre">calldata</span></code> نیز می‌توانند از توابع برگردانده شوند، اما اختصاص چنین نوع‌هایی امکان پذیر نیست.</p>
</div>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>Prior to version 0.6.9 data location for reference-type arguments was limited to
<code class="docutils literal notranslate"><span class="pre">calldata</span></code> in external functions, <code class="docutils literal notranslate"><span class="pre">memory</span></code> in public functions and either
<code class="docutils literal notranslate"><span class="pre">memory</span></code> or <code class="docutils literal notranslate"><span class="pre">storage</span></code> in internal and private ones.
Now <code class="docutils literal notranslate"><span class="pre">memory</span></code> and <code class="docutils literal notranslate"><span class="pre">calldata</span></code> are allowed in all functions regardless of their visibility.</p>
</div>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>قبل از نسخه 0.5.0 ، مکان داده را می‌توان حذف کرد، و بسته به نوع متغیر، نوع تابع و غیره به مکان‌های مختلف پیش فرض می‌رود ، اما اکنون همه انواع پیچیده باید یک مکان داده مشخص داشته باشند.</p>
</div>
<section id="data-location-and-assignment-behaviour">
<span id="data-location-assignment"></span><h4>مکان داده و رفتار انتساب (Data location and assignment behaviour)<a class="headerlink" href="#data-location-and-assignment-behaviour" title="پیوند ثابت به این سر مقاله"></a></h4>
<p>مکان داده  نه تنها برای ماندگاری داده‌ها بلکه برای معنای انتساب‌ها نیز مهم هستند:</p>
<ul class="simple">
<li><p>انتساب‌ها  بین <code class="docutils literal notranslate"><span class="pre">storage</span></code>  و  <code class="docutils literal notranslate"><span class="pre">memory</span></code> (یا از  <code class="docutils literal notranslate"><span class="pre">calldata</span></code> ) همیشه یک کپی مستقل ایجاد می‌کنند.</p></li>
<li><p>انتساب‌ها از  <code class="docutils literal notranslate"><span class="pre">memory</span></code> به  <code class="docutils literal notranslate"><span class="pre">memory</span></code> فقط مراجع را ایجاد می‌کند. این بدان معناست که تغییرات در یک متغیر مِمُوری در سایر متغیرهای مِمُوری که به داده‌های مشابه ارجاع می‌کنند نیز قابل مشاهده‌است.</p></li>
<li><p>انتساب‌ها از <code class="docutils literal notranslate"><span class="pre">storage</span></code>  به یک متغیر  storage  محلی** نیز فقط یک مرجع اختصاص می‌دهند** .</p></li>
<li><p>سایر انتسابات به <code class="docutils literal notranslate"><span class="pre">storage</span></code> همیشه کپی می‌شوند. نمونه‌هایی برای این مورد، انتساب به متغیرهای حالت یا اعضای متغیرهای محلی از نوع  storage struct می‌باشند، حتی اگر متغیر محلی فقط یک مرجع باشد.</p></li>
</ul>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC41LjAgPDAuOS4wOwoKY29udHJhY3QgQyB7CiAgICAvLyBUaGUgZGF0YSBsb2NhdGlvbiBvZiB4IGlzIHN0b3JhZ2UuCiAgICAvLyBUaGlzIGlzIHRoZSBvbmx5IHBsYWNlIHdoZXJlIHRoZQogICAgLy8gZGF0YSBsb2NhdGlvbiBjYW4gYmUgb21pdHRlZC4KICAgIHVpbnRbXSB4OwoKICAgIC8vIFRoZSBkYXRhIGxvY2F0aW9uIG9mIG1lbW9yeUFycmF5IGlzIG1lbW9yeS4KICAgIGZ1bmN0aW9uIGYodWludFtdIG1lbW9yeSBtZW1vcnlBcnJheSkgcHVibGljIHsKICAgICAgICB4ID0gbWVtb3J5QXJyYXk7IC8vIHdvcmtzLCBjb3BpZXMgdGhlIHdob2xlIGFycmF5IHRvIHN0b3JhZ2UKICAgICAgICB1aW50W10gc3RvcmFnZSB5ID0geDsgLy8gd29ya3MsIGFzc2lnbnMgYSBwb2ludGVyLCBkYXRhIGxvY2F0aW9uIG9mIHkgaXMgc3RvcmFnZQogICAgICAgIHlbN107IC8vIGZpbmUsIHJldHVybnMgdGhlIDh0aCBlbGVtZW50CiAgICAgICAgeS5wb3AoKTsgLy8gZmluZSwgbW9kaWZpZXMgeCB0aHJvdWdoIHkKICAgICAgICBkZWxldGUgeDsgLy8gZmluZSwgY2xlYXJzIHRoZSBhcnJheSwgYWxzbyBtb2RpZmllcyB5CiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBkb2VzIG5vdCB3b3JrOyBpdCB3b3VsZCBuZWVkIHRvIGNyZWF0ZSBhIG5ldyB0ZW1wb3JhcnkgLwogICAgICAgIC8vIHVubmFtZWQgYXJyYXkgaW4gc3RvcmFnZSwgYnV0IHN0b3JhZ2UgaXMgInN0YXRpY2FsbHkiIGFsbG9jYXRlZDoKICAgICAgICAvLyB5ID0gbWVtb3J5QXJyYXk7CiAgICAgICAgLy8gVGhpcyBkb2VzIG5vdCB3b3JrIGVpdGhlciwgc2luY2UgaXQgd291bGQgInJlc2V0IiB0aGUgcG9pbnRlciwgYnV0IHRoZXJlCiAgICAgICAgLy8gaXMgbm8gc2Vuc2libGUgbG9jYXRpb24gaXQgY291bGQgcG9pbnQgdG8uCiAgICAgICAgLy8gZGVsZXRlIHk7CiAgICAgICAgZyh4KTsgLy8gY2FsbHMgZywgaGFuZGluZyBvdmVyIGEgcmVmZXJlbmNlIHRvIHgKICAgICAgICBoKHgpOyAvLyBjYWxscyBoIGFuZCBjcmVhdGVzIGFuIGluZGVwZW5kZW50LCB0ZW1wb3JhcnkgY29weSBpbiBtZW1vcnkKICAgIH0KCiAgICBmdW5jdGlvbiBnKHVpbnRbXSBzdG9yYWdlKSBpbnRlcm5hbCBwdXJlIHt9CiAgICBmdW5jdGlvbiBoKHVpbnRbXSBtZW1vcnkpIHB1YmxpYyBwdXJlIHt9Cn0="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.5.0</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span><span class="w"></span>

<span class="k">contract</span><span class="w"> </span><span class="ni">C</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// The data location of x is storage.</span>
<span class="w">    </span><span class="c1">// This is the only place where the</span>
<span class="w">    </span><span class="c1">// data location can be omitted.</span>
<span class="w">    </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span>x<span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// The data location of memoryArray is memory.</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>memoryArray<span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span>x<span class="w"> </span><span class="o">=</span><span class="w"> </span>memoryArray<span class="p">;</span><span class="w"> </span><span class="c1">// works, copies the whole array to storage</span>
<span class="w">        </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span>storage<span class="w"> </span>y<span class="w"> </span><span class="o">=</span><span class="w"> </span>x<span class="p">;</span><span class="w"> </span><span class="c1">// works, assigns a pointer, data location of y is storage</span>
<span class="w">        </span>y<span class="p">[</span><span class="m m-Decimal">7</span><span class="p">];</span><span class="w"> </span><span class="c1">// fine, returns the 8th element</span>
<span class="w">        </span>y<span class="p">.</span>pop<span class="p">();</span><span class="w"> </span><span class="c1">// fine, modifies x through y</span>
<span class="w">        </span>delete<span class="w"> </span>x<span class="p">;</span><span class="w"> </span><span class="c1">// fine, clears the array, also modifies y</span>
<span class="w">        </span><span class="c1">// The following does not work; it would need to create a new temporary /</span>
<span class="w">        </span><span class="c1">// unnamed array in storage, but storage is &quot;statically&quot; allocated:</span>
<span class="w">        </span><span class="c1">// y = memoryArray;</span>
<span class="w">        </span><span class="c1">// This does not work either, since it would &quot;reset&quot; the pointer, but there</span>
<span class="w">        </span><span class="c1">// is no sensible location it could point to.</span>
<span class="w">        </span><span class="c1">// delete y;</span>
<span class="w">        </span>g<span class="p">(</span>x<span class="p">);</span><span class="w"> </span><span class="c1">// calls g, handing over a reference to x</span>
<span class="w">        </span>h<span class="p">(</span>x<span class="p">);</span><span class="w"> </span><span class="c1">// calls h and creates an independent, temporary copy in memory</span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">g</span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span>storage<span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>pure<span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">h</span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="arrays">
<span id="index-16"></span><span id="id23"></span><h3>آرایه‌ها<a class="headerlink" href="#arrays" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>آرایه‌ها می‌توانند اندازه ثابت زمان کامپایل داشته باشند، یا می‌توانند اندازه پویا داشته باشند.</p>
<p>نوع آرایه‌ای با اندازه ثابت <code class="docutils literal notranslate"><span class="pre">k</span></code> و نوع عنصر  <code class="docutils literal notranslate"><span class="pre">T</span></code> به صورت  <code class="docutils literal notranslate"><span class="pre">T[k]</span></code> و آرایه‌ای با اندازه پویا به صورت  <code class="docutils literal notranslate"><span class="pre">[]T</span></code> نوشته می‌شود.</p>
<p>به عنوان مثال، آرایه‌ای از 5 آرایه دینامیکی <code class="docutils literal notranslate"><span class="pre">uint</span></code> به صورت  <code class="docutils literal notranslate"><span class="pre">uint[][5]</span></code> نوشته می‌شود. علامت گذاری
در مقایسه با برخی از زبان‌های دیگر معکوس می‌شود. در سالیدیتی ،  <code class="docutils literal notranslate"><span class="pre">X[3]</span></code> همیشه یک آرایه است که شامل
سه عنصر از نوع  <code class="docutils literal notranslate"><span class="pre">X</span></code> است، حتی اگر  <code class="docutils literal notranslate"><span class="pre">X</span></code> خودش یک آرایه باشد. این مورد در زبان‌های دیگر مانند C وجود ندارد.</p>
<p>شاخص‌ها  مبتنی بر صفر هستند و دسترسی در خلاف جهت اعلامیه  است.</p>
<p>به عنوان مثال، اگر یک متغیر   <code class="docutils literal notranslate"><span class="pre">uint[][5]</span> <span class="pre">memory</span> <span class="pre">x</span></code> داشته باشید، با استفاده از <code class="docutils literal notranslate"><span class="pre">x[2][6]</span></code>  به
<code class="docutils literal notranslate"><span class="pre">uint</span></code>  هفتم در آرایه پویای سوم دسترسی پیدا می‌کنید و برای دسترسی به آرایه پویای سوم، از <code class="docutils literal notranslate"><span class="pre">x[2]</span></code> استفاده
کنید. باز هم اگر یک آرایه  <code class="docutils literal notranslate"><span class="pre">T[5]</span></code> aبرای نوع  <code class="docutils literal notranslate"><span class="pre">T</span></code> دارید که می‌تواند یک آرایه نیز باشد،  <code class="docutils literal notranslate"><span class="pre">a[2]</span></code> همیشه
نوع  <code class="docutils literal notranslate"><span class="pre">T</span></code> را دارد.</p>
<p>عناصر آرایه می‌توانند از هر نوع شامل mapping یا struct باشند. محدودیت‌های کلی برای انواع اعمال
می‌شود، به این دلیل که mapping‌ها فقط در محل داده  <code class="docutils literal notranslate"><span class="pre">storage</span></code> می‌توانند ذخیره شوند و توابع قابل
مشاهده به صورت عمومی، نیاز به پارامترهایی دارند که از نوع <a class="reference internal" href="abi-spec.html#abi"><span class="std std-ref">ABI types</span></a> باشند.</p>
<p>می‌توان آرایه‌های متغیر حالت را به صورت  <code class="docutils literal notranslate"><span class="pre">public</span></code> علامت گذاری کرد و از سالیدیتی برای ایجاد یک
<a class="reference internal" href="contracts.html#visibility-and-getters"><span class="std std-ref">getter</span></a> استفاده کرد. شاخص عددی به یک پارامتر مورد نیاز برای  getter تبدیل می‌شود.</p>
<p>دستیابی به آرایه‌ای که از انتهای آن گذشته است، ادعای ناموفقی را ایجاد می‌کند. از روش های  <code class="docutils literal notranslate"><span class="pre">()push.</span></code>
و  <code class="docutils literal notranslate"><span class="pre">push(value).</span></code>  می‌توان برای افزودن یک عنصر جدید در انتهای آرایه استفاده کرد، جایی
که <code class="docutils literal notranslate"><span class="pre">()push.</span></code> یک عنصر مقداردهی شده صفر را اضافه می‌کند و مرجعی را به آن برمی‌گرداند.</p>
<section id="bytes-string">
<span id="bytes"></span><span id="strings"></span><span id="index-17"></span><h4>bytes و string  به عنوان آرایه‌ها<a class="headerlink" href="#bytes-string" title="پیوند ثابت به این سر مقاله"></a></h4>
<blockquote>
<div><p>متغیرهای نوع  <code class="docutils literal notranslate"><span class="pre">bytes</span></code> و <code class="docutils literal notranslate"><span class="pre">string</span></code>  آرایه‌های خاصی هستند. <code class="docutils literal notranslate"><span class="pre">bytes</span></code>  مانند  <code class="docutils literal notranslate"><span class="pre">[]bytes1</span></code> است، اما در
calldata و مِمُوری کاملاً بسته بندی شده است. <code class="docutils literal notranslate"><span class="pre">string</span></code> برابر با <code class="docutils literal notranslate"><span class="pre">bytes</span></code>  است اما اجازه دسترسی به
طول  یا index  را نمی‌دهد.</p>
</div></blockquote>
<p>Variables of type <code class="docutils literal notranslate"><span class="pre">bytes</span></code> and <code class="docutils literal notranslate"><span class="pre">string</span></code> are special arrays. The <code class="docutils literal notranslate"><span class="pre">bytes</span></code> type is similar to <code class="docutils literal notranslate"><span class="pre">bytes1[]</span></code>,
but it is packed tightly in calldata and memory. <code class="docutils literal notranslate"><span class="pre">string</span></code> is equal to <code class="docutils literal notranslate"><span class="pre">bytes</span></code> but does not allow
length or index access.</p>
<p>سالیدیتی توابع دستکاری  string  ندارد، اما کتابخانه‌هایstring  طرف سوم وجود دارد. همچنین
می‌توانید دو  string  را توسط keccak256-hash آنها با استفاده از
<code class="docutils literal notranslate"><span class="pre">keccak256(abi.encodePacked(s1))</span> <span class="pre">==</span> <span class="pre">keccak256(abi.encodePacked(s2))</span></code>  مقایسه کنید و دو رشته را با استفاده از  <code class="docutils literal notranslate"><span class="pre">bytes.concat(bytes(s1),</span> <span class="pre">bytes(s2))</span></code>  بهم پیوست دهید.</p>
<p>از آنجا که  <code class="docutils literal notranslate"><span class="pre">[]bytes1</span></code> سی و یک لایه بایت بین عناصر اضافه می‌کند، شما باید از <code class="docutils literal notranslate"><span class="pre">bytes</span></code>  بیش
از <code class="docutils literal notranslate"><span class="pre">[]bytes1</span></code> استفاده کنید زیرا ارزان‌تر است. به عنوان یک قاعده کلی، برای داده‌های <code class="docutils literal notranslate"><span class="pre">bytes</span></code>  خام با طول
دلخواه از bytes  و برای داده‌های  <code class="docutils literal notranslate"><span class="pre">string</span></code>  با طول دلخواه (UTF-8) از  <code class="docutils literal notranslate"><span class="pre">string</span></code> استفاده کنید. اگر
می‌توانید طول را به تعداد مشخصی از بایت محدود کنید، همیشه از یکی از انواع مقدار <code class="docutils literal notranslate"><span class="pre">bytes1</span></code>
تا  <code class="docutils literal notranslate"><span class="pre">bytes32</span></code> استفاده کنید زیرا بسیار ارزان‌تر هستند.</p>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>If you want to access the byte-representation of a string <code class="docutils literal notranslate"><span class="pre">s</span></code>, use
<code class="docutils literal notranslate"><span class="pre">bytes(s).length</span></code> / <code class="docutils literal notranslate"><span class="pre">bytes(s)[7]</span> <span class="pre">=</span> <span class="pre">'x';</span></code> . Keep in mind
that you are accessing the low-level bytes of the UTF-8 representation,
and not the individual characters.</p>
<p>اگر می‌خواهید به نمایش بایت  یک رشته‌ی <code class="docutils literal notranslate"><span class="pre">s</span></code> دسترسی پیدا کنید، از  <code class="docutils literal notranslate"><span class="pre">bytes(s).length</span></code> / <code class="docutils literal notranslate"><span class="pre">bytes(s)[7]</span> <span class="pre">=</span> <span class="pre">'x';</span></code> استفاده کنید. بخاطر داشته باشید که شما به بایت‌های سطح پایین،
پیش نمایش UTF-8 و نه به کارکترهای جداگانه دسترسی پیدا می‌کنید.</p>
</div>
<p>// &#64;saracodic  Isnt shown correctly in text
<code class="docutils literal notranslate"><span class="pre">bytes(s).length</span></code> / <code class="docutils literal notranslate"><span class="pre">bytes(s)[7]</span> <span class="pre">=</span> <span class="pre">'x';</span></code></p>
</section>
<section id="bytes-concat">
<span id="index-18"></span><span id="id24"></span><h4>تابع bytes.concat<a class="headerlink" href="#bytes-concat" title="پیوند ثابت به این سر مقاله"></a></h4>
<p>با استفاده از <code class="docutils literal notranslate"><span class="pre">bytes.concat</span></code>  می‌توانید تعدادی متغیر از <code class="docutils literal notranslate"><span class="pre">bytes</span></code>
یا  <code class="docutils literal notranslate"><span class="pre">bytes1</span> <span class="pre">...</span> <span class="pre">bytes32</span></code>  را بهم پیوند دهید. این تابع یک تک آرایه <code class="docutils literal notranslate"><span class="pre">bytes</span> <span class="pre">memory</span></code>  را
برمی‌گرداند که شامل محتویات آرگومان‌ها بدون padding است. اگر می‌خواهید از پارامترهای رشته‌ای یا انواع
دیگر استفاده کنید، ابتدا باید آنها را به  <code class="docutils literal notranslate"><span class="pre">bytes</span></code> یا <code class="docutils literal notranslate"><span class="pre">bytes1</span></code>/.../<code class="docutils literal notranslate"><span class="pre">bytes32</span></code> تبدیل کنید.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5IF4wLjguNDsKCmNvbnRyYWN0IEMgewogICAgYnl0ZXMgcyA9ICJTdG9yYWdlIjsKICAgIGZ1bmN0aW9uIGYoYnl0ZXMgY2FsbGRhdGEgYywgc3RyaW5nIG1lbW9yeSBtLCBieXRlczE2IGIpIHB1YmxpYyB2aWV3IHsKICAgICAgICBieXRlcyBtZW1vcnkgYSA9IGJ5dGVzLmNvbmNhdChzLCBjLCBjWzoyXSwgIkxpdGVyYWwiLCBieXRlcyhtKSwgYik7CiAgICAgICAgYXNzZXJ0KChzLmxlbmd0aCArIGMubGVuZ3RoICsgMiArIDcgKyBieXRlcyhtKS5sZW5ndGggKyAxNikgPT0gYS5sZW5ndGgpOwogICAgfQp9"><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">^</span><span class="k">0.8.4</span><span class="p">;</span><span class="w"></span>

<span class="k">contract</span><span class="w"> </span><span class="ni">C</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Storage&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">(</span><span class="kt">bytes</span><span class="w"> </span><span class="nv">calldata</span><span class="w"> </span>c<span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>m<span class="p">,</span><span class="w"> </span><span class="kt">bytes16</span><span class="w"> </span><span class="nv">b</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>view<span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>a<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">bytes</span><span class="p">.</span>concat<span class="p">(</span>s<span class="p">,</span><span class="w"> </span>c<span class="p">,</span><span class="w"> </span>c<span class="p">[:</span><span class="m m-Decimal">2</span><span class="p">],</span><span class="w"> </span><span class="s2">&quot;Literal&quot;</span><span class="p">,</span><span class="w"> </span><span class="kt">bytes</span><span class="p">(</span>m<span class="p">),</span><span class="w"> </span>b<span class="p">);</span><span class="w"></span>
<span class="w">        </span>assert<span class="p">((</span>s<span class="p">.</span>length<span class="w"> </span><span class="o">+</span><span class="w"> </span>c<span class="p">.</span>length<span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m m-Decimal">2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m m-Decimal">7</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="kt">bytes</span><span class="p">(</span>m<span class="p">).</span>length<span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m m-Decimal">16</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>a<span class="p">.</span>length<span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>اگر بدون آرگومان  <code class="docutils literal notranslate"><span class="pre">bytes.concat</span></code>   فراخوانی کنید، آرایه‌ای خالی از <code class="docutils literal notranslate"><span class="pre">bytes</span></code>  را برمی‌گرداند.</p>
</section>
<section id="allocating-memory-arrays">
<span id="index-19"></span><h4>تخصیص آرایه های مِمُوری (Allocating Memory Arrays)<a class="headerlink" href="#allocating-memory-arrays" title="پیوند ثابت به این سر مقاله"></a></h4>
<blockquote>
<div><p>آرایه‌های مِمُوری با طول پویا را می‌توان با استفاده از عملگر  <code class="docutils literal notranslate"><span class="pre">new</span></code> ایجاد کرد. در مقایسه با آرایه‌های
storage، تغییر اندازه آرایه‌های مِمُوری امکان پذیر نیست (به عنوان مثال توابع عضو <code class="docutils literal notranslate"><span class="pre">push.</span></code>  در دسترس
نیستند). یا باید اندازه مورد نیاز را از قبل محاسبه کنید یا یک آرایه مِمُوری جدید ایجاد کنید و هر عنصر را کپی کنید.</p>
</div></blockquote>
<p>مثل همهِ متغیرها در سالیدیتی، عناصر آرایه‌های تازه تخصیص یافته همیشه با <a class="reference internal" href="control-structures.html#default-value"><span class="std std-ref">مقدار پیش فرض</span></a> مقداردهی می‌شوند.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC40LjE2IDwwLjkuMDsKCmNvbnRyYWN0IEMgewogICAgZnVuY3Rpb24gZih1aW50IGxlbikgcHVibGljIHB1cmUgewogICAgICAgIHVpbnRbXSBtZW1vcnkgYSA9IG5ldyB1aW50W10oNyk7CiAgICAgICAgYnl0ZXMgbWVtb3J5IGIgPSBuZXcgYnl0ZXMobGVuKTsKICAgICAgICBhc3NlcnQoYS5sZW5ndGggPT0gNyk7CiAgICAgICAgYXNzZXJ0KGIubGVuZ3RoID09IGxlbik7CiAgICAgICAgYVs2XSA9IDg7CiAgICB9Cn0="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.4.16</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span><span class="w"></span>

<span class="k">contract</span><span class="w"> </span><span class="ni">C</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">len</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>a<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">uint</span><span class="p">[](</span><span class="m m-Decimal">7</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>b<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">bytes</span><span class="p">(</span>len<span class="p">);</span><span class="w"></span>
<span class="w">        </span>assert<span class="p">(</span>a<span class="p">.</span>length<span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m m-Decimal">7</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span>assert<span class="p">(</span>b<span class="p">.</span>length<span class="w"> </span><span class="o">==</span><span class="w"> </span>len<span class="p">);</span><span class="w"></span>
<span class="w">        </span>a<span class="p">[</span><span class="m m-Decimal">6</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">8</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="index-20">
<span id="id25"></span><h4>آرایه‌ لیترال‌ها<a class="headerlink" href="#index-20" title="پیوند ثابت به این سر مقاله"></a></h4>
<blockquote>
<div><p>آرایه لیترال لیستی جدا شده با کاما از یک یا چند عبارت است که در بِراکت مربعی محصور شده
است  (<code class="docutils literal notranslate"><span class="pre">[...]</span></code>). به عنوان مثال  <code class="docutils literal notranslate"><span class="pre">[1,</span> <span class="pre">a,</span> <span class="pre">f(3)]</span></code> . نوع آرایه به صورت زیر تعیین می‌شود:</p>
</div></blockquote>
<p>// &#64;saracodic  Isnt shown correctly in text</p>
<p>همیشه یک آرایه مِمُوری با اندازه ایستا است که طول آن تعداد عبارات است.</p>
<p>نوع پایه‌ی آرایه، نوع اولین عبارت در لیست است به طوری که می‌توان بقیه عبارات را به طور ضمنی به آن تبدیل
کرد. اگر این امکان وجود نداشته باشد خطای نوع است.</p>
<blockquote>
<div><p>کافی نیست نوعی وجود داشته باشد که همه عناصر بتوانند به آن تبدیل شوند. یکی از عناصر باید از آن نوع باشد.</p>
<blockquote>
<div><p>در مثال زیر، نوع  <code class="docutils literal notranslate"><span class="pre">[3,</span> <span class="pre">2,</span> <span class="pre">1]</span></code> ،  <code class="docutils literal notranslate"><span class="pre">uint8[3]</span> <span class="pre">memory</span></code> می‌باشد، زیرا نوع هر یک از این
ثابت‌ها  <code class="docutils literal notranslate"><span class="pre">uint8</span></code> است. اگر می‌خواهید نتیجه از نوع  <code class="docutils literal notranslate"><span class="pre">uint8[3]</span> <span class="pre">memory</span></code> باشد، باید اولین عنصر را
به  <code class="docutils literal notranslate"><span class="pre">uint</span></code> تبدیل کنید.</p>
</div></blockquote>
</div></blockquote>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC40LjE2IDwwLjkuMDsKCmNvbnRyYWN0IEMgewogICAgZnVuY3Rpb24gZigpIHB1YmxpYyBwdXJlIHsKICAgICAgICBnKFt1aW50KDEpLCAyLCAzXSk7CiAgICB9CiAgICBmdW5jdGlvbiBnKHVpbnRbM10gbWVtb3J5KSBwdWJsaWMgcHVyZSB7CiAgICAgICAgLy8gLi4uCiAgICB9Cn0="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.4.16</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span><span class="w"></span>

<span class="k">contract</span><span class="w"> </span><span class="ni">C</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span>g<span class="p">([</span><span class="kt">uint</span><span class="p">(</span><span class="m m-Decimal">1</span><span class="p">),</span><span class="w"> </span><span class="m m-Decimal">2</span><span class="p">,</span><span class="w"> </span><span class="m m-Decimal">3</span><span class="p">]);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">g</span><span class="p">(</span><span class="kt">uint</span><span class="p">[</span><span class="m m-Decimal">3</span><span class="p">]</span><span class="w"> </span><span class="kt">memory</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// ...</span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>آرایه لیترال  <code class="docutils literal notranslate"><span class="pre">[1-,</span> <span class="pre">1]</span></code> نامعتبر است زیرا نوع عبارت اول  <code class="docutils literal notranslate"><span class="pre">uint8</span></code> است در حالی که نوع دوم  <code class="docutils literal notranslate"><span class="pre">int8</span></code> است
و نمی‌توان آنها را به طور ضمنی به یکدیگر تبدیل کرد. برای استفاده از آن، می‌توانید از  <code class="docutils literal notranslate"><span class="pre">[int8(1),</span> <span class="pre">-1]</span></code> استفاده کنید.</p>
<blockquote>
<div><p>از آنجا که آرایه‌های مِمُوری با اندازه ثابت از انواع مختلف قابل تبدیل به یکدیگر نیستند (حتی اگر انواع پایه بتوانند)، اگر می‌خواهید از لیترال‌های دو بعدی استفاده کنید، باید یک نوع پایه مشترک را به طور صریح مشخص کنید:</p>
</div></blockquote>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC40LjE2IDwwLjkuMDsKCmNvbnRyYWN0IEMgewogICAgZnVuY3Rpb24gZigpIHB1YmxpYyBwdXJlIHJldHVybnMgKHVpbnQyNFsyXVs0XSBtZW1vcnkpIHsKICAgICAgICB1aW50MjRbMl1bNF0gbWVtb3J5IHggPSBbW3VpbnQyNCgweDEpLCAxXSwgWzB4ZmZmZmZmLCAyXSwgW3VpbnQyNCgweGZmKSwgM10sIFt1aW50MjQoMHhmZmZmKSwgNF1dOwogICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgZG9lcyBub3Qgd29yaywgYmVjYXVzZSBzb21lIG9mIHRoZSBpbm5lciBhcnJheXMgYXJlIG5vdCBvZiB0aGUgcmlnaHQgdHlwZS4KICAgICAgICAvLyB1aW50WzJdWzRdIG1lbW9yeSB4ID0gW1sweDEsIDFdLCBbMHhmZmZmZmYsIDJdLCBbMHhmZiwgM10sIFsweGZmZmYsIDRdXTsKICAgICAgICByZXR1cm4geDsKICAgIH0KfQ=="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.4.16</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span><span class="w"></span>

<span class="k">contract</span><span class="w"> </span><span class="ni">C</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint24</span><span class="p">[</span><span class="m m-Decimal">2</span><span class="p">][</span><span class="m m-Decimal">4</span><span class="p">]</span><span class="w"> </span><span class="kt">memory</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">uint24</span><span class="p">[</span><span class="m m-Decimal">2</span><span class="p">][</span><span class="m m-Decimal">4</span><span class="p">]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>x<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[[</span><span class="kt">uint24</span><span class="p">(</span><span class="mh">0x1</span><span class="p">),</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="mh">0xffffff</span><span class="p">,</span><span class="w"> </span><span class="m m-Decimal">2</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="kt">uint24</span><span class="p">(</span><span class="mh">0xff</span><span class="p">),</span><span class="w"> </span><span class="m m-Decimal">3</span><span class="p">],</span><span class="w"> </span><span class="p">[</span><span class="kt">uint24</span><span class="p">(</span><span class="mh">0xffff</span><span class="p">),</span><span class="w"> </span><span class="m m-Decimal">4</span><span class="p">]];</span><span class="w"></span>
<span class="w">        </span><span class="c1">// The following does not work, because some of the inner arrays are not of the right type.</span>
<span class="w">        </span><span class="c1">// uint[2][4] memory x = [[0x1, 1], [0xffffff, 2], [0xff, 3], [0xffff, 4]];</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>x<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>آرایه های مِمُوری با اندازه ثابت را نمی‌توان به آرایه‌های مِمُوری با اندازه پویا اختصاص داد، یعنی موارد زیر امکان پذیر نیست:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC40LjAgPDAuOS4wOwoKLy8gVGhpcyB3aWxsIG5vdCBjb21waWxlLgpjb250cmFjdCBDIHsKICAgIGZ1bmN0aW9uIGYoKSBwdWJsaWMgewogICAgICAgIC8vIFRoZSBuZXh0IGxpbmUgY3JlYXRlcyBhIHR5cGUgZXJyb3IgYmVjYXVzZSB1aW50WzNdIG1lbW9yeQogICAgICAgIC8vIGNhbm5vdCBiZSBjb252ZXJ0ZWQgdG8gdWludFtdIG1lbW9yeS4KICAgICAgICB1aW50W10gbWVtb3J5IHggPSBbdWludCgxKSwgMywgNF07CiAgICB9Cn0="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.4.0</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span><span class="w"></span>

<span class="c1">// This will not compile.</span>
<span class="k">contract</span><span class="w"> </span><span class="ni">C</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// The next line creates a type error because uint[3] memory</span>
<span class="w">        </span><span class="c1">// cannot be converted to uint[] memory.</span>
<span class="w">        </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>x<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="kt">uint</span><span class="p">(</span><span class="m m-Decimal">1</span><span class="p">),</span><span class="w"> </span><span class="m m-Decimal">3</span><span class="p">,</span><span class="w"> </span><span class="m m-Decimal">4</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>در آینده برنامه ریزی شده‌است که سالیدیتی این محدودیت را برطرف کند، اما به دلیل نحوهِ انتقال آرایه‌ها در ABI، مشکلاتی ایجاد می‌شود.</p>
<blockquote>
<div><p>اگر می‌خواهید آرایه‌هایی با اندازه پویا را شروع کنید، باید عناصر جداگانه را اختصاص دهید:</p>
</div></blockquote>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC40LjE2IDwwLjkuMDsKCmNvbnRyYWN0IEMgewogICAgZnVuY3Rpb24gZigpIHB1YmxpYyBwdXJlIHsKICAgICAgICB1aW50W10gbWVtb3J5IHggPSBuZXcgdWludFtdKDMpOwogICAgICAgIHhbMF0gPSAxOwogICAgICAgIHhbMV0gPSAzOwogICAgICAgIHhbMl0gPSA0OwogICAgfQp9"><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.4.16</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span><span class="w"></span>

<span class="k">contract</span><span class="w"> </span><span class="ni">C</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>x<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">uint</span><span class="p">[](</span><span class="m m-Decimal">3</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span>x<span class="p">[</span><span class="m m-Decimal">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span>x<span class="p">[</span><span class="m m-Decimal">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">3</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span>x<span class="p">[</span><span class="m m-Decimal">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">4</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="array-members-public">
<span id="array-members"></span><span id="index-21"></span><h4>اعضای آرایه (Array Members) public<a class="headerlink" href="#array-members-public" title="پیوند ثابت به این سر مقاله"></a></h4>
<dl>
<dt><strong>length</strong>:</dt><dd><p>آرایه‌ها دارای یک عضو  <code class="docutils literal notranslate"><span class="pre">length</span></code> هستند که شامل تعداد عناصر آنها است. طول آرایه‌های مِمُوری پس از ایجاد
ثابت است (اما پویا، یعنی می‌تواند به پارامترها در زمان اجرا بستگی داشته باشد).</p>
<p>Arrays have a <code class="docutils literal notranslate"><span class="pre">length</span></code> member that contains their number of elements.
The length of memory arrays is fixed (but dynamic, i.e. it can depend on
runtime parameters) once they are created.</p>
</dd>
</dl>
<p><strong>push()</strong>:</p>
<blockquote>
<div><p>آرایه‌های storage و  bytes پویا (نه  <code class="docutils literal notranslate"><span class="pre">string</span></code>) دارای یک عضو تابع به نام <code class="docutils literal notranslate"><span class="pre">()push</span></code> هستند که
می‌توانید از آن برای افزودن یک عنصر مقداردهی شده صفر در انتهای آرایه استفاده کنید. یک ارجاع به عنصر را
برمی‌گرداند، بنابراین می‌توان از آن مانند <code class="docutils literal notranslate"><span class="pre">x.push().t</span> <span class="pre">=</span> <span class="pre">2</span></code>  یا  <code class="docutils literal notranslate"><span class="pre">x.push()</span> <span class="pre">=</span> <span class="pre">b</span></code> استفاده کرد.</p>
<blockquote>
<div><p>Dynamic storage arrays and <code class="docutils literal notranslate"><span class="pre">bytes</span></code> (not <code class="docutils literal notranslate"><span class="pre">string</span></code>) have a member function
called <code class="docutils literal notranslate"><span class="pre">()push</span></code> that you can use to append a zero-initialised element at the end of the array.
It returns a reference to the element, so that it can be used like
<code class="docutils literal notranslate"><span class="pre">x.push().t</span> <span class="pre">=</span> <span class="pre">2</span></code> or <code class="docutils literal notranslate"><span class="pre">x.push()</span> <span class="pre">=</span> <span class="pre">b</span></code>.</p>
</div></blockquote>
</div></blockquote>
<p><strong>push(x)</strong>:</p>
<blockquote>
<div><p>آرایه‌های storage و  <code class="docutils literal notranslate"><span class="pre">bytes</span></code> پویا (نه  <cite>string`</cite>) دارای یک عضو تابع به نام <code class="docutils literal notranslate"><span class="pre">push(x)</span></code>  هستند که
می‌توانید از آن برای افزودن یک عنصر مشخص در انتهای آرایه استفاده کنید. تابع هیچ چیزی بر نمی‌گرداند.</p>
<blockquote>
<div><p>Dynamic storage arrays and <code class="docutils literal notranslate"><span class="pre">bytes</span></code> (not <code class="docutils literal notranslate"><span class="pre">string</span></code>) have a member function
called <code class="docutils literal notranslate"><span class="pre">push(x)</span></code> that you can use to append a given element at the end of the array.
The function returns nothing.</p>
</div></blockquote>
</div></blockquote>
<p><strong>pop</strong>:</p>
<blockquote>
<div><p>آرایه‌های storage و  <code class="docutils literal notranslate"><span class="pre">bytes</span></code> پویا (نه  <code class="docutils literal notranslate"><span class="pre">string</span></code>) دارای یک عضو تابع به نام <code class="docutils literal notranslate"><span class="pre">pop</span></code>   هستند که می‌توانید
برای حذف یک عنصر از انتهای آرایه استفاده کنید. همچنین به طور ضمنی  <a class="reference internal" href="#delete"><span class="std std-ref">delete</span></a>  را روی عنصر حذف شده فراخوانی می‌کند.</p>
<blockquote>
<div><p>Dynamic storage arrays and <code class="docutils literal notranslate"><span class="pre">bytes</span></code> (not <code class="docutils literal notranslate"><span class="pre">string</span></code>) have a member
function called <code class="docutils literal notranslate"><span class="pre">pop</span></code> that you can use to remove an element from the
end of the array. This also implicitly calls <a class="reference internal" href="#delete"><span class="std std-ref">delete</span></a> on the removed element.</p>
</div></blockquote>
</div></blockquote>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>افزایش طول یک آرایه storage با فراخوانی  <code class="docutils literal notranslate"><span class="pre">()push</span></code> هزینه گَس ثابت را دارد زیرا مقداردهی اولیه
storage صفر می‌باشد، در حالی که کاهش طول با فراخوانی <code class="docutils literal notranslate"><span class="pre">()pop</span></code>  هزینه‌ای دارد که به &quot;اندازه&quot; عنصر
حذف شده بستگی دارد. اگر آن عنصر آرایه‌ای باشد، می‌تواند بسیار پرهزینه باشد، زیرا شامل پاک کردن صریح عناصر حذف شده مشابه  با فراخوانی <a class="reference internal" href="#delete"><span class="std std-ref">delete</span></a>  روی آنها است.</p>
<p>Increasing the length of a storage array by calling <code class="docutils literal notranslate"><span class="pre">()push</span></code>
has constant gas costs because storage is zero-initialised,
while decreasing the length by calling <code class="docutils literal notranslate"><span class="pre">()pop</span></code> has a
cost that depends on the &quot;size&quot; of the element being removed.
If that element is an array, it can be very costly, because
it includes explicitly clearing the removed
elements similar to calling <a class="reference internal" href="#delete"><span class="std std-ref">delete</span></a> on them.</p>
</div>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>برای استفاده از آرایه های توابع خارجی (به جای عملکرد public) ، باید ABI coder v2 را فعال کنید.</p>
</div>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>در نسخه‌های EVM قبل از  Byzantium، دسترسی به آرایه‌های پویا از برگشتیِ توابعِ فراخوانی‌ امکان
پذیر نبود. اگر توابعی را فراخوانی می‌کنید که آرایه‌های پویا را برمی‌گردانند، حتماً از EVMی استفاده کنید که
روی حالت Byzantium تنظیم شده‌است.</p>
</div>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC42LjAgPDAuOS4wOwoKY29udHJhY3QgQXJyYXlDb250cmFjdCB7CiAgICB1aW50WzIqKjIwXSBtX2FMb3RPZkludGVnZXJzOwogICAgLy8gTm90ZSB0aGF0IHRoZSBmb2xsb3dpbmcgaXMgbm90IGEgcGFpciBvZiBkeW5hbWljIGFycmF5cyBidXQgYQogICAgLy8gZHluYW1pYyBhcnJheSBvZiBwYWlycyAoaS5lLiBvZiBmaXhlZCBzaXplIGFycmF5cyBvZiBsZW5ndGggdHdvKS4KICAgIC8vIEJlY2F1c2Ugb2YgdGhhdCwgVFtdIGlzIGFsd2F5cyBhIGR5bmFtaWMgYXJyYXkgb2YgVCwgZXZlbiBpZiBUCiAgICAvLyBpdHNlbGYgaXMgYW4gYXJyYXkuCiAgICAvLyBEYXRhIGxvY2F0aW9uIGZvciBhbGwgc3RhdGUgdmFyaWFibGVzIGlzIHN0b3JhZ2UuCiAgICBib29sWzJdW10gbV9wYWlyc09mRmxhZ3M7CgogICAgLy8gbmV3UGFpcnMgaXMgc3RvcmVkIGluIG1lbW9yeSAtIHRoZSBvbmx5IHBvc3NpYmlsaXR5CiAgICAvLyBmb3IgcHVibGljIGNvbnRyYWN0IGZ1bmN0aW9uIGFyZ3VtZW50cwogICAgZnVuY3Rpb24gc2V0QWxsRmxhZ1BhaXJzKGJvb2xbMl1bXSBtZW1vcnkgbmV3UGFpcnMpIHB1YmxpYyB7CiAgICAgICAgLy8gYXNzaWdubWVudCB0byBhIHN0b3JhZ2UgYXJyYXkgcGVyZm9ybXMgYSBjb3B5IG9mIGBgbmV3UGFpcnNgYCBhbmQKICAgICAgICAvLyByZXBsYWNlcyB0aGUgY29tcGxldGUgYXJyYXkgYGBtX3BhaXJzT2ZGbGFnc2BgLgogICAgICAgIG1fcGFpcnNPZkZsYWdzID0gbmV3UGFpcnM7CiAgICB9CgogICAgc3RydWN0IFN0cnVjdFR5cGUgewogICAgICAgIHVpbnRbXSBjb250ZW50czsKICAgICAgICB1aW50IG1vcmVJbmZvOwogICAgfQogICAgU3RydWN0VHlwZSBzOwoKICAgIGZ1bmN0aW9uIGYodWludFtdIG1lbW9yeSBjKSBwdWJsaWMgewogICAgICAgIC8vIHN0b3JlcyBhIHJlZmVyZW5jZSB0byBgYHNgYCBpbiBgYGdgYAogICAgICAgIFN0cnVjdFR5cGUgc3RvcmFnZSBnID0gczsKICAgICAgICAvLyBhbHNvIGNoYW5nZXMgYGBzLm1vcmVJbmZvYGAuCiAgICAgICAgZy5tb3JlSW5mbyA9IDI7CiAgICAgICAgLy8gYXNzaWducyBhIGNvcHkgYmVjYXVzZSBgYGcuY29udGVudHNgYAogICAgICAgIC8vIGlzIG5vdCBhIGxvY2FsIHZhcmlhYmxlLCBidXQgYSBtZW1iZXIgb2YKICAgICAgICAvLyBhIGxvY2FsIHZhcmlhYmxlLgogICAgICAgIGcuY29udGVudHMgPSBjOwogICAgfQoKICAgIGZ1bmN0aW9uIHNldEZsYWdQYWlyKHVpbnQgaW5kZXgsIGJvb2wgZmxhZ0EsIGJvb2wgZmxhZ0IpIHB1YmxpYyB7CiAgICAgICAgLy8gYWNjZXNzIHRvIGEgbm9uLWV4aXN0aW5nIGluZGV4IHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uCiAgICAgICAgbV9wYWlyc09mRmxhZ3NbaW5kZXhdWzBdID0gZmxhZ0E7CiAgICAgICAgbV9wYWlyc09mRmxhZ3NbaW5kZXhdWzFdID0gZmxhZ0I7CiAgICB9CgogICAgZnVuY3Rpb24gY2hhbmdlRmxhZ0FycmF5U2l6ZSh1aW50IG5ld1NpemUpIHB1YmxpYyB7CiAgICAgICAgLy8gdXNpbmcgcHVzaCBhbmQgcG9wIGlzIHRoZSBvbmx5IHdheSB0byBjaGFuZ2UgdGhlCiAgICAgICAgLy8gbGVuZ3RoIG9mIGFuIGFycmF5CiAgICAgICAgaWYgKG5ld1NpemUgPCBtX3BhaXJzT2ZGbGFncy5sZW5ndGgpIHsKICAgICAgICAgICAgd2hpbGUgKG1fcGFpcnNPZkZsYWdzLmxlbmd0aCA+IG5ld1NpemUpCiAgICAgICAgICAgICAgICBtX3BhaXJzT2ZGbGFncy5wb3AoKTsKICAgICAgICB9IGVsc2UgaWYgKG5ld1NpemUgPiBtX3BhaXJzT2ZGbGFncy5sZW5ndGgpIHsKICAgICAgICAgICAgd2hpbGUgKG1fcGFpcnNPZkZsYWdzLmxlbmd0aCA8IG5ld1NpemUpCiAgICAgICAgICAgICAgICBtX3BhaXJzT2ZGbGFncy5wdXNoKCk7CiAgICAgICAgfQogICAgfQoKICAgIGZ1bmN0aW9uIGNsZWFyKCkgcHVibGljIHsKICAgICAgICAvLyB0aGVzZSBjbGVhciB0aGUgYXJyYXlzIGNvbXBsZXRlbHkKICAgICAgICBkZWxldGUgbV9wYWlyc09mRmxhZ3M7CiAgICAgICAgZGVsZXRlIG1fYUxvdE9mSW50ZWdlcnM7CiAgICAgICAgLy8gaWRlbnRpY2FsIGVmZmVjdCBoZXJlCiAgICAgICAgbV9wYWlyc09mRmxhZ3MgPSBuZXcgYm9vbFsyXVtdKDApOwogICAgfQoKICAgIGJ5dGVzIG1fYnl0ZURhdGE7CgogICAgZnVuY3Rpb24gYnl0ZUFycmF5cyhieXRlcyBtZW1vcnkgZGF0YSkgcHVibGljIHsKICAgICAgICAvLyBieXRlIGFycmF5cyAoImJ5dGVzIikgYXJlIGRpZmZlcmVudCBhcyB0aGV5IGFyZSBzdG9yZWQgd2l0aG91dCBwYWRkaW5nLAogICAgICAgIC8vIGJ1dCBjYW4gYmUgdHJlYXRlZCBpZGVudGljYWwgdG8gInVpbnQ4W10iCiAgICAgICAgbV9ieXRlRGF0YSA9IGRhdGE7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgNzsgaSsrKQogICAgICAgICAgICBtX2J5dGVEYXRhLnB1c2goKTsKICAgICAgICBtX2J5dGVEYXRhWzNdID0gMHgwODsKICAgICAgICBkZWxldGUgbV9ieXRlRGF0YVsyXTsKICAgIH0KCiAgICBmdW5jdGlvbiBhZGRGbGFnKGJvb2xbMl0gbWVtb3J5IGZsYWcpIHB1YmxpYyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgbV9wYWlyc09mRmxhZ3MucHVzaChmbGFnKTsKICAgICAgICByZXR1cm4gbV9wYWlyc09mRmxhZ3MubGVuZ3RoOwogICAgfQoKICAgIGZ1bmN0aW9uIGNyZWF0ZU1lbW9yeUFycmF5KHVpbnQgc2l6ZSkgcHVibGljIHB1cmUgcmV0dXJucyAoYnl0ZXMgbWVtb3J5KSB7CiAgICAgICAgLy8gRHluYW1pYyBtZW1vcnkgYXJyYXlzIGFyZSBjcmVhdGVkIHVzaW5nIGBuZXdgOgogICAgICAgIHVpbnRbMl1bXSBtZW1vcnkgYXJyYXlPZlBhaXJzID0gbmV3IHVpbnRbMl1bXShzaXplKTsKCiAgICAgICAgLy8gSW5saW5lIGFycmF5cyBhcmUgYWx3YXlzIHN0YXRpY2FsbHktc2l6ZWQgYW5kIGlmIHlvdSBvbmx5CiAgICAgICAgLy8gdXNlIGxpdGVyYWxzLCB5b3UgaGF2ZSB0byBwcm92aWRlIGF0IGxlYXN0IG9uZSB0eXBlLgogICAgICAgIGFycmF5T2ZQYWlyc1swXSA9IFt1aW50KDEpLCAyXTsKCiAgICAgICAgLy8gQ3JlYXRlIGEgZHluYW1pYyBieXRlIGFycmF5OgogICAgICAgIGJ5dGVzIG1lbW9yeSBiID0gbmV3IGJ5dGVzKDIwMCk7CiAgICAgICAgZm9yICh1aW50IGkgPSAwOyBpIDwgYi5sZW5ndGg7IGkrKykKICAgICAgICAgICAgYltpXSA9IGJ5dGVzMSh1aW50OChpKSk7CiAgICAgICAgcmV0dXJuIGI7CiAgICB9Cn0="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.6.0</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span><span class="w"></span>

<span class="k">contract</span><span class="w"> </span><span class="ni">ArrayContract</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint</span><span class="p">[</span><span class="m m-Decimal">2</span><span class="o">**</span><span class="m m-Decimal">20</span><span class="p">]</span><span class="w"> </span>m_aLotOfIntegers<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Note that the following is not a pair of dynamic arrays but a</span>
<span class="w">    </span><span class="c1">// dynamic array of pairs (i.e. of fixed size arrays of length two).</span>
<span class="w">    </span><span class="c1">// Because of that, T[] is always a dynamic array of T, even if T</span>
<span class="w">    </span><span class="c1">// itself is an array.</span>
<span class="w">    </span><span class="c1">// Data location for all state variables is storage.</span>
<span class="w">    </span><span class="kt">bool</span><span class="p">[</span><span class="m m-Decimal">2</span><span class="p">][]</span><span class="w"> </span>m_pairsOfFlags<span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// newPairs is stored in memory - the only possibility</span>
<span class="w">    </span><span class="c1">// for public contract function arguments</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">setAllFlagPairs</span><span class="p">(</span><span class="kt">bool</span><span class="p">[</span><span class="m m-Decimal">2</span><span class="p">][]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>newPairs<span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// assignment to a storage array performs a copy of ``newPairs`` and</span>
<span class="w">        </span><span class="c1">// replaces the complete array ``m_pairsOfFlags``.</span>
<span class="w">        </span>m_pairsOfFlags<span class="w"> </span><span class="o">=</span><span class="w"> </span>newPairs<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">struct</span><span class="w"> </span><span class="nv">StructType</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span>contents<span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">moreInfo</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span>StructType<span class="w"> </span>s<span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">(</span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>c<span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// stores a reference to ``s`` in ``g``</span>
<span class="w">        </span>StructType<span class="w"> </span>storage<span class="w"> </span>g<span class="w"> </span><span class="o">=</span><span class="w"> </span>s<span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="c1">// also changes ``s.moreInfo``.</span>
<span class="w">        </span>g<span class="p">.</span>moreInfo<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">2</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="c1">// assigns a copy because ``g.contents``</span>
<span class="w">        </span><span class="c1">// is not a local variable, but a member of</span>
<span class="w">        </span><span class="c1">// a local variable.</span>
<span class="w">        </span>g<span class="p">.</span>contents<span class="w"> </span><span class="o">=</span><span class="w"> </span>c<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">setFlagPair</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">index</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nv">flagA</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nv">flagB</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// access to a non-existing index will throw an exception</span>
<span class="w">        </span>m_pairsOfFlags<span class="p">[</span>index<span class="p">][</span><span class="m m-Decimal">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>flagA<span class="p">;</span><span class="w"></span>
<span class="w">        </span>m_pairsOfFlags<span class="p">[</span>index<span class="p">][</span><span class="m m-Decimal">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>flagB<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">changeFlagArraySize</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">newSize</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// using push and pop is the only way to change the</span>
<span class="w">        </span><span class="c1">// length of an array</span>
<span class="w">        </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>newSize<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>m_pairsOfFlags<span class="p">.</span>length<span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="kt">while</span><span class="w"> </span><span class="p">(</span>m_pairsOfFlags<span class="p">.</span>length<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span>newSize<span class="p">)</span><span class="w"></span>
<span class="w">                </span>m_pairsOfFlags<span class="p">.</span>pop<span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="kt">else</span><span class="w"> </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>newSize<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span>m_pairsOfFlags<span class="p">.</span>length<span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="kt">while</span><span class="w"> </span><span class="p">(</span>m_pairsOfFlags<span class="p">.</span>length<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>newSize<span class="p">)</span><span class="w"></span>
<span class="w">                </span>m_pairsOfFlags<span class="p">.</span>push<span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">clear</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// these clear the arrays completely</span>
<span class="w">        </span>delete<span class="w"> </span>m_pairsOfFlags<span class="p">;</span><span class="w"></span>
<span class="w">        </span>delete<span class="w"> </span>m_aLotOfIntegers<span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="c1">// identical effect here</span>
<span class="w">        </span>m_pairsOfFlags<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">bool</span><span class="p">[</span><span class="m m-Decimal">2</span><span class="p">][](</span><span class="m m-Decimal">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">m_byteData</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">byteArrays</span><span class="p">(</span><span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>data<span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// byte arrays (&quot;bytes&quot;) are different as they are stored without padding,</span>
<span class="w">        </span><span class="c1">// but can be treated identical to &quot;uint8[]&quot;</span>
<span class="w">        </span>m_byteData<span class="w"> </span><span class="o">=</span><span class="w"> </span>data<span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m m-Decimal">7</span><span class="p">;</span><span class="w"> </span>i<span class="o">++</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span>m_byteData<span class="p">.</span>push<span class="p">();</span><span class="w"></span>
<span class="w">        </span>m_byteData<span class="p">[</span><span class="m m-Decimal">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x08</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span>delete<span class="w"> </span>m_byteData<span class="p">[</span><span class="m m-Decimal">2</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">addFlag</span><span class="p">(</span><span class="kt">bool</span><span class="p">[</span><span class="m m-Decimal">2</span><span class="p">]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>flag<span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span>m_pairsOfFlags<span class="p">.</span>push<span class="p">(</span>flag<span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>m_pairsOfFlags<span class="p">.</span>length<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">createMemoryArray</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">size</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>pure<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Dynamic memory arrays are created using `new`:</span>
<span class="w">        </span><span class="kt">uint</span><span class="p">[</span><span class="m m-Decimal">2</span><span class="p">][]</span><span class="w"> </span><span class="kt">memory</span><span class="w"> </span>arrayOfPairs<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">uint</span><span class="p">[</span><span class="m m-Decimal">2</span><span class="p">][](</span>size<span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Inline arrays are always statically-sized and if you only</span>
<span class="w">        </span><span class="c1">// use literals, you have to provide at least one type.</span>
<span class="w">        </span>arrayOfPairs<span class="p">[</span><span class="m m-Decimal">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="kt">uint</span><span class="p">(</span><span class="m m-Decimal">1</span><span class="p">),</span><span class="w"> </span><span class="m m-Decimal">2</span><span class="p">];</span><span class="w"></span>

<span class="w">        </span><span class="c1">// Create a dynamic byte array:</span>
<span class="w">        </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>b<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span><span class="kt">bytes</span><span class="p">(</span><span class="m m-Decimal">200</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="kt">for</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"> </span>i<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>b<span class="p">.</span>length<span class="p">;</span><span class="w"> </span>i<span class="o">++</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span>b<span class="p">[</span>i<span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>bytes1<span class="p">(</span><span class="kt">uint8</span><span class="p">(</span>i<span class="p">));</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>b<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="array-slices">
<span id="index-22"></span><span id="id26"></span><h3>برش‌های آرایه (Array Slices)<a class="headerlink" href="#array-slices" title="پیوند ثابت به این سر مقاله"></a></h3>
</section>
<section id="translate-id-different-from-the-original">
<h3>// translate id different from the original<a class="headerlink" href="#translate-id-different-from-the-original" title="پیوند ثابت به این سر مقاله"></a></h3>
<blockquote>
<div><p>برش‌های آرایه نمایی از قسمت پیوسته آرایه است. آنها به صورت  x[end - 1] نوشته می‌شوند، جایی
که  startو  endعباراتی هستند که منجر به نوع uint256 می‌شوند (یا به طور ضمنی قابل تبدیل به آن
هستند). اولین عنصر برش  x[start] و آخرین عنصر  x[end - 1]می‌باشد.</p>
</div></blockquote>
<p>Array slices are a view on a contiguous portion of an array.
They are written as <code class="docutils literal notranslate"><span class="pre">x[start:end]</span></code>, where <code class="docutils literal notranslate"><span class="pre">start</span></code> and
<code class="docutils literal notranslate"><span class="pre">end</span></code> are expressions resulting in a uint256 type (or
implicitly convertible to it). The first element of the
slice is <code class="docutils literal notranslate"><span class="pre">x[start]</span></code> and the last element is <code class="docutils literal notranslate"><span class="pre">x[end</span> <span class="pre">-</span> <span class="pre">1]</span></code>.
-----------</p>
<p>اگر  <code class="docutils literal notranslate"><span class="pre">start</span></code> از  <code class="docutils literal notranslate"><span class="pre">end</span></code> بیشتر باشد یا اگر  <code class="docutils literal notranslate"><span class="pre">end</span></code> از طول آرایه بیشتر باشد، یک استثنا ایجاد می‌شود.</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">start</span></code> و  <code class="docutils literal notranslate"><span class="pre">end</span></code> هر دو اختیاری هستند:  <code class="docutils literal notranslate"><span class="pre">start</span></code> به طور پیشفرض <code class="docutils literal notranslate"><span class="pre">0</span></code>  و  <code class="docutils literal notranslate"><span class="pre">end</span></code> به طور پیش فرض به طول آرایه می‌باشد.</p>
</div></blockquote>
<p>برش‌های آرایه هیچ عضوی ندارند. آنها به طور ضمنی قابل تبدیل به آرایه‌هایی از نوع اصلی و دسترسی به index
را پشتیبانی می‌کنند. دسترسی index در آرایه اصلی قطعی نیست، اما وابسته به شروع برش است.</p>
<p>برش‌های آرایه دارای نام نوع نیستند، به این معنی که هیچ متغیری نمی‌تواند برش‌های آرایه‌ای را به عنوان نوع
داشته باشد، آنها فقط در عبارات میانی وجود دارند.</p>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>از هم اکنون، برش‌های آرایه فقط برای آرایه‌های فراخوانی داده پیاده سازی می‌شوند.</p>
</div>
<p>برش‌های آرایه برای رمزگشایی با داده‌های ثانویه ABI که در پارامترهای تابع منتقل می‌شوند مفید هستند:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC44LjUgPDAuOS4wOwpjb250cmFjdCBQcm94eSB7CiAgICAvLy8gQGRldiBBZGRyZXNzIG9mIHRoZSBjbGllbnQgY29udHJhY3QgbWFuYWdlZCBieSBwcm94eSBpLmUuLCB0aGlzIGNvbnRyYWN0CiAgICBhZGRyZXNzIGNsaWVudDsKCiAgICBjb25zdHJ1Y3RvcihhZGRyZXNzIF9jbGllbnQpIHsKICAgICAgICBjbGllbnQgPSBfY2xpZW50OwogICAgfQoKICAgIC8vLyBGb3J3YXJkIGNhbGwgdG8gInNldE93bmVyKGFkZHJlc3MpIiB0aGF0IGlzIGltcGxlbWVudGVkIGJ5IGNsaWVudAogICAgLy8vIGFmdGVyIGRvaW5nIGJhc2ljIHZhbGlkYXRpb24gb24gdGhlIGFkZHJlc3MgYXJndW1lbnQuCiAgICBmdW5jdGlvbiBmb3J3YXJkKGJ5dGVzIGNhbGxkYXRhIF9wYXlsb2FkKSBleHRlcm5hbCB7CiAgICAgICAgYnl0ZXM0IHNpZyA9IGJ5dGVzNChfcGF5bG9hZFs6NF0pOwogICAgICAgIC8vIER1ZSB0byB0cnVuY2F0aW5nIGJlaGF2aW91ciwgYnl0ZXM0KF9wYXlsb2FkKSBwZXJmb3JtcyBpZGVudGljYWxseS4KICAgICAgICAvLyBieXRlczQgc2lnID0gYnl0ZXM0KF9wYXlsb2FkKTsKICAgICAgICBpZiAoc2lnID09IGJ5dGVzNChrZWNjYWsyNTYoInNldE93bmVyKGFkZHJlc3MpIikpKSB7CiAgICAgICAgICAgIGFkZHJlc3Mgb3duZXIgPSBhYmkuZGVjb2RlKF9wYXlsb2FkWzQ6XSwgKGFkZHJlc3MpKTsKICAgICAgICAgICAgcmVxdWlyZShvd25lciAhPSBhZGRyZXNzKDApLCAiQWRkcmVzcyBvZiBvd25lciBjYW5ub3QgYmUgemVyby4iKTsKICAgICAgICB9CiAgICAgICAgKGJvb2wgc3RhdHVzLCkgPSBjbGllbnQuZGVsZWdhdGVjYWxsKF9wYXlsb2FkKTsKICAgICAgICByZXF1aXJlKHN0YXR1cywgIkZvcndhcmRlZCBjYWxsIGZhaWxlZC4iKTsKICAgIH0KfQ=="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.8.5</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span><span class="w"></span>
<span class="k">contract</span><span class="w"> </span><span class="ni">Proxy</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">/// @dev Address of the client contract managed by proxy i.e., this contract</span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">client</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kt">constructor</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">_client</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span>client<span class="w"> </span><span class="o">=</span><span class="w"> </span>_client<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">/// Forward call to &quot;setOwner(address)&quot; that is implemented by client</span>
<span class="w">    </span><span class="c1">/// after doing basic validation on the address argument.</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">forward</span><span class="p">(</span><span class="kt">bytes</span><span class="w"> </span><span class="nv">calldata</span><span class="w"> </span>_payload<span class="p">)</span><span class="w"> </span><span class="kt">external</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span>bytes4<span class="w"> </span>sig<span class="w"> </span><span class="o">=</span><span class="w"> </span>bytes4<span class="p">(</span>_payload<span class="p">[:</span><span class="m m-Decimal">4</span><span class="p">]);</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Due to truncating behaviour, bytes4(_payload) performs identically.</span>
<span class="w">        </span><span class="c1">// bytes4 sig = bytes4(_payload);</span>
<span class="w">        </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>sig<span class="w"> </span><span class="o">==</span><span class="w"> </span>bytes4<span class="p">(</span><span class="nb">keccak256</span><span class="p">(</span><span class="s2">&quot;setOwner(address)&quot;</span><span class="p">)))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="kt">address</span><span class="w"> </span><span class="nv">owner</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>abi<span class="p">.</span>decode<span class="p">(</span>_payload<span class="p">[</span><span class="m m-Decimal">4</span><span class="p">:],</span><span class="w"> </span><span class="p">(</span><span class="kt">address</span><span class="p">));</span><span class="w"></span>
<span class="w">            </span><span class="kt">require</span><span class="p">(</span>owner<span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span><span class="m m-Decimal">0</span><span class="p">),</span><span class="w"> </span><span class="s2">&quot;Address of owner cannot be zero.&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="nv">status</span><span class="p">,)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>client<span class="p">.</span>delegatecall<span class="p">(</span>_payload<span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>status<span class="p">,</span><span class="w"> </span><span class="s2">&quot;Forwarded call failed.&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="struct">
<span id="structs"></span><span id="index-23"></span><h3>Struct‌ها<a class="headerlink" href="#struct" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>سالیدیتی راهی برای تعریف نوع‌های جدید به صورت Struct فراهم می‌کند، که در مثال زیر نشان داده شده است:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC42LjAgPDAuOS4wOwoKLy8gRGVmaW5lcyBhIG5ldyB0eXBlIHdpdGggdHdvIGZpZWxkcy4KLy8gRGVjbGFyaW5nIGEgc3RydWN0IG91dHNpZGUgb2YgYSBjb250cmFjdCBhbGxvd3MKLy8gaXQgdG8gYmUgc2hhcmVkIGJ5IG11bHRpcGxlIGNvbnRyYWN0cy4KLy8gSGVyZSwgdGhpcyBpcyBub3QgcmVhbGx5IG5lZWRlZC4Kc3RydWN0IEZ1bmRlciB7CiAgICBhZGRyZXNzIGFkZHI7CiAgICB1aW50IGFtb3VudDsKfQoKY29udHJhY3QgQ3Jvd2RGdW5kaW5nIHsKICAgIC8vIFN0cnVjdHMgY2FuIGFsc28gYmUgZGVmaW5lZCBpbnNpZGUgY29udHJhY3RzLCB3aGljaCBtYWtlcyB0aGVtCiAgICAvLyB2aXNpYmxlIG9ubHkgdGhlcmUgYW5kIGluIGRlcml2ZWQgY29udHJhY3RzLgogICAgc3RydWN0IENhbXBhaWduIHsKICAgICAgICBhZGRyZXNzIHBheWFibGUgYmVuZWZpY2lhcnk7CiAgICAgICAgdWludCBmdW5kaW5nR29hbDsKICAgICAgICB1aW50IG51bUZ1bmRlcnM7CiAgICAgICAgdWludCBhbW91bnQ7CiAgICAgICAgbWFwcGluZyAodWludCA9PiBGdW5kZXIpIGZ1bmRlcnM7CiAgICB9CgogICAgdWludCBudW1DYW1wYWlnbnM7CiAgICBtYXBwaW5nICh1aW50ID0+IENhbXBhaWduKSBjYW1wYWlnbnM7CgogICAgZnVuY3Rpb24gbmV3Q2FtcGFpZ24oYWRkcmVzcyBwYXlhYmxlIGJlbmVmaWNpYXJ5LCB1aW50IGdvYWwpIHB1YmxpYyByZXR1cm5zICh1aW50IGNhbXBhaWduSUQpIHsKICAgICAgICBjYW1wYWlnbklEID0gbnVtQ2FtcGFpZ25zKys7IC8vIGNhbXBhaWduSUQgaXMgcmV0dXJuIHZhcmlhYmxlCiAgICAgICAgLy8gV2UgY2Fubm90IHVzZSAiY2FtcGFpZ25zW2NhbXBhaWduSURdID0gQ2FtcGFpZ24oYmVuZWZpY2lhcnksIGdvYWwsIDAsIDApIgogICAgICAgIC8vIGJlY2F1c2UgdGhlIHJpZ2h0IGhhbmQgc2lkZSBjcmVhdGVzIGEgbWVtb3J5LXN0cnVjdCAiQ2FtcGFpZ24iIHRoYXQgY29udGFpbnMgYSBtYXBwaW5nLgogICAgICAgIENhbXBhaWduIHN0b3JhZ2UgYyA9IGNhbXBhaWduc1tjYW1wYWlnbklEXTsKICAgICAgICBjLmJlbmVmaWNpYXJ5ID0gYmVuZWZpY2lhcnk7CiAgICAgICAgYy5mdW5kaW5nR29hbCA9IGdvYWw7CiAgICB9CgogICAgZnVuY3Rpb24gY29udHJpYnV0ZSh1aW50IGNhbXBhaWduSUQpIHB1YmxpYyBwYXlhYmxlIHsKICAgICAgICBDYW1wYWlnbiBzdG9yYWdlIGMgPSBjYW1wYWlnbnNbY2FtcGFpZ25JRF07CiAgICAgICAgLy8gQ3JlYXRlcyBhIG5ldyB0ZW1wb3JhcnkgbWVtb3J5IHN0cnVjdCwgaW5pdGlhbGlzZWQgd2l0aCB0aGUgZ2l2ZW4gdmFsdWVzCiAgICAgICAgLy8gYW5kIGNvcGllcyBpdCBvdmVyIHRvIHN0b3JhZ2UuCiAgICAgICAgLy8gTm90ZSB0aGF0IHlvdSBjYW4gYWxzbyB1c2UgRnVuZGVyKG1zZy5zZW5kZXIsIG1zZy52YWx1ZSkgdG8gaW5pdGlhbGlzZS4KICAgICAgICBjLmZ1bmRlcnNbYy5udW1GdW5kZXJzKytdID0gRnVuZGVyKHthZGRyOiBtc2cuc2VuZGVyLCBhbW91bnQ6IG1zZy52YWx1ZX0pOwogICAgICAgIGMuYW1vdW50ICs9IG1zZy52YWx1ZTsKICAgIH0KCiAgICBmdW5jdGlvbiBjaGVja0dvYWxSZWFjaGVkKHVpbnQgY2FtcGFpZ25JRCkgcHVibGljIHJldHVybnMgKGJvb2wgcmVhY2hlZCkgewogICAgICAgIENhbXBhaWduIHN0b3JhZ2UgYyA9IGNhbXBhaWduc1tjYW1wYWlnbklEXTsKICAgICAgICBpZiAoYy5hbW91bnQgPCBjLmZ1bmRpbmdHb2FsKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgdWludCBhbW91bnQgPSBjLmFtb3VudDsKICAgICAgICBjLmFtb3VudCA9IDA7CiAgICAgICAgYy5iZW5lZmljaWFyeS50cmFuc2ZlcihhbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9"><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.6.0</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span><span class="w"></span>

<span class="c1">// Defines a new type with two fields.</span>
<span class="c1">// Declaring a struct outside of a contract allows</span>
<span class="c1">// it to be shared by multiple contracts.</span>
<span class="c1">// Here, this is not really needed.</span>
<span class="kt">struct</span><span class="w"> </span><span class="nv">Funder</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">address</span><span class="w"> </span><span class="nv">addr</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="nv">amount</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">contract</span><span class="w"> </span><span class="ni">CrowdFunding</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Structs can also be defined inside contracts, which makes them</span>
<span class="w">    </span><span class="c1">// visible only there and in derived contracts.</span>
<span class="w">    </span><span class="kt">struct</span><span class="w"> </span><span class="nv">Campaign</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">address</span><span class="w"> </span><span class="nv">payable</span><span class="w"> </span>beneficiary<span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">fundingGoal</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">numFunders</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">amount</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">mapping</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>Funder<span class="p">)</span><span class="w"> </span>funders<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="nv">numCampaigns</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">mapping</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>Campaign<span class="p">)</span><span class="w"> </span>campaigns<span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">newCampaign</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">payable</span><span class="w"> </span>beneficiary<span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">goal</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">campaignID</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span>campaignID<span class="w"> </span><span class="o">=</span><span class="w"> </span>numCampaigns<span class="o">++</span><span class="p">;</span><span class="w"> </span><span class="c1">// campaignID is return variable</span>
<span class="w">        </span><span class="c1">// We cannot use &quot;campaigns[campaignID] = Campaign(beneficiary, goal, 0, 0)&quot;</span>
<span class="w">        </span><span class="c1">// because the right hand side creates a memory-struct &quot;Campaign&quot; that contains a mapping.</span>
<span class="w">        </span>Campaign<span class="w"> </span>storage<span class="w"> </span>c<span class="w"> </span><span class="o">=</span><span class="w"> </span>campaigns<span class="p">[</span>campaignID<span class="p">];</span><span class="w"></span>
<span class="w">        </span>c<span class="p">.</span>beneficiary<span class="w"> </span><span class="o">=</span><span class="w"> </span>beneficiary<span class="p">;</span><span class="w"></span>
<span class="w">        </span>c<span class="p">.</span>fundingGoal<span class="w"> </span><span class="o">=</span><span class="w"> </span>goal<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">contribute</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">campaignID</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">payable</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span>Campaign<span class="w"> </span>storage<span class="w"> </span>c<span class="w"> </span><span class="o">=</span><span class="w"> </span>campaigns<span class="p">[</span>campaignID<span class="p">];</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Creates a new temporary memory struct, initialised with the given values</span>
<span class="w">        </span><span class="c1">// and copies it over to storage.</span>
<span class="w">        </span><span class="c1">// Note that you can also use Funder(msg.sender, msg.value) to initialise.</span>
<span class="w">        </span>c<span class="p">.</span>funders<span class="p">[</span>c<span class="p">.</span>numFunders<span class="o">++</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>Funder<span class="p">({</span>addr<span class="p">:</span><span class="w"> </span><span class="k">msg.sender</span><span class="p">,</span><span class="w"> </span>amount<span class="p">:</span><span class="w"> </span><span class="k">msg.value</span><span class="p">});</span><span class="w"></span>
<span class="w">        </span>c<span class="p">.</span>amount<span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">msg.value</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">checkGoalReached</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">campaignID</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="nv">reached</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span>Campaign<span class="w"> </span>storage<span class="w"> </span>c<span class="w"> </span><span class="o">=</span><span class="w"> </span>campaigns<span class="p">[</span>campaignID<span class="p">];</span><span class="w"></span>
<span class="w">        </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>c<span class="p">.</span>amount<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>c<span class="p">.</span>fundingGoal<span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="kt">return</span><span class="w"> </span><span class="kt">false</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">amount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>c<span class="p">.</span>amount<span class="p">;</span><span class="w"></span>
<span class="w">        </span>c<span class="p">.</span>amount<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span>c<span class="p">.</span>beneficiary<span class="p">.</span>transfer<span class="p">(</span>amount<span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span><span class="kt">true</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>این قرارداد عملکرد کامل قرارداد سرمایه گذاری جمعی را فراهم نمی‌کند، اما شامل مفاهیم پایه‌ای لازم برای درک
structها است. نوع structها را می‌توان در داخل ن
mappingها و آرایه‌ها استفاده کرد و خود آنها می‌توانند شامل
mappingها و آرایه‌ها باشند.</p>
<p>ممکن است یک struct  از یک نوع خود عضو داشته باشد، اگرچه struct  می‌تواند مقدار نوع یک عضو از
mapping باشد یا می ‌واند شامل یک آرایه به اندازه پویا از نوع خود باشد. این محدودیت لازم است، زیرا اندازه ساختار باید محدود باشد.</p>
<p>توجه داشته باشید که چگونه در همه توابع، یک نوع struct به یک متغیر محلی با  <code class="docutils literal notranslate"><span class="pre">storage</span></code> مکان داده
اختصاص داده می‌شود. این کار struct را کپی نمی‌کند بلکه فقط یک مرجع را ذخیره می‌کند، در حقیقت تا
انتسابات به اعضای متغیر محلی  در حالت  نوشته شود.</p>
<p>البته می‌توانید بدون اختصاص دادن به متغیر محلی، مستقیماً به اعضای struct دسترسی پیدا کنید، مانند
در  <code class="docutils literal notranslate"><span class="pre">campaigns[campaignID].amount</span> <span class="pre">=</span> <span class="pre">0</span></code> .</p>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<blockquote>
<div><p>تا سالیدیتی نسخه 0.7.0 ، memory-structs که شامل اعضای نوع‌های storage-only هستند (به</p>
</div></blockquote>
<p>عنوان مثال mappingها)، مجاز بودند و انتساباتی مانند <code class="docutils literal notranslate"><span class="pre">campaigns[campaignID]</span> <span class="pre">=</span> <span class="pre">Campaign(beneficiary,</span> <span class="pre">goal,</span> <span class="pre">0,</span> <span class="pre">0)</span></code> )  در مثال بالا کار می‌کند و فقط در
silently از آن اعضا صرف نظر می‌کند.</p>
</div>
</section>
</section>
<section id="mapping-types">
<span id="index-24"></span><span id="id27"></span><h2>انواع  نگاشت‌ها (Mapping Types)<a class="headerlink" href="#mapping-types" title="پیوند ثابت به این سر مقاله"></a></h2>
<p>نوع‌های نگاشت از سینتکس  <code class="docutils literal notranslate"><span class="pre">mapping(_KeyType</span> <span class="pre">=&gt;</span> <span class="pre">_ValueType)</span></code> استفاده می‌کنند و
متغیرهای نوع نگاشت با استفاده از سینتکس
<code class="docutils literal notranslate"><span class="pre">mapping(_KeyType</span> <span class="pre">=&gt;</span> <span class="pre">_ValueType)</span> <span class="pre">_VariableName</span></code>  مشخص می‌شوند. <code class="docutils literal notranslate"><span class="pre">KeyType_</span></code> می‌تواند هر نوع مقدار داخلی،  <code class="docutils literal notranslate"><span class="pre">bytes</span></code> ،  <code class="docutils literal notranslate"><span class="pre">string</span></code> یا هر نوع قرارداد یا enum
باشد. سایر نوع‌های پیچیده یا تعریف شده توسط کاربر، مانند نگاشت یا (mapping)‌، struct‌ها یا انواع آرایه مجاز نیستند. <code class="docutils literal notranslate"><span class="pre">ValueType_</span></code>  می‌تواند هر نوعی باشد، از جمله نگاشت‌ها، آرایه‌ها و struct‌ها.</p>
<p>می‌‍‌‌‌‌توانید نگاشت‍‌ها را به صورت  <a class="reference external" href="https://en.wikipedia.org/wiki/Hash_table">جداول هش</a>  در نظر بگیرید که عملاً مقداردهی اولیه می‌شوند به گونه ای که هر
کلید ممکن وجود دارد و به مقداری نگاشت می‌شود که پیش نمایش بایت همه‌ی آن صفر می‌باشند، یک نوع <a class="reference internal" href="control-structures.html#default-value"><span class="std std-ref">مقدار پیش فرض</span></a> . شباهت در اینجا پایان می‌یابد، داده‌های کلیدی در نگاشت ذخیره نمی‌شوند، فقط از هش  <code class="docutils literal notranslate"><span class="pre">keccak256</span></code> برای جستجوی مقدار استفاده می‌شود.</p>
<p>به همین دلیل، نگاشت‌ها طول یا مفهومی از کلید یا مقدار تنظیم شده ندارند و بنابراین بدون اطلاعات اضافی در مورد کلیدهای اختصاص داده شده پاک نمی‌شوند (به قسمت <a class="reference internal" href="security-considerations.html#clearing-mappings"><span class="std std-ref">Clearing Mappings</span></a> مراجعه کنید).</p>
<p>نگاشت‌ها فقط می‌توانند یک مکان داده از  <code class="docutils literal notranslate"><span class="pre">storage</span></code> را داشته باشند و بنابراین برای متغیرهای حالت، به
عنوان نوع‌های مرجع storage  در توابع، یا به عنوان پارامترهای توابع کتابخانه مجاز هستند. آنها نمی‌توانند به
عنوان پارامترها یا پارامترهای بازگشتی توابع قرارداد که در معرض دید عموم قرار دارند، مورد استفاده قرار گیرند.
این محدودیت‌ها برای آرایه‌ها و struct‌های حاوی نگاشت نیز صادق است.</p>
<p>شما می‌توانید متغیرهای حالت از نوع نگاشت را به صورت  <code class="docutils literal notranslate"><span class="pre">public</span></code> علامت گذاری کنید و سالیدیتی یک
گیرنده (<a class="reference internal" href="contracts.html#visibility-and-getters"><span class="std std-ref">getter</span></a>) برای شما ایجاد می‌کند.  <code class="docutils literal notranslate"><span class="pre">KeyType_</span></code> به یک پارامتر برای getter  تبدیل می‌شود.
اگر  <code class="docutils literal notranslate"><span class="pre">ValueType_</span></code> یک مقدار نوع یا یک  struct  باشد، گیتر  <code class="docutils literal notranslate"><span class="pre">ValueType_</span></code> را برمی‌گرداند.
اگر  <code class="docutils literal notranslate"><span class="pre">ValueType_</span></code> یک آرایه یا نگاشت باشد، getter به صورت بازگشتی برای هر  <code class="docutils literal notranslate"><span class="pre">KeyType_</span></code> یک
پارامتر دارد.</p>
<p>در مثال زیر، قرارداد  <code class="docutils literal notranslate"><span class="pre">MappingExample</span></code> یک نگاشت از  <code class="docutils literal notranslate"><span class="pre">balances</span></code> عمومی را تعریف می‎کند، با نوع
کلید یک   <code class="docutils literal notranslate"><span class="pre">address</span></code> و یک نوع مقدار یک  <code class="docutils literal notranslate"><span class="pre">uint</span></code> ، و یک آدرس اتریوم را به یک مقدار صحیح بدون علامت
نگاشت می‌کند. از آنجا که  <code class="docutils literal notranslate"><span class="pre">uint</span></code> یک نوع مقدار است، گیرنده مقداری را متناسب با نوع آن برمی‌گرداند که
می‌توانید آن را در قرارداد  <code class="docutils literal notranslate"><span class="pre">MappingUser</span></code> مشاهده کنید که مقدار را در آدرس مشخص شده برمی‌گرداند.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC40LjAgPDAuOS4wOwoKY29udHJhY3QgTWFwcGluZ0V4YW1wbGUgewogICAgbWFwcGluZyhhZGRyZXNzID0+IHVpbnQpIHB1YmxpYyBiYWxhbmNlczsKCiAgICBmdW5jdGlvbiB1cGRhdGUodWludCBuZXdCYWxhbmNlKSBwdWJsaWMgewogICAgICAgIGJhbGFuY2VzW21zZy5zZW5kZXJdID0gbmV3QmFsYW5jZTsKICAgIH0KfQoKY29udHJhY3QgTWFwcGluZ1VzZXIgewogICAgZnVuY3Rpb24gZigpIHB1YmxpYyByZXR1cm5zICh1aW50KSB7CiAgICAgICAgTWFwcGluZ0V4YW1wbGUgbSA9IG5ldyBNYXBwaW5nRXhhbXBsZSgpOwogICAgICAgIG0udXBkYXRlKDEwMCk7CiAgICAgICAgcmV0dXJuIG0uYmFsYW5jZXMoYWRkcmVzcyh0aGlzKSk7CiAgICB9Cn0="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.4.0</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span><span class="w"></span>

<span class="k">contract</span><span class="w"> </span><span class="ni">MappingExample</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">mapping</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>balances<span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">update</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">newBalance</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span>balances<span class="p">[</span><span class="k">msg.sender</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>newBalance<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">contract</span><span class="w"> </span><span class="ni">MappingUser</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span>MappingExample<span class="w"> </span>m<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">new</span><span class="w"> </span>MappingExample<span class="p">();</span><span class="w"></span>
<span class="w">        </span>m<span class="p">.</span>update<span class="p">(</span><span class="m m-Decimal">100</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>m<span class="p">.</span>balances<span class="p">(</span><span class="kt">address</span><span class="p">(</span><span class="kt">this</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>مثال زیر یک نسخه ساده از توکن <a class="reference external" href="https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/token/ERC20/ERC20.sol">ERC20 token</a> است.  <code class="docutils literal notranslate"><span class="pre">_allowances</span></code> نمونه‌ای از نوع نگاشت در داخل نوع
نگاشت دیگر است. مثال زیر از <code class="docutils literal notranslate"><span class="pre">_allowances</span></code> برای ثبت مبلغی که شخص دیگری مجاز به برداشت از
حساب شما است استفاده می‌کند.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC40LjIyIDwwLjkuMDsKCmNvbnRyYWN0IE1hcHBpbmdFeGFtcGxlIHsKCiAgICBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpIHByaXZhdGUgX2JhbGFuY2VzOwogICAgbWFwcGluZyAoYWRkcmVzcyA9PiBtYXBwaW5nIChhZGRyZXNzID0+IHVpbnQyNTYpKSBwcml2YXRlIF9hbGxvd2FuY2VzOwoKICAgIGV2ZW50IFRyYW5zZmVyKGFkZHJlc3MgaW5kZXhlZCBmcm9tLCBhZGRyZXNzIGluZGV4ZWQgdG8sIHVpbnQyNTYgdmFsdWUpOwogICAgZXZlbnQgQXBwcm92YWwoYWRkcmVzcyBpbmRleGVkIG93bmVyLCBhZGRyZXNzIGluZGV4ZWQgc3BlbmRlciwgdWludDI1NiB2YWx1ZSk7CgogICAgZnVuY3Rpb24gYWxsb3dhbmNlKGFkZHJlc3Mgb3duZXIsIGFkZHJlc3Mgc3BlbmRlcikgcHVibGljIHZpZXcgcmV0dXJucyAodWludDI1NikgewogICAgICAgIHJldHVybiBfYWxsb3dhbmNlc1tvd25lcl1bc3BlbmRlcl07CiAgICB9CgogICAgZnVuY3Rpb24gdHJhbnNmZXJGcm9tKGFkZHJlc3Mgc2VuZGVyLCBhZGRyZXNzIHJlY2lwaWVudCwgdWludDI1NiBhbW91bnQpIHB1YmxpYyByZXR1cm5zIChib29sKSB7CiAgICAgICAgX3RyYW5zZmVyKHNlbmRlciwgcmVjaXBpZW50LCBhbW91bnQpOwogICAgICAgIGFwcHJvdmUoc2VuZGVyLCBtc2cuc2VuZGVyLCBhbW91bnQpOwogICAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGZ1bmN0aW9uIGFwcHJvdmUoYWRkcmVzcyBvd25lciwgYWRkcmVzcyBzcGVuZGVyLCB1aW50MjU2IGFtb3VudCkgcHVibGljIHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXF1aXJlKG93bmVyICE9IGFkZHJlc3MoMCksICJFUkMyMDogYXBwcm92ZSBmcm9tIHRoZSB6ZXJvIGFkZHJlc3MiKTsKICAgICAgICByZXF1aXJlKHNwZW5kZXIgIT0gYWRkcmVzcygwKSwgIkVSQzIwOiBhcHByb3ZlIHRvIHRoZSB6ZXJvIGFkZHJlc3MiKTsKCiAgICAgICAgX2FsbG93YW5jZXNbb3duZXJdW3NwZW5kZXJdID0gYW1vdW50OwogICAgICAgIGVtaXQgQXBwcm92YWwob3duZXIsIHNwZW5kZXIsIGFtb3VudCk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgZnVuY3Rpb24gX3RyYW5zZmVyKGFkZHJlc3Mgc2VuZGVyLCBhZGRyZXNzIHJlY2lwaWVudCwgdWludDI1NiBhbW91bnQpIGludGVybmFsIHsKICAgICAgICByZXF1aXJlKHNlbmRlciAhPSBhZGRyZXNzKDApLCAiRVJDMjA6IHRyYW5zZmVyIGZyb20gdGhlIHplcm8gYWRkcmVzcyIpOwogICAgICAgIHJlcXVpcmUocmVjaXBpZW50ICE9IGFkZHJlc3MoMCksICJFUkMyMDogdHJhbnNmZXIgdG8gdGhlIHplcm8gYWRkcmVzcyIpOwoKICAgICAgICBfYmFsYW5jZXNbc2VuZGVyXSAtPSBhbW91bnQ7CiAgICAgICAgX2JhbGFuY2VzW3JlY2lwaWVudF0gKz0gYW1vdW50OwogICAgICAgIGVtaXQgVHJhbnNmZXIoc2VuZGVyLCByZWNpcGllbnQsIGFtb3VudCk7CiAgICB9Cn0="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.4.22</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span><span class="w"></span>

<span class="k">contract</span><span class="w"> </span><span class="ni">MappingExample</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="kt">mapping</span><span class="w"> </span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">uint256</span><span class="p">)</span><span class="w"> </span><span class="kt">private</span><span class="w"> </span>_balances<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">mapping</span><span class="w"> </span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">mapping</span><span class="w"> </span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="kt">uint256</span><span class="p">))</span><span class="w"> </span><span class="kt">private</span><span class="w"> </span>_allowances<span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kt">event</span><span class="w"> </span><span class="nv">Transfer</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>from<span class="p">,</span><span class="w"> </span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>to<span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">value</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kt">event</span><span class="w"> </span><span class="nv">Approval</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>owner<span class="p">,</span><span class="w"> </span><span class="kt">address</span><span class="w"> </span><span class="nv">indexed</span><span class="w"> </span>spender<span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">value</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">allowance</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">owner</span><span class="p">,</span><span class="w"> </span><span class="kt">address</span><span class="w"> </span><span class="nv">spender</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint256</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>_allowances<span class="p">[</span>owner<span class="p">][</span>spender<span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">transferFrom</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">sender</span><span class="p">,</span><span class="w"> </span><span class="kt">address</span><span class="w"> </span><span class="nv">recipient</span><span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">amount</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span>_transfer<span class="p">(</span>sender<span class="p">,</span><span class="w"> </span>recipient<span class="p">,</span><span class="w"> </span>amount<span class="p">);</span><span class="w"></span>
<span class="w">        </span>approve<span class="p">(</span>sender<span class="p">,</span><span class="w"> </span><span class="k">msg.sender</span><span class="p">,</span><span class="w"> </span>amount<span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span><span class="kt">true</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">approve</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">owner</span><span class="p">,</span><span class="w"> </span><span class="kt">address</span><span class="w"> </span><span class="nv">spender</span><span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">amount</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>owner<span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span><span class="m m-Decimal">0</span><span class="p">),</span><span class="w"> </span><span class="s2">&quot;ERC20: approve from the zero address&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>spender<span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span><span class="m m-Decimal">0</span><span class="p">),</span><span class="w"> </span><span class="s2">&quot;ERC20: approve to the zero address&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span>_allowances<span class="p">[</span>owner<span class="p">][</span>spender<span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>amount<span class="p">;</span><span class="w"></span>
<span class="w">        </span>emit<span class="w"> </span>Approval<span class="p">(</span>owner<span class="p">,</span><span class="w"> </span>spender<span class="p">,</span><span class="w"> </span>amount<span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span><span class="kt">true</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">_transfer</span><span class="p">(</span><span class="kt">address</span><span class="w"> </span><span class="nv">sender</span><span class="p">,</span><span class="w"> </span><span class="kt">address</span><span class="w"> </span><span class="nv">recipient</span><span class="p">,</span><span class="w"> </span><span class="kt">uint256</span><span class="w"> </span><span class="nv">amount</span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>sender<span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span><span class="m m-Decimal">0</span><span class="p">),</span><span class="w"> </span><span class="s2">&quot;ERC20: transfer from the zero address&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>recipient<span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kt">address</span><span class="p">(</span><span class="m m-Decimal">0</span><span class="p">),</span><span class="w"> </span><span class="s2">&quot;ERC20: transfer to the zero address&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span>_balances<span class="p">[</span>sender<span class="p">]</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span>amount<span class="p">;</span><span class="w"></span>
<span class="w">        </span>_balances<span class="p">[</span>recipient<span class="p">]</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span>amount<span class="p">;</span><span class="w"></span>
<span class="w">        </span>emit<span class="w"> </span>Transfer<span class="p">(</span>sender<span class="p">,</span><span class="w"> </span>recipient<span class="p">,</span><span class="w"> </span>amount<span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<section id="iterable-mappings">
<span id="index-25"></span><span id="id29"></span><h3>نگاشت های تکرارپذیر<a class="headerlink" href="#iterable-mappings" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>نمی‌توانید بر روی نگاشت‌ها تکرار کنید، یعنی نمی‌توانید کلیدهای آنها را بشمارید.گرچند امکان اجرای یک
ساختار داده در بالای آنها و تکرار آن وجود دارد. به عنوان مثال، کد زیر یک
کتابخانه  <code class="docutils literal notranslate"><span class="pre">IterableMapping</span></code> را پیاده سازی می‌کند که قرارداد <code class="docutils literal notranslate"><span class="pre">User</span></code> سپس داده‌ها را نیز اضافه
می‌کند و تابع <code class="docutils literal notranslate"><span class="pre">sum</span></code> تکرار می‌شود تا تمام مقادیر را جمع کند.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC42LjggPDAuOS4wOwoKc3RydWN0IEluZGV4VmFsdWUgeyB1aW50IGtleUluZGV4OyB1aW50IHZhbHVlOyB9CnN0cnVjdCBLZXlGbGFnIHsgdWludCBrZXk7IGJvb2wgZGVsZXRlZDsgfQoKc3RydWN0IGl0bWFwIHsKICAgIG1hcHBpbmcodWludCA9PiBJbmRleFZhbHVlKSBkYXRhOwogICAgS2V5RmxhZ1tdIGtleXM7CiAgICB1aW50IHNpemU7Cn0KCmxpYnJhcnkgSXRlcmFibGVNYXBwaW5nIHsKICAgIGZ1bmN0aW9uIGluc2VydChpdG1hcCBzdG9yYWdlIHNlbGYsIHVpbnQga2V5LCB1aW50IHZhbHVlKSBpbnRlcm5hbCByZXR1cm5zIChib29sIHJlcGxhY2VkKSB7CiAgICAgICAgdWludCBrZXlJbmRleCA9IHNlbGYuZGF0YVtrZXldLmtleUluZGV4OwogICAgICAgIHNlbGYuZGF0YVtrZXldLnZhbHVlID0gdmFsdWU7CiAgICAgICAgaWYgKGtleUluZGV4ID4gMCkKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIGtleUluZGV4ID0gc2VsZi5rZXlzLmxlbmd0aDsKICAgICAgICAgICAgc2VsZi5rZXlzLnB1c2goKTsKICAgICAgICAgICAgc2VsZi5kYXRhW2tleV0ua2V5SW5kZXggPSBrZXlJbmRleCArIDE7CiAgICAgICAgICAgIHNlbGYua2V5c1trZXlJbmRleF0ua2V5ID0ga2V5OwogICAgICAgICAgICBzZWxmLnNpemUrKzsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiByZW1vdmUoaXRtYXAgc3RvcmFnZSBzZWxmLCB1aW50IGtleSkgaW50ZXJuYWwgcmV0dXJucyAoYm9vbCBzdWNjZXNzKSB7CiAgICAgICAgdWludCBrZXlJbmRleCA9IHNlbGYuZGF0YVtrZXldLmtleUluZGV4OwogICAgICAgIGlmIChrZXlJbmRleCA9PSAwKQogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgZGVsZXRlIHNlbGYuZGF0YVtrZXldOwogICAgICAgIHNlbGYua2V5c1trZXlJbmRleCAtIDFdLmRlbGV0ZWQgPSB0cnVlOwogICAgICAgIHNlbGYuc2l6ZSAtLTsKICAgIH0KCiAgICBmdW5jdGlvbiBjb250YWlucyhpdG1hcCBzdG9yYWdlIHNlbGYsIHVpbnQga2V5KSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKGJvb2wpIHsKICAgICAgICByZXR1cm4gc2VsZi5kYXRhW2tleV0ua2V5SW5kZXggPiAwOwogICAgfQoKICAgIGZ1bmN0aW9uIGl0ZXJhdGVfc3RhcnQoaXRtYXAgc3RvcmFnZSBzZWxmKSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQga2V5SW5kZXgpIHsKICAgICAgICByZXR1cm4gaXRlcmF0ZV9uZXh0KHNlbGYsIHR5cGUodWludCkubWF4KTsKICAgIH0KCiAgICBmdW5jdGlvbiBpdGVyYXRlX3ZhbGlkKGl0bWFwIHN0b3JhZ2Ugc2VsZiwgdWludCBrZXlJbmRleCkgaW50ZXJuYWwgdmlldyByZXR1cm5zIChib29sKSB7CiAgICAgICAgcmV0dXJuIGtleUluZGV4IDwgc2VsZi5rZXlzLmxlbmd0aDsKICAgIH0KCiAgICBmdW5jdGlvbiBpdGVyYXRlX25leHQoaXRtYXAgc3RvcmFnZSBzZWxmLCB1aW50IGtleUluZGV4KSBpbnRlcm5hbCB2aWV3IHJldHVybnMgKHVpbnQgcl9rZXlJbmRleCkgewogICAgICAgIGtleUluZGV4Kys7CiAgICAgICAgd2hpbGUgKGtleUluZGV4IDwgc2VsZi5rZXlzLmxlbmd0aCAmJiBzZWxmLmtleXNba2V5SW5kZXhdLmRlbGV0ZWQpCiAgICAgICAgICAgIGtleUluZGV4Kys7CiAgICAgICAgcmV0dXJuIGtleUluZGV4OwogICAgfQoKICAgIGZ1bmN0aW9uIGl0ZXJhdGVfZ2V0KGl0bWFwIHN0b3JhZ2Ugc2VsZiwgdWludCBrZXlJbmRleCkgaW50ZXJuYWwgdmlldyByZXR1cm5zICh1aW50IGtleSwgdWludCB2YWx1ZSkgewogICAgICAgIGtleSA9IHNlbGYua2V5c1trZXlJbmRleF0ua2V5OwogICAgICAgIHZhbHVlID0gc2VsZi5kYXRhW2tleV0udmFsdWU7CiAgICB9Cn0KCi8vIEhvdyB0byB1c2UgaXQKY29udHJhY3QgVXNlciB7CiAgICAvLyBKdXN0IGEgc3RydWN0IGhvbGRpbmcgb3VyIGRhdGEuCiAgICBpdG1hcCBkYXRhOwogICAgLy8gQXBwbHkgbGlicmFyeSBmdW5jdGlvbnMgdG8gdGhlIGRhdGEgdHlwZS4KICAgIHVzaW5nIEl0ZXJhYmxlTWFwcGluZyBmb3IgaXRtYXA7CgogICAgLy8gSW5zZXJ0IHNvbWV0aGluZwogICAgZnVuY3Rpb24gaW5zZXJ0KHVpbnQgaywgdWludCB2KSBwdWJsaWMgcmV0dXJucyAodWludCBzaXplKSB7CiAgICAgICAgLy8gVGhpcyBjYWxscyBJdGVyYWJsZU1hcHBpbmcuaW5zZXJ0KGRhdGEsIGssIHYpCiAgICAgICAgZGF0YS5pbnNlcnQoaywgdik7CiAgICAgICAgLy8gV2UgY2FuIHN0aWxsIGFjY2VzcyBtZW1iZXJzIG9mIHRoZSBzdHJ1Y3QsCiAgICAgICAgLy8gYnV0IHdlIHNob3VsZCB0YWtlIGNhcmUgbm90IHRvIG1lc3Mgd2l0aCB0aGVtLgogICAgICAgIHJldHVybiBkYXRhLnNpemU7CiAgICB9CgogICAgLy8gQ29tcHV0ZXMgdGhlIHN1bSBvZiBhbGwgc3RvcmVkIGRhdGEuCiAgICBmdW5jdGlvbiBzdW0oKSBwdWJsaWMgdmlldyByZXR1cm5zICh1aW50IHMpIHsKICAgICAgICBmb3IgKAogICAgICAgICAgICB1aW50IGkgPSBkYXRhLml0ZXJhdGVfc3RhcnQoKTsKICAgICAgICAgICAgZGF0YS5pdGVyYXRlX3ZhbGlkKGkpOwogICAgICAgICAgICBpID0gZGF0YS5pdGVyYXRlX25leHQoaSkKICAgICAgICApIHsKICAgICAgICAgICAgKCwgdWludCB2YWx1ZSkgPSBkYXRhLml0ZXJhdGVfZ2V0KGkpOwogICAgICAgICAgICBzICs9IHZhbHVlOwogICAgICAgIH0KICAgIH0KfQ=="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.6.8</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span><span class="w"></span>

<span class="kt">struct</span><span class="w"> </span><span class="nv">IndexValue</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">keyIndex</span><span class="p">;</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">value</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="kt">struct</span><span class="w"> </span><span class="nv">KeyFlag</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">key</span><span class="p">;</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="nv">deleted</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="kt">struct</span><span class="w"> </span><span class="nv">itmap</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">mapping</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span>IndexValue<span class="p">)</span><span class="w"> </span>data<span class="p">;</span><span class="w"></span>
<span class="w">    </span>KeyFlag<span class="p">[]</span><span class="w"> </span>keys<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="nv">size</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kt">library</span><span class="w"> </span>IterableMapping<span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">insert</span><span class="p">(</span>itmap<span class="w"> </span>storage<span class="w"> </span>self<span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">key</span><span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">value</span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="nv">replaced</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">keyIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>self<span class="p">.</span>data<span class="p">[</span>key<span class="p">].</span>keyIndex<span class="p">;</span><span class="w"></span>
<span class="w">        </span>self<span class="p">.</span>data<span class="p">[</span>key<span class="p">].</span>value<span class="w"> </span><span class="o">=</span><span class="w"> </span>value<span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>keyIndex<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="kt">return</span><span class="w"> </span><span class="kt">true</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span>keyIndex<span class="w"> </span><span class="o">=</span><span class="w"> </span>self<span class="p">.</span>keys<span class="p">.</span>length<span class="p">;</span><span class="w"></span>
<span class="w">            </span>self<span class="p">.</span>keys<span class="p">.</span>push<span class="p">();</span><span class="w"></span>
<span class="w">            </span>self<span class="p">.</span>data<span class="p">[</span>key<span class="p">].</span>keyIndex<span class="w"> </span><span class="o">=</span><span class="w"> </span>keyIndex<span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span>self<span class="p">.</span>keys<span class="p">[</span>keyIndex<span class="p">].</span>key<span class="w"> </span><span class="o">=</span><span class="w"> </span>key<span class="p">;</span><span class="w"></span>
<span class="w">            </span>self<span class="p">.</span>size<span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="w">            </span><span class="kt">return</span><span class="w"> </span><span class="kt">false</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">remove</span><span class="p">(</span>itmap<span class="w"> </span>storage<span class="w"> </span>self<span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">key</span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="w"> </span><span class="nv">success</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">keyIndex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>self<span class="p">.</span>data<span class="p">[</span>key<span class="p">].</span>keyIndex<span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">if</span><span class="w"> </span><span class="p">(</span>keyIndex<span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="kt">return</span><span class="w"> </span><span class="kt">false</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span>delete<span class="w"> </span>self<span class="p">.</span>data<span class="p">[</span>key<span class="p">];</span><span class="w"></span>
<span class="w">        </span>self<span class="p">.</span>keys<span class="p">[</span>keyIndex<span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m m-Decimal">1</span><span class="p">].</span>deleted<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">true</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span>self<span class="p">.</span>size<span class="w"> </span><span class="o">--</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">contains</span><span class="p">(</span>itmap<span class="w"> </span>storage<span class="w"> </span>self<span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">key</span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>self<span class="p">.</span>data<span class="p">[</span>key<span class="p">].</span>keyIndex<span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">iterate_start</span><span class="p">(</span>itmap<span class="w"> </span>storage<span class="w"> </span>self<span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">keyIndex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>iterate_next<span class="p">(</span>self<span class="p">,</span><span class="w"> </span>type<span class="p">(</span><span class="kt">uint</span><span class="p">).</span>max<span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">iterate_valid</span><span class="p">(</span>itmap<span class="w"> </span>storage<span class="w"> </span>self<span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">keyIndex</span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>keyIndex<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>self<span class="p">.</span>keys<span class="p">.</span>length<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">iterate_next</span><span class="p">(</span>itmap<span class="w"> </span>storage<span class="w"> </span>self<span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">keyIndex</span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">r_keyIndex</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span>keyIndex<span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">while</span><span class="w"> </span><span class="p">(</span>keyIndex<span class="w"> </span><span class="o">&lt;</span><span class="w"> </span>self<span class="p">.</span>keys<span class="p">.</span>length<span class="w"> </span><span class="err">&amp;&amp;</span><span class="w"> </span>self<span class="p">.</span>keys<span class="p">[</span>keyIndex<span class="p">].</span>deleted<span class="p">)</span><span class="w"></span>
<span class="w">            </span>keyIndex<span class="o">++</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>keyIndex<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">iterate_get</span><span class="p">(</span>itmap<span class="w"> </span>storage<span class="w"> </span>self<span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">keyIndex</span><span class="p">)</span><span class="w"> </span><span class="kt">internal</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">key</span><span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">value</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span>key<span class="w"> </span><span class="o">=</span><span class="w"> </span>self<span class="p">.</span>keys<span class="p">[</span>keyIndex<span class="p">].</span>key<span class="p">;</span><span class="w"></span>
<span class="w">        </span>value<span class="w"> </span><span class="o">=</span><span class="w"> </span>self<span class="p">.</span>data<span class="p">[</span>key<span class="p">].</span>value<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// How to use it</span>
<span class="k">contract</span><span class="w"> </span><span class="ni">User</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Just a struct holding our data.</span>
<span class="w">    </span>itmap<span class="w"> </span>data<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Apply library functions to the data type.</span>
<span class="w">    </span>using<span class="w"> </span>IterableMapping<span class="w"> </span><span class="kt">for</span><span class="w"> </span>itmap<span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Insert something</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">insert</span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">k</span><span class="p">,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">v</span><span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">size</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// This calls IterableMapping.insert(data, k, v)</span>
<span class="w">        </span>data<span class="p">.</span>insert<span class="p">(</span>k<span class="p">,</span><span class="w"> </span>v<span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="c1">// We can still access members of the struct,</span>
<span class="w">        </span><span class="c1">// but we should take care not to mess with them.</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span>data<span class="p">.</span>size<span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Computes the sum of all stored data.</span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">sum</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">uint</span><span class="w"> </span><span class="nv">s</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">for</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">            </span><span class="kt">uint</span><span class="w"> </span><span class="nv">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>data<span class="p">.</span>iterate_start<span class="p">();</span><span class="w"></span>
<span class="w">            </span>data<span class="p">.</span>iterate_valid<span class="p">(</span>i<span class="p">);</span><span class="w"></span>
<span class="w">            </span>i<span class="w"> </span><span class="o">=</span><span class="w"> </span>data<span class="p">.</span>iterate_next<span class="p">(</span>i<span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="p">(,</span><span class="w"> </span><span class="kt">uint</span><span class="w"> </span><span class="nv">value</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>data<span class="p">.</span>iterate_get<span class="p">(</span>i<span class="p">);</span><span class="w"></span>
<span class="w">            </span>s<span class="w"> </span><span class="o">+=</span><span class="w"> </span>value<span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="lvalues">
<span id="index-26"></span><h2>اپراتورهای شامل  LValues<a class="headerlink" href="#lvalues" title="پیوند ثابت به این سر مقاله"></a></h2>
<p>اگر  <code class="docutils literal notranslate"><span class="pre">a</span></code> یک LValue باشد (به عنوان مثال یک متغیر یا چیزی که می‌توان به آن اختصاص داد)، عملگرهای زیر به صورت مختصر در دسترس هستند:</p>
<p><code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+=</span> <span class="pre">e</span></code>  معادل  <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">=</span> <span class="pre">a</span> <span class="pre">+</span> <span class="pre">e</span></code> است. عملگرها  <code class="docutils literal notranslate"><span class="pre">=-</span></code> ، <code class="docutils literal notranslate"><span class="pre">=*</span></code> ، <code class="docutils literal notranslate"><span class="pre">=/</span></code> ، <code class="docutils literal notranslate"><span class="pre">%=</span></code> ، <code class="docutils literal notranslate"><span class="pre">=|</span></code> ، <code class="docutils literal notranslate"><span class="pre">=&amp;</span></code>  و <code class="docutils literal notranslate"><span class="pre">=^</span></code>  بر این
اساس تعریف می‌شوند.  <code class="docutils literal notranslate"><span class="pre">++a</span></code> و  <code class="docutils literal notranslate"><span class="pre">--a</span></code> معادل  <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">+=</span> <span class="pre">1</span></code> / <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">-=</span> <span class="pre">1</span></code>  هستند اما این عبارت هنوز مقدار
قبلی  <code class="docutils literal notranslate"><span class="pre">a</span></code> را دارد. در مقابل ،  <code class="docutils literal notranslate"><span class="pre">a--</span></code> و  <code class="docutils literal notranslate"><span class="pre">a++</span></code> تأثیر یکسانی در  <code class="docutils literal notranslate"><span class="pre">a</span></code> دارند اما مقدار را پس از تغییر برمی‌گردانند.</p>
<section id="delete">
<span id="id30"></span><h3>حذف<a class="headerlink" href="#delete" title="پیوند ثابت به این سر مقاله"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">delete</span> <span class="pre">a</span></code> یک مقدار اولیه را برای نوع، به  <code class="docutils literal notranslate"><span class="pre">a</span></code> اختصاص می‌دهد. یعنی برای اعداد صحیح معادل  <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">=</span> <span class="pre">0</span></code>
است، اما همچنین می‌تواند در آرایه ها مورد استفاده قرار گیرد، جایی که یک آرایه پویا از طول صفر یا یک آرایه
ایستا با همان طول را با تمام عناصر تنظیم شده روی مقدار اولیه خود اختصاص
می‌دهد.  <code class="docutils literal notranslate"><span class="pre">delete</span> <span class="pre">a[x]</span></code> مورد را در شاخص  <code class="docutils literal notranslate"><span class="pre">x</span></code> آرایه حذف می‌کند و سایر عناصر و طول آرایه را دست
نخورده باقی می‌گذارد. این کار به طور ویژه به این معنی است که در آرایه شکاف ایجاد می‌کند. اگر قصد حذف
موارد را دارید، <a class="reference internal" href="#mapping-types"><span class="std std-ref">mapping</span></a> احتمالاً انتخاب بهتری است.</p>
<p>برای structها، یک struct را با تنظیم مجدد همه اعضا اختصاص می‌دهد. به عبارت دیگر، مقدار <code class="docutils literal notranslate"><span class="pre">a</span></code>  پس از
<code class="docutils literal notranslate"><span class="pre">delete</span> <span class="pre">a</span></code>  همانی است که اگر <code class="docutils literal notranslate"><span class="pre">a</span></code>  بدون انتساب اعلام شود، با توجه به هشدار زیر:</p>
<p><code class="docutils literal notranslate"><span class="pre">delete</span></code>  تأثیری در نگاشت ندارد (زیرا ممکن است کلیدهای نگاشت دلخواه باشند و به طور کلی ناشناخته باشند).
بنابراین اگر یک struct را حذف کنید، همه اعضا را که نگاشت نباشند مجدد تنظیم می‌کند و همچنین
به عضوها بازگشت می‌یابد مگر اینکه آنها نگاشت باشند. با این حال، کلیدهای جداگانه و به آنچه نگاشت می‌شوند
می‌توانند حذف شوند: اگر <code class="docutils literal notranslate"><span class="pre">a</span></code>  نگاشت باشد، سپس  <code class="docutils literal notranslate"><span class="pre">delete</span> <span class="pre">a[x]</span></code> مقدار ذخیره شده در  <code class="docutils literal notranslate"><span class="pre">x</span></code> را حذف خواهد کرد.</p>
<p>توجه به این نکته مهم است که <code class="docutils literal notranslate"><span class="pre">delete</span> <span class="pre">a</span></code>  واقعاً مانند انتساب به <code class="docutils literal notranslate"><span class="pre">a</span></code>  رفتار می‌کند، یعنی یک شی جدید
را در  <code class="docutils literal notranslate"><span class="pre">a</span></code>  ذخیره می‌کند. این تمایز زمانی قابل مشاهده‌است که <code class="docutils literal notranslate"><span class="pre">a</span></code>  متغیر مرجع باشد: فقط یک  aرا خود
مجدد تنظیم می‌کند نه مقداری که قبلاً به آن اشاره کرده بود.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5ID49MC40LjAgPDAuOS4wOwoKY29udHJhY3QgRGVsZXRlRXhhbXBsZSB7CiAgICB1aW50IGRhdGE7CiAgICB1aW50W10gZGF0YUFycmF5OwoKICAgIGZ1bmN0aW9uIGYoKSBwdWJsaWMgewogICAgICAgIHVpbnQgeCA9IGRhdGE7CiAgICAgICAgZGVsZXRlIHg7IC8vIHNldHMgeCB0byAwLCBkb2VzIG5vdCBhZmZlY3QgZGF0YQogICAgICAgIGRlbGV0ZSBkYXRhOyAvLyBzZXRzIGRhdGEgdG8gMCwgZG9lcyBub3QgYWZmZWN0IHgKICAgICAgICB1aW50W10gc3RvcmFnZSB5ID0gZGF0YUFycmF5OwogICAgICAgIGRlbGV0ZSBkYXRhQXJyYXk7IC8vIHRoaXMgc2V0cyBkYXRhQXJyYXkubGVuZ3RoIHRvIHplcm8sIGJ1dCBhcyB1aW50W10gaXMgYSBjb21wbGV4IG9iamVjdCwgYWxzbwogICAgICAgIC8vIHkgaXMgYWZmZWN0ZWQgd2hpY2ggaXMgYW4gYWxpYXMgdG8gdGhlIHN0b3JhZ2Ugb2JqZWN0CiAgICAgICAgLy8gT24gdGhlIG90aGVyIGhhbmQ6ICJkZWxldGUgeSIgaXMgbm90IHZhbGlkLCBhcyBhc3NpZ25tZW50cyB0byBsb2NhbCB2YXJpYWJsZXMKICAgICAgICAvLyByZWZlcmVuY2luZyBzdG9yYWdlIG9iamVjdHMgY2FuIG9ubHkgYmUgbWFkZSBmcm9tIGV4aXN0aW5nIHN0b3JhZ2Ugb2JqZWN0cy4KICAgICAgICBhc3NlcnQoeS5sZW5ndGggPT0gMCk7CiAgICB9Cn0="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">&gt;=</span><span class="k">0.4.0</span><span class="w"> </span><span class="o">&lt;</span><span class="k">0.9.0</span><span class="p">;</span><span class="w"></span>

<span class="k">contract</span><span class="w"> </span><span class="ni">DeleteExample</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint</span><span class="w"> </span><span class="nv">data</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span>dataArray<span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">()</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">uint</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>data<span class="p">;</span><span class="w"></span>
<span class="w">        </span>delete<span class="w"> </span>x<span class="p">;</span><span class="w"> </span><span class="c1">// sets x to 0, does not affect data</span>
<span class="w">        </span>delete<span class="w"> </span>data<span class="p">;</span><span class="w"> </span><span class="c1">// sets data to 0, does not affect x</span>
<span class="w">        </span><span class="kt">uint</span><span class="p">[]</span><span class="w"> </span>storage<span class="w"> </span>y<span class="w"> </span><span class="o">=</span><span class="w"> </span>dataArray<span class="p">;</span><span class="w"></span>
<span class="w">        </span>delete<span class="w"> </span>dataArray<span class="p">;</span><span class="w"> </span><span class="c1">// this sets dataArray.length to zero, but as uint[] is a complex object, also</span>
<span class="w">        </span><span class="c1">// y is affected which is an alias to the storage object</span>
<span class="w">        </span><span class="c1">// On the other hand: &quot;delete y&quot; is not valid, as assignments to local variables</span>
<span class="w">        </span><span class="c1">// referencing storage objects can only be made from existing storage objects.</span>
<span class="w">        </span>assert<span class="p">(</span>y<span class="p">.</span>length<span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="conversions-between-elementary-types">
<span id="types-conversion-elementary-types"></span><span id="index-27"></span><h2>تبدیل بین نوع‌های اصلی (Conversions between Elementary Types)<a class="headerlink" href="#conversions-between-elementary-types" title="پیوند ثابت به این سر مقاله"></a></h2>
<section id="implicit-conversions">
<h3>تبدیل‌های ضمنی (Implicit Conversions)<a class="headerlink" href="#implicit-conversions" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>در برخی موارد هنگام انتساب‌ها، هنگام انتقال آرگومان‌ها به توابع و هنگام اعمال عملگرها، کامپایلر به طور خودکار
یک نوع تبدیل ضمنی اعمال می‌کند. به طور کلی، اگر به صورت سمنتیک معنا پیدا کند و هیچ اطلاعاتی از بین
نرود، تبدیل ضمنی بین مقدار_نوع‌های مختلف امکان پذیر است.</p>
<p>به عنوان مثال،  <code class="docutils literal notranslate"><span class="pre">uint8</span></code> به  <code class="docutils literal notranslate"><span class="pre">uint16</span></code> و  <code class="docutils literal notranslate"><span class="pre">int128</span></code> به  <code class="docutils literal notranslate"><span class="pre">int256</span></code> قابل تبدیل است،
اما  <code class="docutils literal notranslate"><span class="pre">int8</span></code> به  <code class="docutils literal notranslate"><span class="pre">uint256</span></code> قابل تبدیل نیست، زیرا  <code class="docutils literal notranslate"><span class="pre">uint256</span></code> نمی‌تواند مقادیری مانند  <code class="docutils literal notranslate"><span class="pre">1-</span></code> را نگه دارد.</p>
<p>For example, <code class="docutils literal notranslate"><span class="pre">uint8</span></code> is convertible to
<code class="docutils literal notranslate"><span class="pre">uint16</span></code> and <code class="docutils literal notranslate"><span class="pre">int128</span></code> to <code class="docutils literal notranslate"><span class="pre">int256</span></code>, but <code class="docutils literal notranslate"><span class="pre">int8</span></code> is not convertible to <code class="docutils literal notranslate"><span class="pre">uint256</span></code>,
because <code class="docutils literal notranslate"><span class="pre">uint256</span></code> cannot hold values such as <code class="docutils literal notranslate"><span class="pre">-1</span></code>.</p>
<p>اگر یک عملگر بر روی نوع‌های مختلف اعمال شود، کامپایلر سعی می‌کند به طور ضمنی یکی از عملوندها را به
نوع دیگری تبدیل کند (این امر برای انتساب‌ها نیز صادق است). این بدان معناست که عملیات همیشه در نوع یکی از عملوندها انجام می‌شود.</p>
<p>برای جزئیات بیشتر در مورد اینکه کدام یک از تغییرات ضمنی امکان پذیر است، لطفاً با بخش‌هایی هر نوع مراجعه کنید.</p>
<p>در مثال زیر،  <code class="docutils literal notranslate"><span class="pre">y</span></code> و  <code class="docutils literal notranslate"><span class="pre">z</span></code> ، عملوندهای جمع، یک نوع ندارند، اما  <code class="docutils literal notranslate"><span class="pre">uint8</span></code> را می‌توان به طور ضمنی
به  <code class="docutils literal notranslate"><span class="pre">uint16</span></code> تبدیل کرد و نه بالعکس. به همین دلیل،  <code class="docutils literal notranslate"><span class="pre">y</span></code> قبل از اینکه جمع در نوع  <code class="docutils literal notranslate"><span class="pre">uint16</span></code> انجام شود،
به نوع  <code class="docutils literal notranslate"><span class="pre">z</span></code> تبدیل می‌شود.  <code class="docutils literal notranslate"><span class="pre">uint16</span></code> نوع حاصل از عبارت  <code class="docutils literal notranslate"><span class="pre">y</span> <span class="pre">+</span> <span class="pre">z</span></code> است. از آنجا که به یک متغیر از نوع
<code class="docutils literal notranslate"><span class="pre">uint32</span></code> اختصاص داده شده است، تبدیل ضمنی دیگر پس از جمع انجام می‌شود.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=ICAgdWludDggeTsKICAgdWludDE2IHo7CiAgIHVpbnQzMiB4ID0geSArIHo7CgoK2KrYqNiv24zZhOKAjNmH2KfbjCDYtdix24zYrSAgKEV4cGxpY2l0IENvbnZlcnNpb25zKQ=="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span>   uint8 y;
   uint16 z;
   uint32 x = y + z;


تبدیل‌های صریح  (Explicit Conversions)
</pre></div>
</div>
<blockquote>
<div><blockquote>
<div><p>ویژگی‌های امنیتی کامپایلر را دور بزنید، بنابراین مطمئن شوید که نتیجه همان چیزی است که شما می‌خواهید
و انتظار دارید!</p>
</div></blockquote>
<p>مثال زیر را در نظر بگیرید که  <code class="docutils literal notranslate"><span class="pre">int</span></code> منفی را به  <code class="docutils literal notranslate"><span class="pre">uint</span></code> تبدیل می‌کند:</p>
</div></blockquote>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=aW50ICB5ID0gLTM7CnVpbnQgeCA9IHVpbnQoeSk7"><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w">  </span><span class="nv">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="m m-Decimal">3</span><span class="p">;</span><span class="w"></span>
<span class="kt">uint</span><span class="w"> </span><span class="nv">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">uint</span><span class="p">(</span>y<span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>در انتهای این قطعه کد، <code class="docutils literal notranslate"><span class="pre">x</span></code>  دارای مقدار <code class="docutils literal notranslate"><span class="pre">0xfffff..fd</span></code>   (64 نویسه hex) است که در نمایش مکمل 256 بیت 3- (منفی سه) است.</p>
<p>اگر یک عدد صحیح صریح به یک نوع کوچکتر تبدیل شود، بیت‌های مرتبه بالاتر  بریده می‌شوند:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=dWludDMyIGEgPSAweDEyMzQ1Njc4Owp1aW50MTYgYiA9IHVpbnQxNihhKTsgLy8gYiB3aWxsIGJlIDB4NTY3OCBub3c="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">uint32</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x12345678</span><span class="p">;</span><span class="w"></span>
<span class="kt">uint16</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">uint16</span><span class="p">(</span>a<span class="p">);</span><span class="w"> </span><span class="c1">// b will be 0x5678 now</span>
</pre></div>
</div>
<p>اگر یک عدد صحیح صریح به یک نوع بزرگتر تبدیل شود، در سمت چپ (یعنی در انتهای مرتبه بالاتر) قرار
می‌گیرد. نتیجه تبدیل برابر با عدد صحیح اصلی  خواهد بود:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=dWludDE2IGEgPSAweDEyMzQ7CnVpbnQzMiBiID0gdWludDMyKGEpOyAvLyBiIHdpbGwgYmUgMHgwMDAwMTIzNCBub3cKYXNzZXJ0KGEgPT0gYik7"><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">uint16</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x1234</span><span class="p">;</span><span class="w"></span>
<span class="kt">uint32</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">uint32</span><span class="p">(</span>a<span class="p">);</span><span class="w"> </span><span class="c1">// b will be 0x00001234 now</span>
assert<span class="p">(</span>a<span class="w"> </span><span class="o">==</span><span class="w"> </span>b<span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>نوع‌های بایت‌های با اندازه ثابت  در هنگام تبدیل متفاوت عمل می‌کنند. می‌توان آنها را به عنوان توالی بایت‌های
فردی در نظر گرفت و تبدیل به نوع کوچکتر، توالی را قطع می‌کند:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ynl0ZXMyIGEgPSAweDEyMzQ7CmJ5dGVzMSBiID0gYnl0ZXMxKGEpOyAvLyBiIHdpbGwgYmUgMHgxMg=="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span>bytes2<span class="w"> </span>a<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x1234</span><span class="p">;</span><span class="w"></span>
bytes1<span class="w"> </span>b<span class="w"> </span><span class="o">=</span><span class="w"> </span>bytes1<span class="p">(</span>a<span class="p">);</span><span class="w"> </span><span class="c1">// b will be 0x12</span>
</pre></div>
</div>
<p>اگر یک نوع بایت با اندازه ثابت صریحاً به یک نوع بزرگتر تبدیل شود، در سمت راست پر می‌شود. دستیابی به
بایت در یک شاخص ثابت منجر به همان مقدار قبل و بعد از تبدیل خواهد شد (اگر شاخص هنوز در محدوده
باشد):</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ynl0ZXMyIGEgPSAweDEyMzQ7CmJ5dGVzNCBiID0gYnl0ZXM0KGEpOyAvLyBiIHdpbGwgYmUgMHgxMjM0MDAwMAphc3NlcnQoYVswXSA9PSBiWzBdKTsKYXNzZXJ0KGFbMV0gPT0gYlsxXSk7"><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span>bytes2<span class="w"> </span>a<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x1234</span><span class="p">;</span><span class="w"></span>
bytes4<span class="w"> </span>b<span class="w"> </span><span class="o">=</span><span class="w"> </span>bytes4<span class="p">(</span>a<span class="p">);</span><span class="w"> </span><span class="c1">// b will be 0x12340000</span>
assert<span class="p">(</span>a<span class="p">[</span><span class="m m-Decimal">0</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>b<span class="p">[</span><span class="m m-Decimal">0</span><span class="p">]);</span><span class="w"></span>
assert<span class="p">(</span>a<span class="p">[</span><span class="m m-Decimal">1</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span>b<span class="p">[</span><span class="m m-Decimal">1</span><span class="p">]);</span><span class="w"></span>
</pre></div>
</div>
<p>ازآنجایی که آرایه‌های بایت با اندازه ثابت در هنگام کوتاه کردن یا پر کردن رفتار متفاوتی دارند، درصورتی که هر
دو از اندازه یکسانی برخوردار باشند، تبدیل صریح بین اعداد صحیح و آرایه‌های بایت با اندازه ثابت مجاز است. اگر
می‌خواهید بین اعداد صحیح و آرایه‌های بایت با اندازه ثابت با اندازه‌های مختلف تبدیل کنید، باید از تبدیلات
میانی استفاده کنید که قوانین کوتاه کردن و پر کردن مورد نظر را صریح می‌کند:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ynl0ZXMyIGEgPSAweDEyMzQ7CnVpbnQzMiBiID0gdWludDE2KGEpOyAvLyBiIHdpbGwgYmUgMHgwMDAwMTIzNAp1aW50MzIgYyA9IHVpbnQzMihieXRlczQoYSkpOyAvLyBjIHdpbGwgYmUgMHgxMjM0MDAwMAp1aW50OCBkID0gdWludDgodWludDE2KGEpKTsgLy8gZCB3aWxsIGJlIDB4MzQKdWludDggZSA9IHVpbnQ4KGJ5dGVzMShhKSk7IC8vIGUgd2lsbCBiZSAweDEy"><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span>bytes2<span class="w"> </span>a<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x1234</span><span class="p">;</span><span class="w"></span>
<span class="kt">uint32</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">uint16</span><span class="p">(</span>a<span class="p">);</span><span class="w"> </span><span class="c1">// b will be 0x00001234</span>
<span class="kt">uint32</span><span class="w"> </span><span class="nv">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">uint32</span><span class="p">(</span>bytes4<span class="p">(</span>a<span class="p">));</span><span class="w"> </span><span class="c1">// c will be 0x12340000</span>
<span class="kt">uint8</span><span class="w"> </span><span class="nv">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">uint8</span><span class="p">(</span><span class="kt">uint16</span><span class="p">(</span>a<span class="p">));</span><span class="w"> </span><span class="c1">// d will be 0x34</span>
<span class="kt">uint8</span><span class="w"> </span><span class="nv">e</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">uint8</span><span class="p">(</span>bytes1<span class="p">(</span>a<span class="p">));</span><span class="w"> </span><span class="c1">// e will be 0x12</span>
</pre></div>
</div>
<p>آرایه‌های <code class="docutils literal notranslate"><span class="pre">bytes</span></code> و برش‌های <code class="docutils literal notranslate"><span class="pre">bytes</span></code> کال‌دیتا را می‌توان به طور صریح به انواع بایت‌های ثابت (<code class="docutils literal notranslate"><span class="pre">bytes1</span></code>/…/<code class="docutils literal notranslate"><span class="pre">bytes32</span></code>)
تبدیل کرد. در صورتی که آرایه طولانی تر از نوع بایت‌های ثابت هدف باشد، برش در انتها اتفاق می‌افتد. اگر آرایه کوتاهتر از نوع
هدف باشد، در انتها با صفر پر می‌شود.</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ly8gU1BEWC1MaWNlbnNlLUlkZW50aWZpZXI6IEdQTC0zLjAKcHJhZ21hIHNvbGlkaXR5IF4wLjguNTsKCmNvbnRyYWN0IEMgewogICAgYnl0ZXMgcyA9ICJhYmNkZWZnaCI7CiAgICBmdW5jdGlvbiBmKGJ5dGVzIGNhbGxkYXRhIGMsIGJ5dGVzIG1lbW9yeSBtKSBwdWJsaWMgdmlldyByZXR1cm5zIChieXRlczE2LCBieXRlczMpIHsKICAgICAgICByZXF1aXJlKGMubGVuZ3RoID09IDE2LCAiIik7CiAgICAgICAgYnl0ZXMxNiBiID0gYnl0ZXMxNihtKTsgIC8vIGlmIGxlbmd0aCBvZiBtIGlzIGdyZWF0ZXIgdGhhbiAxNiwgdHJ1bmNhdGlvbiB3aWxsIGhhcHBlbgogICAgICAgIGIgPSBieXRlczE2KHMpOyAgLy8gcGFkZGVkIG9uIHRoZSByaWdodCwgc28gcmVzdWx0IGlzICJhYmNkZWZnaFwwXDBcMFwwXDBcMFwwXDAiCiAgICAgICAgYnl0ZXMzIGIxID0gYnl0ZXMzKHMpOyAvLyB0cnVuY2F0ZWQsIGIxIGVxdWFscyB0byAiYWJjIgogICAgICAgIGIgPSBieXRlczE2KGNbOjhdKTsgIC8vIGFsc28gcGFkZGVkIHdpdGggemVyb3MKICAgICAgICByZXR1cm4gKGIsIGIxKTsKICAgIH0KfQ=="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-3.0</span>
<span class="k">pragma solidity</span><span class="w"> </span><span class="o">^</span><span class="k">0.8.5</span><span class="p">;</span><span class="w"></span>

<span class="k">contract</span><span class="w"> </span><span class="ni">C</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;abcdefgh&quot;</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kt">function</span><span class="w"> </span><span class="nv">f</span><span class="p">(</span><span class="kt">bytes</span><span class="w"> </span><span class="nv">calldata</span><span class="w"> </span>c<span class="p">,</span><span class="w"> </span><span class="kt">bytes</span><span class="w"> </span><span class="nv">memory</span><span class="w"> </span>m<span class="p">)</span><span class="w"> </span><span class="kt">public</span><span class="w"> </span>view<span class="w"> </span><span class="kt">returns</span><span class="w"> </span><span class="p">(</span><span class="kt">bytes16</span><span class="p">,</span><span class="w"> </span>bytes3<span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">require</span><span class="p">(</span>c<span class="p">.</span>length<span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m m-Decimal">16</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="kt">bytes16</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">bytes16</span><span class="p">(</span>m<span class="p">);</span><span class="w">  </span><span class="c1">// if length of m is greater than 16, truncation will happen</span>
<span class="w">        </span>b<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">bytes16</span><span class="p">(</span>s<span class="p">);</span><span class="w">  </span><span class="c1">// padded on the right, so result is &quot;abcdefgh\0\0\0\0\0\0\0\0&quot;</span>
<span class="w">        </span>bytes3<span class="w"> </span>b1<span class="w"> </span><span class="o">=</span><span class="w"> </span>bytes3<span class="p">(</span>s<span class="p">);</span><span class="w"> </span><span class="c1">// truncated, b1 equals to &quot;abc&quot;</span>
<span class="w">        </span>b<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">bytes16</span><span class="p">(</span>c<span class="p">[:</span><span class="m m-Decimal">8</span><span class="p">]);</span><span class="w">  </span><span class="c1">// also padded with zeros</span>
<span class="w">        </span><span class="kt">return</span><span class="w"> </span><span class="p">(</span>b<span class="p">,</span><span class="w"> </span>b1<span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
</section>
<section id="types-conversion-literals">
<span id="id31"></span><h2>تبدیل بین لیترال‌ها و نوع‌های اصلی<a class="headerlink" href="#types-conversion-literals" title="پیوند ثابت به این سر مقاله"></a></h2>
<section id="integer-types">
<h3>انواع عدد صحیح  (Integer Types)<a class="headerlink" href="#integer-types" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>لیترال‌های عدد دسیمال و هگزادسیمال را می‌توان به طور ضمنی به هر نوع عددی صحیح که به اندازه کافی بزرگ
باشد و بتوان آن را بدون کوتاه سازی نشان داد، تبدیل کرد:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=dWludDggYSA9IDEyOyAvLyBmaW5lCnVpbnQzMiBiID0gMTIzNDsgLy8gZmluZQp1aW50MTYgYyA9IDB4MTIzNDU2OyAvLyBmYWlscywgc2luY2UgaXQgd291bGQgaGF2ZSB0byB0cnVuY2F0ZSB0byAweDM0NTY="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span><span class="kt">uint8</span><span class="w"> </span><span class="nv">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">12</span><span class="p">;</span><span class="w"> </span><span class="c1">// fine</span>
<span class="kt">uint32</span><span class="w"> </span><span class="nv">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">1234</span><span class="p">;</span><span class="w"> </span><span class="c1">// fine</span>
<span class="kt">uint16</span><span class="w"> </span><span class="nv">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x123456</span><span class="p">;</span><span class="w"> </span><span class="c1">// fails, since it would have to truncate to 0x3456</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">توجه</p>
<p>قبل از نسخه 0.8.0، هر عدد تحت اعشاری یا هگزا دسیمال می‌تواند به ضمنی به یک نوع صحیح تبدیل
شود. از 0.8.0، چنین تبدیل‌های صریح به اندازه تبدیل‌های ضمنی سختگیرانه هستند، یعنی تنها در صورتی
مجاز هستند که کلمه تحت اللفظی در محدوده حاصله مطابقت داشته باشد.</p>
</div>
</section>
<section id="id32">
<h3>آرایه‌های بایت با اندازه ثابت<a class="headerlink" href="#id32" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>اعداد اعشاری لیترال را نمی‌توان به صورت ضمنی به آرایه‌های بایت با اندازه ثابت تبدیل کرد. می‌تواند لیترال‌های
عددی هگزادسیمال باشد، اما فقط در صورتی که تعداد ارقام هگز دقیقاً متناسب با اندازه نوع بایت  باشد. به عنوان
ک استثنا، هر دو لیترال‌های دسیمال و هگزادسیمال که مقدار آنها صفر است، می‌توانند به هر تایپ بایت با اندازه
با اندازه ثابت تبدیل شوند:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ynl0ZXMyIGEgPSA1NDMyMTsgLy8gbm90IGFsbG93ZWQKYnl0ZXMyIGIgPSAweDEyOyAvLyBub3QgYWxsb3dlZApieXRlczIgYyA9IDB4MTIzOyAvLyBub3QgYWxsb3dlZApieXRlczIgZCA9IDB4MTIzNDsgLy8gZmluZQpieXRlczIgZSA9IDB4MDAxMjsgLy8gZmluZQpieXRlczQgZiA9IDA7IC8vIGZpbmUKYnl0ZXM0IGcgPSAweDA7IC8vIGZpbmU="><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span>bytes2<span class="w"> </span>a<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">54321</span><span class="p">;</span><span class="w"> </span><span class="c1">// not allowed</span>
bytes2<span class="w"> </span>b<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x12</span><span class="p">;</span><span class="w"> </span><span class="c1">// not allowed</span>
bytes2<span class="w"> </span>c<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x123</span><span class="p">;</span><span class="w"> </span><span class="c1">// not allowed</span>
bytes2<span class="w"> </span>d<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x1234</span><span class="p">;</span><span class="w"> </span><span class="c1">// fine</span>
bytes2<span class="w"> </span>e<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0012</span><span class="p">;</span><span class="w"> </span><span class="c1">// fine</span>
bytes4<span class="w"> </span>f<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m m-Decimal">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// fine</span>
bytes4<span class="w"> </span>g<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">0x0</span><span class="p">;</span><span class="w"> </span><span class="c1">// fine</span>
</pre></div>
</div>
<p>اگر تعداد کاراکترهای آنها با اندازه نوع  بایت‌ها مطابقت داشته باشد، می‌توان لیترال‌های رشته‌ای و لیترال‌های
رشته‌ای هگزی را به طور ضمنی به آرایه‌های بایت با اندازه ثابت تبدیل کرد:</p>
<p class="remix-link-container"><a class="remix-link reference external" href="https://remix.ethereum.org/?language=solidity&amp;version=0.8.4&amp;code=Ynl0ZXMyIGEgPSBoZXgiMTIzNCI7IC8vIGZpbmUKYnl0ZXMyIGIgPSAieHkiOyAvLyBmaW5lCmJ5dGVzMiBjID0gaGV4IjEyIjsgLy8gbm90IGFsbG93ZWQKYnl0ZXMyIGQgPSBoZXgiMTIzIjsgLy8gbm90IGFsbG93ZWQKYnl0ZXMyIGUgPSAieCI7IC8vIG5vdCBhbGxvd2VkCmJ5dGVzMiBmID0gInh5eiI7IC8vIG5vdCBhbGxvd2Vk"><span class="link-icon"></span><span class="link-text">open in Remix</span></a></p>
<div class="highlight-solidity notranslate"><div class="highlight"><pre><span></span>bytes2<span class="w"> </span>a<span class="w"> </span><span class="o">=</span><span class="w"> </span>hex<span class="s2">&quot;1234&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// fine</span>
bytes2<span class="w"> </span>b<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;xy&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// fine</span>
bytes2<span class="w"> </span>c<span class="w"> </span><span class="o">=</span><span class="w"> </span>hex<span class="s2">&quot;12&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// not allowed</span>
bytes2<span class="w"> </span>d<span class="w"> </span><span class="o">=</span><span class="w"> </span>hex<span class="s2">&quot;123&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// not allowed</span>
bytes2<span class="w"> </span>e<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;x&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// not allowed</span>
bytes2<span class="w"> </span>f<span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;xyz&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// not allowed</span>
</pre></div>
</div>
</section>
<section id="id33">
<h3>آدرس‌ها<a class="headerlink" href="#id33" title="پیوند ثابت به این سر مقاله"></a></h3>
<p>همانطور که در <a class="reference internal" href="#address-literals"><span class="std std-ref">آدرس لیترال‌ها</span></a> توضیح داده شد، لیترال‌های هگز با اندازه صحیح که از آزمون چک‌سام  عبور
می‌کنند از نوع  <code class="docutils literal notranslate"><span class="pre">address</span></code> هستند. هیچ لیترال دیگری را نمی‌توان به طور ضمنی به
نوع  <code class="docutils literal notranslate"><span class="pre">address</span></code> تبدیل کرد.</p>
<p>تبدیل صریح از  <code class="docutils literal notranslate"><span class="pre">bytes20</span></code>  یا هر نوع عدد صحیح به  <code class="docutils literal notranslate"><span class="pre">address</span></code> منجر به <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code>  می‌شود.</p>
<p><code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">a</span></code>  را می‌توان به <code class="docutils literal notranslate"><span class="pre">address</span> <span class="pre">payable</span></code>  از طریق  <code class="docutils literal notranslate"><span class="pre">payable(a)</span></code> تبدیل کرد.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="structure-of-a-contract.html" class="btn btn-neutral float-left" title="ساختار قرارداد" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> پیشین</a>
        <a href="units-and-global-variables.html" class="btn btn-neutral float-right" title="واحدها و متغیرهای موجود در سطح جهانی" accesskey="n" rel="next">بعدی <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; حق نشر2016-2021, Ethereum.</p>
  </div>

  ساخته شده با <a href="https://www.sphinx-doc.org/">Sphinx</a>
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">پوسته</a>
    تهیّه شده با <a href="https://readthedocs.org">Read the Docs</a>.
  
    <p>
        <a href="credits-and-attribution.html">Credits and attribution</a>.
    </p>


</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book fa-element"> RTD </span>

    <span class="fa fa-element">
    <input class="container_toggle" type="checkbox" id="switch" name="mode">
    <label for="switch"></label>
    </span>

    <span class="fa fa-v fa-element"> v:  <span class="fa fa-caret-down"></span></span>

    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>نگارش‌ها</dt> 
        </dl>
        <dl>
            <dt>بارگیری‌ها</dt> 
        </dl>
        <dl>
            
            <dt>درباره‌ی خواندن مستندات</dt>
            <dd>
                <a href="///projects//?fromdocs=">صفحه خانگی پروژه</a>
            </dd>
            <dd>
                <a href="///builds//?fromdocs=">ساخت‌ها</a>
            </dd>
        </dl>
    </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>